{"version":3,"sources":["context/UserContext/index.js","components/utils.js","components/AuthLayout/index.js","components/NotFound/index.js","styled/index.js","components/ProfileNav/index.js","utils/db.js","actions/index.js","components/Headers/index.js","utils/database.js","hooks/useDebouncedEffect.js","theme/index.js","pages/Hep/styled.js","pages/Hep/Details.js","components/Common/index.js","utils/index.js","pages/Hep/Validations/index.js","pages/Hep/Form.js","reducer/hepReducer.js","pages/Hep/AllHeps.js","pages/Hep/index.js","assets/Parachute.js","components/PdfViewer/index.js","assets/Save.js","assets/Signature.js","components/DrawSignature/index.js","components/DrawSignature/SignatureViewer.js","components/SimpleTableCheck/index.js","pages/RequestArea/utils.js","reducer/platformDeliveryReducer.js","pages/PlatformDelivery/Validation/index.js","pages/PlatformDelivery/Details.js","pages/PlatformDelivery/index.js","components/Tag/index.js","pages/RequestArea/index.js","components/Error/index.js","reducer/requestFormReducer.js","utils/extensions.js","pages/RequestArea/RequestForm.js","pages/RequestArea/NewRequest.js","reducer/requestReturnFormReducer.js","components/ImageViewer/index.js","pages/RequestReturn/validation/index.js","pages/RequestReturn/RequestReturnForm.js","pages/RequestReturn/NewReturnRequest.js","assets/BoxNoSync.js","assets/BoxSync.js","assets/Geotec.js","pages/Rgo/index.js","pages/RequestExtension/validation/index.js","pages/RequestExtension/RequestExtensionForm.js","pages/RequestArea/styles/index.js","pages/RequestArea/RequestBase.js","reducer/newRequestExtensionReducer.js","pages/RequestExtension/NewExtensionRequest.js","reducer/baseReducer.js","reducer/newRequestReturnReducer.js","reducer/requestExtensionFormReducer.js","reducer/requestReducer.js","reducer/rgoReducer.js","hooks/useShouldShowPrompt.js","hooks/useWebInstallPrompt.js","App.js","hooks/useOfflineStatus.js","serviceWorkerRegistration.js","index.js"],"names":["UserContext","createContext","user","hasDatabaseAccess","isAuthenticated","message","login","logout","INITIAL_STATE","Object","freeze","status","role","roles","permissionTranslate","supervisor","laboratoryanalysis","support","admin","sessionName","session","sessionStorage","getItem","AuthLayout","props","useState","JSON","parse","auth","setAuth","Provider","value","children","NotFoundStyle","styled","div","theme","secondaryColor","NotFound","Component","icon","primaryText","secondaryText","buttonProps","onClick","rest","useContext","ThemeContext","iconDefault","type","dark","style","width","height","className","text","Dot","themes","light","createGlobalStyle","gridBorderColor","cellBackground","fontColor","cellDisabledBackground","fieldBorder","colors","gray3","white","gray2","softgray1","backgroundgray","bluishgray","_","skyblue","red","green","headerPage","p","Modal","BigIconButton","Button","i","Details","MenuCustom","gray1","Menu","sideNavSecondary","MenuItemCustom","MenuItem","MenuItemSingle","RoleMenuItem","NavigationMenu","HeaderPage","header","Wrapper","backgroundMain","main","GlobalStyle","softgray2","rgba","DescriptionText","as","FooterStyle","color","blue","footer","SideNavStyle","sideNavMain","ProfileNav","username","themeIcon","Switch","checked","onChange","target","onChangeTheme","content","title","subtitle","toLowerCase","trigger","image","map","r","k","authAux","cloneDeep","setItem","stringify","onChangeRole","prefix","RoleHeader","db","Dexie","version","stores","holes","hepQueue","platformDeliveryQueue","holeRequest","baseReducer","newRequestReturnReducer","newRequestExtensionReducer","rgoReducer","requestReducer","requestFormReducer","requestExtensionFormReducer","requestReturnFormReducer","hepReducer","hepCache","platformCache","platformSelectedCache","areaRequests","areaRequest","tableName","GetAreaRequests","indexDB","table","toArray","then","resp","payload","CleanAreaRequests","clear","AddAreaRequests","done","add","CacheHEP","data","areaRequestId","heps","filter","hep","Nombre_Propuesto","arearequestid","length","update","id","GetCacheHep","getCacheHoleDetails","holeId","find","hole","HeaderFixedStyles","FixedHeader","left","center","right","bottom","separatorPosition","showSeparator","fixedClassnames","cl","separatorClassName","DetailsHeader","padding","fontStyle","fontWeight","fontSize","lineHeight","baseApiUrl","process","axios","create","baseURL","defaults","withCredentials","credentials","useDebouncedEffect","effect","delay","deps","callback","useCallback","useEffect","handler","setTimeout","clearTimeout","common","fontSmall","fontMedium","fontLarge","warning","danger","assertive","activeBorder","backgroundSecondary","borderMain","borderSecondary","secondary","terciary","placeholder","emphasisMain","emphasisSecondary","badgeInactive","fieldMain","fieldMainAlt","fieldSecondary","fieldTerciary","fieldTerciarytAlt","fieldDisabled","fieldNotEditable","tableCellMain","dockMain","switchMain","switchMainAlt","TableStyles","buttonLabel","buttonMain","buttonSecondary","buttonTerciary","checkMain","checkMainAlt","tagMain","tagSecondary","sectionMain","sectionSecondary","sectionTerciary","sectionChartMain","cardMain","cardSecondary","cardTerciary","tableCellSecondary","dropDownMain","pageIndicator","menuMain","menuSecondary","menuTerciary","menuQuaternary","sectionBackground","fieldDarkenBackground","tableRowHover","tbodyHeight","softgray3","HepStyle","EmptyPlaceholder","defaultColumns","Prioridad_Sondaje","Norte_Propuesto","Este_Propuesto","Elev_Propuesto","Prof_Propuesto","SR_Propuesto","Azimut_Propuesto","Inclin_Propuesto","DDH_Propuesto","RC_Propuesto","Objetivo_Diametro","HepDetails","columns","useMemo","keys","forEach","key","idx","widthTitle","push","dataIndex","fixed","undefined","ellipsis","getColumnsDefinition","Section","dataSource","pagination","locale","emptyText","scroll","x","TitleInput","groupBy","items","reduce","result","item","toBase64","file","a","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","onerror","error","resizeImage","maxSize","w","h","outputType","readerEvent","resize","dataURL","Image","imageEvent","canvas","document","createElement","getContext","drawImage","toBlob","blob","toDataURL","output","src","HepValidator","documentUrl","updateModalConfig","config","HepType","label","HepForm","onSave","useSelector","selector","hepData","modalConfig","finalName","requiredGeophysics","observation","loading","setLoading","offline","dispatch","useHistory","useDispatch","handleChangeType","updateHepProp","get","response","finally","disabled","Fecha_HEP","inQueue","active","onCancel","onSubmit","prop","catch","err","post","emails","console","log","cancelProps","visible","email","link","href","to","subject","body","appendChild","click","removeChild","downloadLink","finalHoleId","download","filename","setAttribute","okProps","handleSubmit","flexDirection","justifyContent","display","isError","darken","size","options","index","disabledOpacity","updateProp","_sortColumns","b","toString","localeCompare","_hepColumns","sorter","render","row","fileName","paddingLeft","position","top","transform","rel","opacity","renderHepColumn","_hepDefaultTypes","RC","DDH","AllHeps","search","setSearch","updateRootProps","getHoles","d","maxWidth","maxHeight","minHeight","y","triggerDesc","triggerAsc","cancelSort","onRow","_rowIndex","holeDetails","merge","Hep","handleChangeHoleId","requestHoleDetails","getAreaHoles","requestHoles","marginBottom","SvgParachute","viewBox","fill","xmlns","cx","cy","fillRule","clipRule","stroke","strokeWidth","PdfViewer","url","SvgSave","SvgSignature","strokeLinecap","defaultProps","lazyRadius","brushRadius","brushColor","catenaryColor","backgroundColor","canvasWidth","canvasHeight","hideGrid","DrawSignature","React","forwardRef","ref","identifier","canvasDrawRef","useRef","current","getSvg","getBase64Data","callbackUri","uri","drawing","lineGenerator","d3","finalLines","getSaveData","line","points","finalPoint","point","path","fl","pathData","svgContainer","replace","undo","marginLeft","removeItem","SIGNED_TEXT","defaultStyles","SignatureViewer","svg","signed","signedText","noSignedText","pointerEvents","textAlign","cursor","Signature","verticalAlign","marginRight","TableDualStyle","SimpleTableCheck","headerProp","secondaryLabel","indexSelected","answer","op","defaultIndex","contentIndex","elementPosition","REQUEST_STATE","NO_CREATED","CREATED","APPROVED","DELETED","MODE","CREATING","EDITING","TAB_INDEX","REQUEST","RGO","HEP","PLATFORM_DELIVERY","errors","revision","recuperation","dip","azimuth","depth","sector","revisions","controlMeasures","missingFeature","controlMeasure","requiresGeotechnicalEvaluation","materialRisk","criticalControl","platformSignatures","area","responsibles","personaName","signature","platformDeliveryReducer","state","valuerevision","indexrevision","propcontrolmeasure","valuecontrolmeasure","indexcontrolmeasure","valuecriticalcontrol","indexcriticalcontrol","areaindexupd","areaIndex","responsibleindexupd","responsibleIndex","propupd","valueupd","signArray","PlatformValidations","platform","failExists","control","trim","measure","sign","respIndex","errorLength","containError","criticalControlOption","updateModal","updateSignatureProp","updateLoading","PlatformDetails","requestId","modalRef","signatureRef","loadingRef","platformDetails","useReducer","platformSelected","details","history","handleOpenModalSave","open","save","onSubmitModal","close","updateControlMeasureProp","check","signMeta","total","formData","FormData","indexDb","goBack","responsible","append","contentType","checkRevisions","validation","HeaderLeft","HeaderRight","showSave","requiredRgo","rgoName","updateSignatureProps","defaultDrawSignatureProps","marginTop","handleOpenSignatureModal","signatures","Save","getPlatforms","platforms","Number","PlatformDelivery","docRef","platformDelivery","setModalConfig","findPlatforms","CachePlatforms","handleClickCard","pathname","match","handleDownload","holeid","routeProps","PlatformDeliveryIndex","onDownload","HoleCard","documentName","currentSignatures","totalSignature","onClickDocument","Parachute","e","stopPropagation","colorTranslucence","Tag","rounded","Panel","Collapse","WhiteText","span","stateDict","step","bgColor","dateformat","RequestAreaIndex","activeCollapseKey","setActiveCollapseKey","setFilter","findAreaRequest","actives","createAt","rq","grouped","reverse","gl","showHelp","collapsible","expandIconPosition","activeKey","ghost","request","holesRenderer","recommendedWells","recommendation","RequestCard","beginDate","dateAuthorization","from","endDate","cardState","rgoExists","signatureProps","totalSigned","handleViewRequest","LinkRgoStyled","textDecoration","textTransform","ErrorContainer","Error","border","dateFormat","areas","description","requestNote","north","east","elevation","activities","activityName","moment","format","rgo","File","prototype","blobFileStruct","oldName","this","name","guidName","uuidv4","renamedFile","exec","publicPath","imageUrl","TagSelectStyledOverride","RequestForm","mode","modalImageRef","modalPdfRef","areaOptions","setAreaOptions","sectorOptions","setSectorOptions","imagePreview","setImagePreview","updateDateAuthorization","handleChangeUpload","evt","files","areasOptions","areaValues","values","areaKeys","debug","params","sectors","findSectors","getState","wells","rw","includes","alt","disabledDate","subtract","endOf","maxTagCount","fieldStyle","updateLogisticsArea","onSearch","multiple","accept","WellSection","ActivitySection","areaindex","ma","handleRemoveSignature","updateRecommendedWell","holeOptions","setHoleOptions","updateRecommendedWells","findHoleFromOptions","campana","findHoles","well","Input","setActivities","updatePropsActivity","handleActivitySearch","activityOptions","activity","activityValue","disabledTags","tooLate","tooEarly","NewRequest","requestRef","handleSave","setActive","sendWithoutFile","requestAreaResponse","processData","headers","onRemove","stockName","allSignatures","returnObservation","withoutSignature","returnSignatures","requestReturnId","returnImage","ImageViewer","wrap","requestReturnValidation","RequestReturnForm","initial","validations","changeWithoutSignature","imageLoading","returnImageExists","handleAddSignature","initialState","startDate","reducer","action","NewReturnRequest","returnRef","globalDispatch","handleOpenModal","handelSave","returnState","findRequest","cleanInner","SvgBoxNoSync","clipPath","SvgBoxSync","SvgGeotec","updateProps","activeLoading","Rgo","dataSave","rgoId","rgoFile","onComplete","findRgo","date","addProp","rgoDisabled","restriction","v2","isMoment","documentExists","filePreview","requestExtensionValidation","dateExtensionAuthorization","reasonExtension","extensionSignatures","ExtensionRequest","updateDateExtensionAuthorization","requestExtensionId","TabStyle","Tabs","syncProp","syncIcon","BoxSync","noSyncIcon","BoxNoSync","syncText","noSyncText","apiPath","TabPane","HeaderSeparator","RequestBase","rgoRef","requestExtensionRef","requestReturnRef","baseState","responseType","Blob","window","URL","createObjectURL","handleSaveReturn","go","handleSaveExtension","extensionState","handleRemoveExtension","dataClone","sing","res","requestState","responseSignature","sync","hepSync","hc","platformDeliverySync","nameRequest","existsExtension","existsReturn","all","returnCreateAt","object","hiddenExtension","tab","hiddenReturn","hepDisabled","platformDisabled","defaultAccordion","showDownload","showNewExtension","showNewReturn","showExtensionSave","showRemoveExtension","showReturnSave","downloadPath","accordion","defaultActiveKey","RequestExtensionForm","Geotec","TabTitle","disabledText","showApproved","whiteSpace","NewExtensionRequest","extensionRef","currentAreaHoles","currentAreaRequest","requestAreaId","installed","setInstallPromptSeenToday","promptName","today","toISOString","localStorage","getUserShouldBePromptedToInstall","daysToWaitBeforePromptingAgain","lastPrompt","getInstallPromptLastSeenAt","daysSinceLastPrompt","diff","isNaN","useShouldShowPrompt","userShouldBePromptedToInstall","setUserShouldBePromptedToInstall","handleUserSeeingInstallPrompt","useWebInstallPrompt","installPromptEvent","setInstallPromptEvent","addEventListener","event","prompt","userChoice","choice","outcome","InstallPWA","webInstallPrompt","handleWebInstallDeclined","handleWebInstallAccepted","store","createStore","combineReducers","propPlatform","valuePlatform","finalAreas","signaturesToAdd","fa","Signed","propsignature","valuesignature","indexaressignature","indexAreas","indexresponsiblesignature","indexResponsible","allsignatures","propactivity","valueactivity","indexactivity","propwell","valuewell","indexwell","propdateauthorization","valuedateauthorization","addAreaIndex","positionSignature","indexremovewell","indexremoveactivity","acts","airemove","riremove","signs","responsiblesFilter","propRoot","valueRoot","hepProp","hepValue","customTheme","showMenu","show","sidenav","querySelector","classList","remove","BaseLayout","onToggleTheme","sendPlatformToApi","sendHepToApi","AppLayout","navigator","onLine","setOffline","setOfflineStatus","removeEventListener","useOfflineStatus","redirect","val","delete","SendToApi","defaultSelectedKeys","queryClient","QueryClient","App","isLight","themeProps","QueryClientProvider","client","RequestArea","exact","isLocalhost","Boolean","location","hostname","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","getElementById","origin","fetch","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.602f05fe.chunk.js","sourcesContent":["import { createContext } from 'react';\r\n\r\nconst UserContext = createContext({\r\n\tuser: {},\r\n\thasDatabaseAccess: false,\r\n\tisAuthenticated: false,\r\n\tmessage: 'Error auth',\r\n\tlogin: () => {\r\n\t\treturn null;\r\n\t},\r\n\tlogout: () => {\r\n\t\treturn null;\r\n\t},\r\n});\r\n\r\nexport default UserContext;\r\n","// import { BlobServiceClient } from '@azure/storage-blob';\r\n\r\nconst application = 'DrillingWorkflow';\r\nconst version = 'V1';\r\n\r\nexport const INITIAL_STATE = Object.freeze({\r\n\tstatus: false,\r\n\tuser: null,\r\n\thasDatabaseAccess: false,\r\n\tisAuthenticated: false,\r\n\tmessage: null,\r\n\trole: null,\r\n\troles: [],\r\n});\r\n\r\nexport const role = Object.freeze({\r\n\tsupervisor: 'supervisor',\r\n\tlaboratoryanalysis: 'laboratoryanalysis',\r\n\tsupport: 'support',\r\n\tadmin: 'admin',\r\n});\r\n\r\nexport const permissionTranslate = Object.freeze({\r\n\tlaboratoryanalysis: 'Laboratorista',\r\n\tsupervisor: 'Supervisor',\r\n\tadmin: 'Administrador',\r\n\tsupport: 'Soporte',\r\n});\r\n\r\nexport const sessionName = `${application}-${version}`;\r\n\r\nexport const session = sessionStorage.getItem(sessionName);\r\n\r\nexport const setSessionItem = (value) => sessionStorage.setItem(sessionName, value);\r\n\r\n// const containerName = `public`;\r\n// const storageAccountName = 'outlierdrilling'; // Fill string with your Storage resource name\r\n\r\n// export function BlobStorageGetPublicSAS() {\r\n// \tconst { result, ...rest } = useFetch(`/BlobStorage/GetPublicSAS`);\r\n// \treturn { blobToken: result, ...rest };\r\n// }\r\n\r\n// const createBlobInContainer = async (containerClient, file) => {\r\n// \tconst blobClient = containerClient.getBlockBlobClient(file.name);\r\n// \t// if (blobClient.exists()) return null;\r\n// \tconst options = { blobHTTPHeaders: { blobContentType: file.type } };\r\n// \tawait blobClient.uploadBrowserData(file, options);\r\n// };\r\n\r\n// export const UploadFileToBlob = async (file, sasToken) => {\r\n// \tif (!file) return [];\r\n\r\n// \tconst blobService = new BlobServiceClient(`https://${storageAccountName}.blob.core.windows.net/?${sasToken}`);\r\n// \tconst containerClient = blobService.getContainerClient(containerName);\r\n// \treturn await createBlobInContainer(containerClient, file);\r\n// };\r\n","import UserContext from 'context/UserContext';\r\nimport React, { useState } from 'react';\r\nimport { INITIAL_STATE, session } from '../utils';\r\n\r\nexport const AuthLayout = (props) => {\r\n\tconst [auth, setAuth] = useState((session ? JSON.parse(session) : null) || INITIAL_STATE);\r\n\t// const [loading, setLoading] = useState(true);\r\n\t// const history = useHistory();\r\n\t// const modalRef = useRef();\r\n\r\n\t// useEffect(() => {\r\n\t// \tlet ignore = false;\r\n\r\n\t// \tasync function fetchData() {\r\n\t// \t\tawait db\r\n\t// \t\t\t.get(`Authorization`)\r\n\t// \t\t\t.then((result) => {\r\n\t// \t\t\t\tif (result) {\r\n\t// \t\t\t\t\tif (auth && auth.user) result.user.role = auth.user.role;\r\n\t// \t\t\t\t\tsetAuth(result);\r\n\t// \t\t\t\t\tsessionStorage.setItem(sessionName, JSON.stringify(result));\r\n\t// \t\t\t\t}\r\n\t// \t\t\t})\r\n\t// \t\t\t.catch(console.warn)\r\n\t// \t\t\t.finally((_) => setLoading(false));\r\n\t// \t}\r\n\r\n\t// \tif (!ignore) fetchData();\r\n\t// \treturn () => {\r\n\t// \t\tignore = true;\r\n\t// \t};\r\n\t// }, []);\r\n\r\n\t// const onSubmit = () => {\r\n\t// \thistory.go();\r\n\t// \tmodalRef.current.close();\r\n\t// };\r\n\r\n\treturn (\r\n\t\t<UserContext.Provider value={{ auth, setAuth }}>\r\n\t\t\t{/* {process.env.REACT_APP_NON_AUTH === 'true' ? ( */}\r\n\t\t\t{props.children}\r\n\t\t\t{/* ) : loading ? (\r\n\t\t\t\t<div style={{ padding: 20 }}>validando usuario ...</div>\r\n\t\t\t) : auth && auth.user && auth.status ? (\r\n\t\t\t\tprops.children\r\n\t\t\t) : (\r\n\t\t\t\t<StyledModal\r\n\t\t\t\t\tactive\r\n\t\t\t\t\tref={modalRef}\r\n\t\t\t\t\tsize='small'\r\n\t\t\t\t\ttitle='Error de Acceso'\r\n\t\t\t\t\tokProps={{ text: 'Aceptar' }}\r\n\t\t\t\t\tcancelProps={{ visible: false }}\r\n\t\t\t\t\tonSubmit={(_) => onSubmit()}>\r\n\t\t\t\t\t{auth.message || 'Usuario no se ha logeado correctamente'}\r\n\t\t\t\t</StyledModal>\r\n\t\t\t)} */}\r\n\t\t</UserContext.Provider>\r\n\t);\r\n};\r\n\r\nexport default AuthLayout;\r\n","import { NoItemsTone } from '@outlier-spa/mine-icon';\r\nimport Button from '@outlier-spa/mine/dist/components/Button';\r\nimport React, { useContext } from 'react';\r\nimport styled, { ThemeContext } from 'styled-components';\r\nimport './styles-notfound.scss';\r\n\r\nconst NotFoundStyle = styled.div`\r\n\t.not-found {\r\n\t\t&-secondary-text {\r\n\t\t\tcolor: ${({ theme }) => theme.secondaryColor};\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nfunction NotFound({ icon: Component, primaryText, secondaryText, buttonProps, onClick, ...rest }) {\r\n\tconst theme = useContext(ThemeContext);\r\n\tconst iconDefault = <NoItemsTone type={theme.dark ? 'dark' : 'light'} style={{ width: 80, height: 80 }}></NoItemsTone>;\r\n\treturn (\r\n\t\t<NotFoundStyle className={`not-found-container`} {...rest}>\r\n\t\t\t{(Component && <Component style={{ width: 80, height: 80 }} />) || iconDefault}\r\n\t\t\t<p className='not-found-principal-text'>{primaryText || `No existe contenido para mostrar`}</p>\r\n\t\t\t<p className='not-found-secondary-text'>{secondaryText || `Para crear un formulario de entrega, presione el botón “Nuevo Formulario”`}</p>\r\n\t\t\t{onClick && (\r\n\t\t\t\t<Button className='not-found-button-container' type='green' onClick={onClick} {...buttonProps}>\r\n\t\t\t\t\t{buttonProps.text || `Nuevo Formulario`}\r\n\t\t\t\t</Button>\r\n\t\t\t)}\r\n\t\t</NotFoundStyle>\r\n\t);\r\n}\r\n\r\nexport default NotFound;\r\n","import React from 'react';\r\nimport Menu, { MenuItem } from '@outlier-spa/mine/dist/components/Menu';\r\nimport themes, { colors } from '@outlier-spa/mine/dist/config/themes';\r\nimport { rgba } from 'polished';\r\nimport styled, { createGlobalStyle } from 'styled-components';\r\nimport { NavigationMenuItem } from '@outlier-spa/mine/dist/components/NavigationMenu';\r\nimport Button, { BigIconButton } from '@outlier-spa/mine/dist/components/Button';\r\nimport Modal from '@outlier-spa/mine/dist/components/Modal';\r\n\r\nexport const customTheme = {\r\n\tdark: {\r\n\t\t...themes.dark,\r\n\t},\r\n\tlight: {\r\n\t\t...themes.light,\r\n\t},\r\n};\r\n\r\nexport const CustomRootStyles = createGlobalStyle`\r\n\t.data-grid-container .data-grid {\r\n\t\tth, td {\r\n\t\t\tborder-color: ${({ theme }) => theme.gridBorderColor};\r\n\t\t}\r\n\t\t.cell{\r\n\t\t\tbackground: ${({ theme }) => theme.cellBackground};\r\n\t\t\t& > input{\r\n\t\t\t\tcolor: ${({ theme }) => theme.fontColor};\r\n\t\t\t}\r\n\r\n\t\t\t&.read-only,&.header-cell{\r\n\t\t\t\tbackground: ${({ theme }) => theme.cellDisabledBackground};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttable.summary-small__table {\r\n\t\ttr {\r\n\t\t\tth,\r\n\t\t\ttd {\r\n\t\t\t\t&:not(:first-child):not(:only-child) {\r\n\t\t\t\t\tborder-left: 1px solid ${({ theme }) => theme.fieldBorder};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tth {\r\n\r\n\t\t\t\tborder-bottom: 1px solid ${({ theme }) => theme.fieldBorder};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n    .chart-item {\r\n        .chart-header {\r\n            border-bottom: 1px solid ${({ theme }) => theme.fieldBorder};\r\n        }\r\n    }\r\n    .table-tabs {\r\n        border-bottom: 1px solid ${({ theme }) => theme.fieldBorder};\r\n    }\r\n\r\n${'' /* Table antd and pagination table */}\r\n    .ant-pagination-next button,\r\n    .ant-pagination-prev button,\r\n    .ant-pagination-item{\r\n        color: ${({ theme }) => theme.secondaryColor};\r\n    }\r\n\r\n    .ant-table {\r\n        color: ${({ theme }) => theme.fontColor};\r\n        background: ${({ theme }) => (theme.dark ? colors.gray3 : colors.white)};\r\n    }\r\n\r\n    .ant-table-thead {\r\n        > tr {\r\n            > th {\r\n                color: ${({ theme }) => theme.fontColor};\r\n                border-bottom: 1px solid ${({ theme }) => theme.fieldBorder};\r\n                background-color: ${({ theme }) => (theme.dark ? colors.gray3 : colors.white)};\r\n            }\r\n        }\r\n    }\r\n\r\n    .ant-table-thead th.ant-table-column-has-sorters:hover {\r\n        background-color: ${({ theme }) => (theme.dark ? colors.gray2 : colors.softgray1)} ;\r\n    }\r\n\r\n    .ant-table-footer {\r\n        background: none;\r\n        .total {\r\n                color: ${({ theme }) => theme.fontColor};\r\n                border-right: 1px solid ${({ theme }) => theme.fieldBorder};\r\n            }\r\n    }\r\n    .ant-table-tbody {\r\n        > tr {\r\n            > td {\r\n                background-color: ${({ theme }) => (theme.dark ? colors.gray3 : colors.backgroundgray)};\r\n                border: 1px solid transparent;\r\n\r\n                &:not(:first-child):not(:only-child) {\r\n                    border-left: 1px solid ${({ theme }) => theme.fieldBorder};\r\n                }\r\n            }\r\n            &:nth-child(odd) > td {\r\n                background: ${({ theme }) => (theme.dark ? colors.bluishgray : colors.white)}\r\n            }\r\n        }\r\n    }\r\n\r\n    .ant-empty-normal{\r\n        color: ${({ theme }) => theme.fontColor};\r\n    }\r\n\r\n    .ant-checkbox-indeterminate .ant-checkbox-inner::after {\r\n        background-color: ${(_) => colors.skyblue};\r\n    }\r\n    \r\n    .ant-checkbox-checked .ant-checkbox-inner::after{\r\n        border-color: ${({ theme }) => (theme.dark ? colors.white : colors.skyblue)};\r\n    }\r\n\r\n    .rounded-check__field > i{\r\n        ${'' /* box-shadow: 0 0 0px 1px ${({ theme }) => rgba(theme.fieldBorder, 0.5)}; */}\r\n        background: ${({ theme }) => (theme.dark ? 'none' : colors.white)};\r\n    }\r\n\r\n    \r\n\r\n    .export__section {\r\n        border-top: 1px solid ${({ theme }) => theme.fieldBorder};\r\n    }\r\n\r\n\tbutton.button {\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\tbutton.button-red-bg {\r\n\t\tbackground: ${colors.red};\r\n\t}\r\n\r\n\tbutton.button-green-bg {\r\n\t\tbackground: ${colors.green};\r\n\t}\r\n\r\n\t.description-text{\r\n\t\tcolor: ${({ theme }) => theme.secondaryColor};\r\n\t\t&.warning {\r\n\t\t\tcolor: #ffb116;\r\n\t\t}\r\n\t\t&.info {\r\n\t\t\t.icon {\r\n\t\t\t\tfont-size: 12px;\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t> svg {\r\n\t\t\tmargin-right: 6px;\r\n\t\t}\r\n\t\r\n\t\t> svg,\r\n\t\t> span {\r\n\t\t\tdisplay: inline-block;\r\n\t\t\tvertical-align: middle;\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const Header = styled.div`\r\n\tbackground: ${({ theme }) => theme.headerPage};\r\n`;\r\n\r\nexport const Title = styled.p`\r\n\tfont-family: Open Sans;\r\n\tfont-style: normal;\r\n\tfont-weight: 600;\r\n\tfont-size: 14px;\r\n\tline-height: 19px;\r\n\tmargin-bottom: 20px;\r\n\r\n\t> span {\r\n\t\tfont-weight: 600;\r\n\t\tcolor: ${colors.skyblue};\r\n\t}\r\n`;\r\n\r\nexport const StyledModal = styled(Modal)`\r\n\t.modal__content {\r\n\t\tpadding-left: 14px;\r\n\t\tpadding-right: 14px;\r\n\t\tmax-height: 550px;\r\n\t\toverflow-y: auto;\r\n\t}\r\n\r\n\t.modal-large {\r\n\t\tmax-width: 1200px;\r\n\t}\r\n`;\r\n\r\nexport const BigIconButtonExport = styled(BigIconButton)`\r\n\t.button-bigicon .button {\r\n\t\tpadding: 0 !important;\r\n\t\ta,\r\n\t\tspan {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\t\t}\r\n\r\n\t\ta {\r\n\t\t\tline-height: 32px;\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ButtonExport = styled(Button)`\r\n\t&.button {\r\n\t\tpadding: 0 !important;\r\n\t\ta {\r\n\t\t\tpadding: 0 20px;\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const Dot = styled.i`\r\n\theight: 5px;\r\n\twidth: 5px;\r\n\tborder-radius: 50%;\r\n\tbackground-color: ${({ theme }) => theme.fieldBorder};\r\n\tdisplay: inline-block;\r\n\tvertical-align: middle;\r\n\tmargin: 0 10px;\r\n`;\r\n\r\n// Summary details\r\nexport const Details = styled.div`\r\n\tbackground-color: ${({ theme }) => (theme.dark ? colors.bluishgray : colors.white)};\r\n\tcolor: ${({ theme }) => theme.secondaryColor};\r\n\r\n\t> p {\r\n\t\t&:last-child {\r\n\t\t\ttext-align: right;\r\n\t\t\tcolor: ${({ theme }) => theme.fontColor};\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const CleanDetails = styled(Details)`\r\n\tbackground-color: ${({ theme }) => (theme.dark ? colors.gray1 : colors.backgroundgray)};\r\n`;\r\n\r\n// Menu Item  and Menu Custom\r\n\r\nexport const MenuCustom = styled(Menu)`\r\n\t&:not(.border-less) {\r\n\t\tborder-color: ${({ theme }) => theme.sideNavSecondary};\r\n\t}\r\n\t.ant-menu {\r\n\t\tbackground-color: ${({ theme }) => theme.sideNavSecondary};\r\n\t\tcolor: ${colors.white};\r\n\t}\r\n\r\n\t.ant-menu-submenu-title {\r\n\t\tborder-color: none;\r\n\t}\r\n`;\r\n\r\nexport const MenuItemCustom = styled(MenuItem)`\r\n\tbackground-color: none;\r\n\tcolor: ${(_) => colors.white};\r\n\tborder-bottom-color: ${colors.gray3} !important;\r\n\tmargin: 0px !important;\r\n\t&.ant-menu-item-selected {\r\n\t\tbackground-color: ${colors.gray3} !important;\r\n\t}\r\n`;\r\n\r\nexport const MenuItemSingle = styled(MenuItemCustom)`\r\n\tpadding-left: 10px !important;\r\n`;\r\n\r\nexport const RoleMenuItem = (props) => {\r\n\treturn (\r\n\t\t<div className='role-navigation-menu-item'>\r\n\t\t\t<NavigationMenuItem {...props} />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport const HeaderPage = styled.div`\r\n\tbackground-color: ${({ theme }) => theme.header};\r\n`;\r\n\r\n// General Container\r\nexport const Wrapper = styled.div`\r\n\tbackground: ${({ theme }) => theme.backgroundMain};\r\n\tcolor: ${({ theme }) => theme.main};\r\n`;\r\n\r\n// Global Styled\r\nexport const GlobalStyle = createGlobalStyle`\r\n\t.inner-content{\r\n\t\tbackground: ${({ theme }) => theme.backgroundMain}\r\n\t}\r\n\t.data-grid-container .data-grid {\r\n\t\tth, td {\r\n\t\t\tborder-color: ${({ theme }) => theme.gridBorderColor};\r\n\t\t}\r\n\t\t.cell{\r\n\t\t\tbackground: ${({ theme }) => theme.cellBackground};\r\n\t\t\t& > input{\r\n\t\t\t\tcolor: ${({ theme }) => theme.fontColor};\r\n\t\t\t}\r\n\r\n\t\t\t&.read-only,&.header-cell{\r\n\t\t\t\tbackground: ${({ theme }) => theme.cellDisabledBackground};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttable.summary-small__table {\r\n\t\ttr {\r\n\t\t\tth,\r\n\t\t\ttd {\r\n\t\t\t\t&:not(:first-child):not(:only-child) {\r\n\t\t\t\t\tborder-left: 1px solid ${({ theme }) => theme.fieldBorder};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tth {\r\n\r\n\t\t\t\tborder-bottom: 1px solid ${({ theme }) => theme.fieldBorder};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n    .chart-item {\r\n        .chart-header {\r\n            border-bottom: 1px solid ${({ theme }) => theme.fieldBorder};\r\n        }\r\n    }\r\n    .table-tabs {\r\n        border-bottom: 1px solid ${({ theme }) => theme.fieldBorder};\r\n    }\r\n\r\n${'' /* Table antd and pagination table */}\r\n    .ant-pagination-next button,\r\n    .ant-pagination-prev button,\r\n    .ant-pagination-item{\r\n        color: ${({ theme }) => theme.secondaryColor};\r\n    }\r\n\r\n    .ant-table {\r\n        color: ${({ theme }) => theme.fontColor};\r\n        background: ${({ theme }) => (theme.dark ? colors.gray3 : colors.white)};\r\n    }\r\n\r\n    .ant-table-thead {\r\n        > tr {\r\n            > th {\r\n                color: ${({ theme }) => theme.fontColor};\r\n                border-bottom: 1px solid ${({ theme }) => theme.fieldBorder};\r\n                background-color: ${({ theme }) => (theme.dark ? colors.gray3 : colors.white)};\r\n            }\r\n        }\r\n    }\r\n\r\n    .ant-table-thead th.ant-table-column-has-sorters:hover {\r\n        background-color: ${({ theme }) => (theme.dark ? colors.gray2 : colors.softgray1)} ;\r\n    }\r\n\r\n    .ant-table-footer {\r\n        background: none;\r\n        .total {\r\n                color: ${({ theme }) => theme.fontColor};\r\n                border-right: 1px solid ${({ theme }) => theme.fieldBorder};\r\n            }\r\n    }\r\n    .ant-table-tbody {\r\n        > tr {\r\n            > td {\r\n                background-color: ${({ theme }) => (theme.dark ? colors.gray3 : colors.backgroundgray)};\r\n                border: 1px solid transparent;\r\n\r\n                &:not(:first-child):not(:only-child) {\r\n                    border-left: 1px solid ${({ theme }) => theme.fieldBorder};\r\n                }\r\n            }\r\n            &:nth-child(odd) > td {\r\n                background: ${({ theme }) => (theme.dark ? colors.bluishgray : colors.white)}\r\n            }\r\n        }\r\n    }\r\n\r\n    .ant-empty-normal{\r\n        color: ${({ theme }) => theme.fontColor};\r\n    }\r\n\r\n    .ant-checkbox-indeterminate .ant-checkbox-inner::after {\r\n        background-color: ${(_) => colors.skyblue};\r\n    }\r\n    \r\n    .ant-checkbox-checked .ant-checkbox-inner::after{\r\n        border-color: ${({ theme }) => (theme.dark ? colors.white : colors.skyblue)};\r\n    }\r\n\r\n    .rounded-check__field > i{\r\n        ${'' /* box-shadow: 0 0 0px 1px ${({ theme }) => rgba(theme.fieldBorder, 0.5)}; */}\r\n        background: ${({ theme }) => (theme.dark ? 'none' : colors.white)};\r\n    }\r\n\r\n    \r\n\r\n    .export__section {\r\n        border-top: 1px solid ${({ theme }) => theme.fieldBorder};\r\n    }\r\n\r\n\r\n\tbutton.button {\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\r\n\tbutton.button-red-bg {\r\n\t\tbackground: ${colors.red};\r\n\t}\r\n\r\n\tbutton.button-green-bg {\r\n\t\tbackground: ${colors.green};\r\n\t}\r\n\r\n\t.description-text{\r\n\t\tcolor: ${({ theme }) => theme.secondaryColor};\r\n\t\t&.warning {\r\n\t\t\tcolor: #ffb116;\r\n\t\t}\r\n\t\t&.info {\r\n\t\t\t.icon {\r\n\t\t\t\tfont-size: 12px;\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t> svg {\r\n\t\t\tmargin-right: 6px;\r\n\t\t}\r\n\t\r\n\t\t> svg,\r\n\t\t> span {\r\n\t\t\tdisplay: inline-block;\r\n\t\t\tvertical-align: middle;\r\n\t\t}\r\n\t}\r\n\r\n\t.role-navigation-menu-item .navigation-menu-item {\r\n\t\t.navigation-menu-item-roles{\r\n\t\t\tborder:1px solid  ${({ theme }) => theme.fieldBorder};\r\n\t\t\t&.active {\r\n\t\t\t\tborder-color: ${colors.skyblue};\r\n\t\t\t\tbackground: ${({ theme }) => (theme.dark ? colors.gray1 : colors.backgroundgray)};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.role-menu-item {\r\n\t\tcolor: ${({ theme }) => theme.secondaryColor};\r\n\t\t.line:after {\r\n\t\t\tbackground: ${({ theme }) => (theme.dark ? colors.gray1 : colors.softgray2)};\r\n\t\t}\r\n\t}\r\n\r\n\t.description-text{\r\n\t\tcolor: ${({ theme }) => theme.secondaryColor};\r\n\t\t&.warning {\r\n\t\t\tcolor: #ffb116;\r\n\t\t}\r\n\t\t&.info {\r\n\t\t\t.icon {\r\n\t\t\t\tfont-size: 14px;\r\n\t\t\t\tmargin-right:8px;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t> svg {\r\n\t\t\tmargin-right: 6px;\r\n\t\t}\r\n\r\n\t\t> svg,\r\n\t\t> span {\r\n\t\t\tdisplay: inline-block;\r\n\t\t\tvertical-align: middle;\r\n\t\t}\r\n\t}\r\n\r\n\t&.radius-3 {\r\n\t\t&.border {\r\n\t\t\tborder: 1px solid ${({ theme }) => (theme.dark ? 'none' : theme.fieldBorder)};\r\n\t\t}\r\n\t}\r\n\t.summary-wrapper {\r\n\t\ttable {\r\n\t\t\tborder-radius:3px;\r\n\t\t\tborder: 1px solid ${({ theme }) => theme.fieldBorder};\r\n\t\t\tbox-shadow: 0px 2px 4px rgba(0, 0, 0, 0.1);\r\n\t\t\ttd\r\n\t\t\t{\r\n\t\t\t\tborder: 1px double ${({ theme }) => rgba(theme.fieldBorder, 0.1)};\r\n\t\t\t\tbackground-color: ${({ theme }) => (theme.dark ? colors.bluishgray : colors.white)};\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tth{\r\n\t\t\t\tborder: none;\r\n\t\t\t\tbackground-color: ${({ theme }) => (theme.dark ? colors.bluishgray : colors.white)};\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\n// Separator\r\nexport const Separator = styled.div`\r\n\tcontent: '';\r\n\twidth: 100%;\r\n\theight: 1px;\r\n\tbackground: ${({ theme }) => theme.fieldBorder};\r\n`;\r\n\r\nexport const DescriptionText = ({ as: Component = 'p', children, className, ...rest }) => {\r\n\treturn (\r\n\t\t<Component className={`description-text ${className}`} {...rest}>\r\n\t\t\t{children}\r\n\t\t</Component>\r\n\t);\r\n};\r\n\r\nconst BadgeStyled = styled.div`\r\n\tbackground: ${(props) => colors[props.color] || props.color || colors.blue};\r\n\twidth: 22px;\r\n\theight: 22px;\r\n\tcolor: ${colors.white};\r\n\tborder-radius: 50%;\r\n\tfont-size: 14px;\r\n\tfont-family: Open Sans;\r\n\tfont-style: normal;\r\n\ttext-align: center;\r\n\tposition: relative;\r\n\tspan {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tmargin: auto;\r\n\t\tfont-weight: bold;\r\n\t\tfont-size: 14px;\r\n\t\tline-height: 19px;\r\n\t}\r\n`;\r\n\r\nexport const Badge = ({ children, ...rest }) => {\r\n\treturn (\r\n\t\t<BadgeStyled {...rest}>\r\n\t\t\t<span>{children}</span>\r\n\t\t</BadgeStyled>\r\n\t);\r\n};\r\n\r\nexport const BadgeMenuItem = ({ children, ...rest }) => (\r\n\t<Badge style={{ position: 'absolute', right: 15, top: '50%', transform: 'translateY(-50%)' }} {...rest}>\r\n\t\t{children}\r\n\t</Badge>\r\n);\r\n\r\n//BASE STYLED\r\nexport const FooterStyle = styled.div`\r\n\tbackground-color: ${({ theme }) => theme.footer};\r\n`;\r\n\r\nexport const SideNavStyle = styled.div`\r\n\tbackground: ${({ theme }) => theme.sideNavMain};\r\n\t&.sidenav {\r\n\t\tbackground-color: ${({ theme }) => theme.sideNavMain};\r\n\t}\r\n\r\n\t.content {\r\n\t\tbackground-color: ${({ theme }) => theme.sideNavSecondary};\r\n\t}\r\n`;\r\n","import { UserAdminAltTone } from '@outlier-spa/mine-icon';\r\nimport NavigationMenu, { NavigationMenuItem } from '@outlier-spa/mine/dist/components/NavigationMenu';\r\nimport { SwitchTheme } from '@outlier-spa/mine/dist/components/Switch';\r\nimport UserContext from 'context/UserContext';\r\nimport { permissionTranslate, sessionName } from '../utils';\r\nimport _ from 'lodash';\r\nimport React, { useContext } from 'react';\r\nimport { RoleMenuItem } from 'styled';\r\nimport './styles.scss';\r\n\r\nexport const ProfileNav = (props) => {\r\n\tconst { auth, setAuth } = useContext(UserContext);\r\n\tconst { user } = auth;\r\n\tvar { username, role, roles } = user || {};\r\n\tconst themeIcon = <SwitchTheme checked={props.light} onChange={({ target }) => props.onChangeTheme(target.checked)} />;\r\n\tconst content = props.light ? 'Tema claro' : 'Tema oscuro';\r\n\r\n\tconst onChangeRole = (role) => {\r\n\t\tconst authAux = _.cloneDeep(auth);\r\n\t\tauthAux.user.role = role;\r\n\t\tsetAuth({ ...authAux });\r\n\t\tsessionStorage.setItem(sessionName, JSON.stringify(authAux));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={`profile-nav`}>\r\n\t\t\t<NavigationMenu\r\n\t\t\t\ttitle={username}\r\n\t\t\t\tsubtitle={role && permissionTranslate[role.toLowerCase()] ? permissionTranslate[role.toLowerCase()] : role}\r\n\t\t\t\ttrigger='click'\r\n\t\t\t\timage={<UserAdminAltTone type={true ? 'dark' : 'light'} style={{ width: '100%', height: '100%' }} />}>\r\n\t\t\t\t<RoleHeader message='Roles' />\r\n\t\t\t\t{roles?.map((r, k) => (\r\n\t\t\t\t\t<RoleMenuItem\r\n\t\t\t\t\t\tkey={k}\r\n\t\t\t\t\t\tclassName={`navigation-menu-item-roles ${role.toLowerCase() === r ? 'active' : ''} `}\r\n\t\t\t\t\t\tcontent={`${permissionTranslate[r]}`}\r\n\t\t\t\t\t\tonClick={(_) => onChangeRole(r)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))}\r\n\r\n\t\t\t\t<NavigationMenuItem prefix={themeIcon} content={content} onClick={(_) => props.onChangeTheme(!props.light)} />\r\n\t\t\t</NavigationMenu>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ProfileNav;\r\n\r\nconst RoleHeader = ({ message }) => {\r\n\treturn (\r\n\t\t<li className='role-menu-item'>\r\n\t\t\t<div>{message}</div>\r\n\t\t\t<div className='line'></div>\r\n\t\t</li>\r\n\t);\r\n};\r\n","import Dexie from 'dexie';\r\n\r\nconst db = new Dexie('spence.drillingWorkflow');\r\n// db.version(1).stores({\r\n// \tholes: '++id',\r\n// \thepQueue: '++id',\r\n// \tplatformDeliveryQueue: '++id',\r\n// \tholeRequest: 'holeid',\r\n// \tbaseReducer: 'baseRID',\r\n// \tnewRequestReturnReducer: 'newRequestReturnRID',\r\n// \tnewRequestExtensionReducer: 'newRequestExtensionRID',\r\n// \trgoReducer: '++id',\r\n// \trequestReducer: 'requestRID',\r\n// \trequestFormReducer: '++id',\r\n// \trequestExtensionFormReducer: 'requestExtensionFormRID',\r\n// \trequestReturnFormReducer: 'requestReturnFormRID',\r\n// \thepReducer: '++id',\r\n// \tplatformCache: '++id',\r\n// \tplatformSelectedCache: '++id',\r\n// \tareaRequests: '++id',\r\n// \tareaRequest: '++id',\r\n// });\r\n\r\ndb.version(3).stores({\r\n\tholes: '++id',\r\n\thepQueue: '++id',\r\n\tplatformDeliveryQueue: '++id',\r\n\tholeRequest: 'holeid',\r\n\tbaseReducer: 'baseRID',\r\n\tnewRequestReturnReducer: 'newRequestReturnRID',\r\n\tnewRequestExtensionReducer: 'newRequestExtensionRID',\r\n\trgoReducer: '++id',\r\n\trequestReducer: 'requestRID',\r\n\trequestFormReducer: '++id',\r\n\trequestExtensionFormReducer: 'requestExtensionFormRID',\r\n\trequestReturnFormReducer: 'requestReturnFormRID',\r\n\thepReducer: '++id',\r\n\r\n\thepCache: '++id',\r\n\tplatformCache: '++id',\r\n\tplatformSelectedCache: '++id',\r\n\tareaRequests: '++id',\r\n\tareaRequest: '++id',\r\n});\r\n\r\nexport const deleteDB = () => db.delete('spence.drillingWorkflow');\r\n\r\nexport default db;\r\n","import { useDispatch } from 'react-redux';\r\nimport indexDB from 'utils/db';\r\n\r\nconst tableName = 'areaRequests';\r\n\r\n//Index area requests\r\nexport function GetAreaRequests() {\r\n\treturn indexDB\r\n\t\t.table(tableName)\r\n\t\t.toArray()\r\n\t\t.then((resp) => {\r\n\t\t\treturn { type: '@base/replaceAreaRequests', payload: resp };\r\n\t\t});\r\n}\r\n\r\nexport function CleanAreaRequests() {\r\n\treturn indexDB\r\n\t\t.table(tableName)\r\n\t\t.clear()\r\n\t\t.then((resp) => {\r\n\t\t\treturn { type: '@base/cleanAreaRequests' };\r\n\t\t});\r\n}\r\nexport function AddAreaRequests(done) {\r\n\treturn indexDB\r\n\t\t.table(tableName)\r\n\t\t.add(done)\r\n\t\t.then((_) => {\r\n\t\t\treturn {\r\n\t\t\t\ttype: '@base/addAreaRequests',\r\n\t\t\t\tpayload: done,\r\n\t\t\t};\r\n\t\t});\r\n}\r\n\r\n// Solicitud de area seleccionada\r\nexport function AddRequest(done) {\r\n\treturn indexDB\r\n\t\t.table('areaRequest')\r\n\t\t.clear()\r\n\t\t.then((_) => {\r\n\t\t\treturn indexDB\r\n\t\t\t\t.table('areaRequest')\r\n\t\t\t\t.add(done)\r\n\t\t\t\t.then((_) => {\r\n\t\t\t\t\treturn { type: '@base/addRequest', payload: done };\r\n\t\t\t\t});\r\n\t\t});\r\n}\r\n// Cache Platform\r\nexport function CachePlatforms(data) {\r\n\treturn indexDB\r\n\t\t.table('platformCache')\r\n\t\t.toArray()\r\n\t\t.then((platforms) => {\r\n\t\t\tconst filter = platforms.filter((platform) => platform.recuperation === data.recuperation && platform.areaRequestId === data.areaRequestId);\r\n\t\t\tif (filter.length === 0) {\r\n\t\t\t\treturn indexDB.table('platformCache').add(data);\r\n\t\t\t} else {\r\n\t\t\t\tvar platform = filter[0];\r\n\t\t\t\tindexDB.table('platformCache').update(platform.id, data);\r\n\t\t\t}\r\n\t\t});\r\n}\r\n\r\nexport function GetCachePlatform(areaRequestId) {\r\n\treturn indexDB\r\n\t\t.table('platformCache')\r\n\t\t.toArray()\r\n\t\t.then((platforms) => {\r\n\t\t\tconst filter = platforms.filter((platform) => platform.areaRequestId === Number(areaRequestId));\r\n\t\t\treturn { type: '@base/replacePlatform', payload: filter };\r\n\t\t});\r\n}\r\n\r\n// HEP\r\nexport function CacheHEP(data, areaRequestId) {\r\n\treturn indexDB\r\n\t\t.table('hepCache')\r\n\t\t.toArray()\r\n\t\t.then((heps) => {\r\n\t\t\tconst filter = heps.filter((hep) => hep.Nombre_Propuesto === data.Nombre_Propuesto && hep.arearequestid === areaRequestId);\r\n\t\t\t// Si no esta en cache\r\n\t\t\tif (filter.length === 0) {\r\n\t\t\t\t// * Agregar a la base de datos\r\n\t\t\t\treturn indexDB.table('hepCache').add(data);\r\n\t\t\t}\r\n\t\t\t// * Si esta en cache\r\n\t\t\telse {\r\n\t\t\t\t// Actualizar los datos que están en caché\r\n\t\t\t\tvar hep = filter[0];\r\n\t\t\t\tindexDB.table('hepCache').update(hep.id, data);\r\n\t\t\t}\r\n\t\t});\r\n}\r\n\r\nexport function GetCacheHep(areaRequestId) {\r\n\treturn indexDB\r\n\t\t.table('hepCache')\r\n\t\t.toArray()\r\n\t\t.then((heps) => {\r\n\t\t\tconst filter = heps.filter((hep) => hep.arearequestid === areaRequestId);\r\n\t\t\treturn { type: '@base/replaceHep', payload: filter };\r\n\t\t});\r\n}\r\n\r\nexport function getCacheHoleDetails(holeId) {\r\n\treturn indexDB\r\n\t\t.table('hepCache')\r\n\t\t.toArray()\r\n\t\t.then((resp) => {\r\n\t\t\tvar find = resp.find((hole) => hole.holeId === holeId);\r\n\t\t\treturn find ?? {};\r\n\t\t});\r\n}\r\n","import React from 'react';\r\nimport './styles.scss';\r\nimport cl from 'classnames';\r\nimport styled from 'styled-components';\r\n\r\nconst HeaderFixedStyles = styled.div`\r\n\tbackground-color: ${({ theme }) => theme.backgroundMain};\r\n\t.fixed-header-bottom-separator {\r\n\t\tbackground-color: ${({ theme }) => theme.fieldBorder};\r\n\t}\r\n\t.fixed-header-top-separator {\r\n\t\tbackground-color: ${({ theme }) => theme.fieldBorder};\r\n\t}\r\n`;\r\n\r\nfunction FixedHeader({ className, left, center, right, bottom, separatorPosition = 'bottom', showSeparator, ...rest }) {\r\n\tconst fixedClassnames = cl('fixed-header', className);\r\n\tconst separatorClassName = cl(`fixed-header-${separatorPosition}-separator`);\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<HeaderFixedStyles className={fixedClassnames} {...rest}>\r\n\t\t\t\t{showSeparator && <div className={separatorClassName}></div>}\r\n\r\n\t\t\t\t<div className='header-fixed-left'>{left}</div>\r\n\t\t\t\t<div className='header-fixed-center'>{center}</div>\r\n\t\t\t\t<div className='header-fixed-right'>{right}</div>\r\n\t\t\t</HeaderFixedStyles>\r\n\t\t\t{rest.children}\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default FixedHeader;\r\n\r\nexport function DetailsHeader({ icon, text }) {\r\n\treturn (\r\n\t\t<div className='header-details-small'>\r\n\t\t\t{icon}\r\n\t\t\t<span>{text}</span>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport function HeaderPage({ children, ...rest }) {\r\n\treturn (\r\n\t\t<div style={{ padding: '8px 0' }} {...rest}>\r\n\t\t\t<span style={{ fontStyle: 'normal', fontWeight: 600, fontSize: 20, lineHeight: '34px' }}>{children}</span>\r\n\t\t</div>\r\n\t);\r\n}\r\n","// import { fetch as fetchPolyfill } from 'whatwg-fetch';\r\nimport axios from 'axios';\r\n\r\nexport const baseApiUrl = process.env.REACT_APP_API_URL; // process.env.NODE_ENV === 'development' ? '/api/' : 'http://smig.spence.outlier.cl/TorreMuestreo/api/';\r\n\r\nexport const db = axios.create({ baseURL: baseApiUrl });\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_API_URL; // process.env.NODE_ENV === 'development' ? '/api/' : 'http://smig.spence.outlier.cl/TorreMuestreo/api/';\r\naxios.defaults.withCredentials = true;\r\naxios.defaults.credentials = \"include\";\r\n","import { useCallback, useEffect } from 'react';\r\n\r\nexport const useDebouncedEffect = (effect, delay, deps) => {\r\n\tconst callback = useCallback(effect, deps);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst handler = setTimeout(() => {\r\n\t\t\tcallback();\r\n\t\t}, delay);\r\n\r\n\t\treturn () => {\r\n\t\t\tclearTimeout(handler);\r\n\t\t};\r\n\t}, [callback, delay]);\r\n};\r\n\r\nexport default useDebouncedEffect;\r\n","export const common = {\r\n\tfontSmall: '0.86 rem',\r\n\tfontMedium: '1em',\r\n\tfontLarge: '1.15 rem',\r\n\t// Info\r\n\twarning: '#FFB116',\r\n\tdanger: '#FF6060',\r\n\tassertive: '#46BD8D',\r\n\t//Border\r\n\tactiveBorder: '#05ABE8',\r\n\t//SideNav\r\n\tsideNavMain: '#24262D',\r\n\tsideNavSecondary: '#272A30',\r\n};\r\n\r\nexport const dark = {\r\n\t...common,\r\n\t// Background\r\n\tbackgroundMain: '#2D2F35',\r\n\tbackgroundSecondary: '#272A30',\r\n\t// Border\r\n\tborderMain: '#424851',\r\n\tborderSecondary: '#4E545F',\r\n\t//General\r\n\tmain: '#FFFFFF',\r\n\tsecondary: '#BECFE7',\r\n\tterciary: 'rgba(255, 255, 255, 0.6)',\r\n\tplaceholder: '#rgba(190, 207, 231, 0.5)',\r\n\temphasisMain: '#05ABE8',\r\n\temphasisSecondary: '#4980AC',\r\n\tbadgeInactive: '#424851',\r\n\theader: '#24262D',\r\n\tfooter: '#272A30',\r\n\t//Field\r\n\tfieldMain: '#343941',\r\n\tfieldMainAlt: '#343941',\r\n\tfieldSecondary: '#2D2F35',\r\n\tfieldTerciary: '#424851',\r\n\tfieldTerciarytAlt: '#424851',\r\n\tfieldDisabled: 'rgba(52, 57, 65, 0.5)',\r\n\tfieldNotEditable: 'none',\r\n\t//Button\r\n\t//Tags\r\n\t//Sections\r\n\t//Cards\r\n\t//Table\r\n\ttableCellMain: '#343941',\r\n\t//DropDown\r\n\t//Paginator\r\n\t//Menu\r\n\t//Dock\r\n\tdockMain: '#272A30',\r\n\t//switch\r\n\tswitchMain: '#424851',\r\n\tswitchMainAlt: '#424851',\r\n};\r\n\r\nexport const light = {\r\n\t...common,\r\n\t//Background\r\n\tbackgroundMain: '#F6F8FA',\r\n\tbackgroundSecondary: '#FFFFFF',\r\n\t// Border\r\n\tborderMain: '#D5DCE3',\r\n\tborderSecondary: '#D5DCE3',\r\n\t//General\r\n\tmain: '#343941',\r\n\tsecondary: '#85919C',\r\n\tterciary: 'rgba(133, 145, 156, 0.6)',\r\n\tplaceholder: 'rgba(133, 145, 156, 0.8)',\r\n\temphasisMain: '#0596E8',\r\n\temphasisSecondary: '#4980AC',\r\n\tbadgeInactive: '#D5DCE3',\r\n\theader: '#FFFFFF',\r\n\tfooter: '#343941',\r\n\t//Field\r\n\tfieldMain: '#F6F8FA',\r\n\tfieldMainAlt: '#FFFFFF',\r\n\tfieldSecondary: '#F6F8FA',\r\n\tfieldTerciary: '#FFFFFF',\r\n\tfieldTerciarytAlt: '#F6F8FA',\r\n\tfieldDisabled: 'rgba(246, 248, 250, 0.5)',\r\n\tfieldNotEditable: 'none',\r\n\t//Button\r\n\t//Tags\r\n\t//Sections\r\n\t//Cards\r\n\t//Table\r\n\ttableCellMain: '#FFFFFF',\r\n\t//DropDown\r\n\t//Paginator\r\n\t//Menu\r\n\tdockMain: '#FFFFFF',\r\n\t//switch\r\n\tswitchMain: '#FFFFFF',\r\n\tswitchMainAlt: '#F6F8FA',\r\n};\r\n\r\nexport const theme = { ...common, light, dark };\r\n\r\nexport const templateCommon = {\r\n\tfontSmall: '0.86 rem',\r\n\tfontMedium: '1em',\r\n\tfontLarge: '1.15 rem',\r\n\t// Info\r\n\twarning: '#',\r\n\tdanger: '#',\r\n\tassertive: '#',\r\n\t//Border\r\n\tactiveBorder: '#',\r\n\t//SideNav\r\n\tsideNavMain: '#',\r\n\tsideNavSecondary: '#',\r\n};\r\n\r\nexport const template = {\r\n\t...templateCommon,\r\n\t//Background\r\n\tbackgroundMain: '#',\r\n\tbackgroundSecondary: '#',\r\n\t// Border\r\n\tborderMain: '#',\r\n\tborderSecondary: '#',\r\n\t//General\r\n\tmain: '#',\r\n\tsecondary: '#',\r\n\tterciary: '#',\r\n\tplaceholder: '#',\r\n\temphasisMain: '#',\r\n\temphasisSecondary: '#',\r\n\tbadgeInactive: '#',\r\n\theader: '#',\r\n\tfooter: '#',\r\n\t//Field\r\n\tfieldMain: '#',\r\n\tfieldMainAlt: '#',\r\n\tfieldSecondary: '#',\r\n\tfieldTerciary: '#',\r\n\tfieldTerciarytAlt: '#',\r\n\tfieldDisabled: '#',\r\n\tfieldNotEditable: '',\r\n\t//Button\r\n\tbuttonLabel: '#',\r\n\tbuttonMain: '#',\r\n\tbuttonSecondary: '#',\r\n\tbuttonTerciary: '#',\r\n\t//Checkbox\r\n\tcheckMain: '#',\r\n\tcheckMainAlt: '#',\r\n\t//Tags\r\n\ttagMain: '#',\r\n\ttagSecondary: '#',\r\n\t//Sections\r\n\tsectionMain: '#',\r\n\tsectionSecondary: '#',\r\n\tsectionTerciary: '#',\r\n\tsectionChartMain: '#',\r\n\t//Cards\r\n\tcardMain: '#',\r\n\tcardSecondary: '#',\r\n\tcardTerciary: '#',\r\n\t//Table\r\n\ttableCellMain: '#',\r\n\ttableCellSecondary: '#',\r\n\t//DropDown\r\n\tdropDownMain: '#',\r\n\t//Paginator\r\n\tpageIndicator: '#',\r\n\t//Menu\r\n\tmenuMain: '#',\r\n\tmenuSecondary: '#',\r\n\tmenuTerciary: '#',\r\n\tmenuQuaternary: '#',\r\n\t//Dock\r\n\tdockMain: '#',\r\n\t//switch\r\n\tswitchMain: '#',\r\n\tswitchMainAlt: '#',\r\n};\r\n","import { colors } from '@outlier-spa/mine/dist/config/themes';\r\nimport styled from 'styled-components';\r\nimport { theme } from 'theme';\r\n\r\nexport const TableStyles = styled.div`\r\n\theight: 100%;\r\n\toverflow: hidden;\r\n\t.ant-table {\r\n\t\tbackground: ${({ theme }) => theme.sectionBackground};\r\n\t\tcolor: ${({ theme }) => theme.fontColor};\r\n\t}\r\n\t.ant-table-thead > tr > th {\r\n\t\tbackground: ${({ theme }) => theme.sectionBackground};\r\n\t\tcolor: ${({ theme }) => theme.fontColor};\r\n\t\tborder-color: ${({ theme }) => theme.fieldBorder};\r\n\t}\r\n\r\n\t.ant-table-tbody > tr > td {\r\n\t\tbackground: ${({ theme }) => theme.sectionBackground};\r\n\t\tcolor: ${({ theme }) => theme.fontColor};\r\n\r\n\t\t&.ant-table-column-sort {\r\n\t\t\tbackground: ${({ theme }) => theme.fieldDarkenBackground};\r\n\t\t}\r\n\t}\r\n\r\n\t.ant-table-thead th.ant-table-column-has-sorters:hover,\r\n\t.ant-table-thead th.ant-table-column-sort {\r\n\t\tbackground: ${({ theme }) => theme.fieldDarkenBackground};\r\n\t}\r\n\r\n\t.ant-table-tbody > tr.ant-table-row:hover > td {\r\n\t\tbackground: ${({ theme }) => theme.tableRowHover};\r\n\t}\r\n\r\n\t.ant-table-pagination.ant-pagination {\r\n\t\tborder-color: ${({ theme }) => theme.fieldBorder};\r\n\t}\r\n\r\n\t.ant-table-column-sorter {\r\n\t\tcolor: ${({ theme }) => theme.fontColor};\r\n\t}\r\n\r\n\t.ant-table-column-sorter-up.active,\r\n\t.ant-table-column-sorter-down.active {\r\n\t\tcolor: ${({ theme }) => theme.activeBorder};\r\n\t}\r\n\r\n\t.ant-pagination-item {\r\n\t\tborder-color: ${({ theme }) => theme.fieldBorder};\r\n\t\tcolor: ${({ theme }) => theme.fontColor};\r\n\t\tbackground-color: ${({ theme }) => theme.sectionBackground};\r\n\t}\r\n\r\n\t.ant-pagination-item:not(.ant-pagination-item-active) a {\r\n\t\tcolor: ${({ theme }) => theme.fontColor};\r\n\t}\r\n\r\n\t.ant-pagination-prev .ant-pagination-item-link,\r\n\t.ant-pagination-next .ant-pagination-item-link {\r\n\t\tborder-color: ${({ theme }) => theme.fieldBorder};\r\n\t\tbackground-color: ${({ theme }) => theme.sectionBackground};\r\n\t}\r\n\r\n\t.ant-pagination-prev,\r\n\t.ant-pagination-next,\r\n\t.ant-pagination-jump-prev,\r\n\t.ant-pagination-jump-next {\r\n\t\tcolor: ${({ theme }) => theme.fontColor};\r\n\t}\r\n\r\n\t.ant-pagination-prev button,\r\n\t.ant-pagination-next button {\r\n\t\tcolor: ${({ theme }) => theme.fontColor};\r\n\t}\r\n\r\n\t.ant-table-body {\r\n\t\tscrollbar-color: transparent transparent;\r\n\t\ttransition: scrollbar-color 1s cubic-bezier(0.19, 1, 0.22, 1);\r\n\t\tscrollbar-arrow-color: ${({ theme }) => theme.sectionBackground};\r\n\t\tscrollbar-track-color: ${({ theme }) => theme.sectionBackground};\r\n\t\t-ms-overflow-style: -ms-autohiding-scrollbar;\r\n\t\theight: ${(props) => props.tbodyHeight || 'auto'};\r\n\t}\r\n\t.ant-table-body:hover {\r\n\t\tscrollbar-color: ${({ theme }) => theme.activeBorder} transparent;\r\n\t\ttransition: scrollbar-color 1s cubic-bezier(0.19, 1, 0.22, 1);\r\n\t}\r\n\r\n\t.ant-table-tbody > tr.ant-table-placeholder {\r\n\t\t.ant-empty-description {\r\n\t\t\tcolor: ${colors.softgray3};\r\n\t\t}\r\n\r\n\t\t.ant-empty-img-simple-g {\r\n\t\t\tstroke: ${colors.softgray3};\r\n\t\t}\r\n\r\n\t\t.ant-empty-img-simple-ellipse {\r\n\t\t\tfill: ${colors.softgray3};\r\n\t\t}\r\n\r\n\t\t.ant-empty-img-simple-path {\r\n\t\t\tfill: ${colors.softgray2};\r\n\t\t}\r\n\r\n\t\t&:hover > td {\r\n\t\t\tbackground: ${({ theme }) => theme.tableRowHover};\r\n\t\t}\r\n\t}\r\n\r\n\t.ant-table-cell-scrollbar {\r\n\t\t-webkit-box-shadow: 0 1px 0 1px ${({ theme }) => theme.fieldBorder};\r\n\t\tbox-shadow: 0 1px 0 1px ${({ theme }) => theme.fieldBorder};\r\n\t}\r\n\r\n\t.ant-table-tbody > tr > td:not(:first-child):not(:only-child) {\r\n\t\tborder-left: none;\r\n\t}\r\n\r\n\t.ant-table-tbody > tr:first-child > td:not(:first-child):not(:only-child) {\r\n\t\t/* :after {\r\n        content: '';\r\n        position: absolute;\r\n        left: 0;\r\n        top: 0;\r\n        height: 100vh;\r\n        width: 0;\r\n        border-left: 1px solid ${({ theme }) => theme.fieldBorder};\r\n        z-index: 2;\r\n    } */\r\n\t}\r\n`;\r\n\r\nexport const HepStyle = styled.div`\r\n\t.header-configuration-section,\r\n\t.header-details-section {\r\n\t\t.section-header {\r\n\t\t\t&::after {\r\n\t\t\t\tbackground-color: ${({ theme }) => theme.fieldBorder};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const EmptyPlaceholder = styled.div`\r\n\tpointer-events: none;\r\n\tcolor: ${({ theme }) => theme.secondaryColor};\r\n\tfont-weight: 400;\r\n\tfont-size: 14px;\r\n`;\r\n","import { SectionHeader } from '@outlier-spa/mine/dist/components/Section';\r\nimport { Table } from 'antd';\r\nimport React, { useMemo } from 'react';\r\nimport { EmptyPlaceholder } from './styled';\r\n\r\nexport const defaultColumns = {\r\n\tNombre_Propuesto: 'Propuesto',\r\n\tPrioridad_Sondaje: 'Prioridad',\r\n\tNorte_Propuesto: 'Norte',\r\n\tEste_Propuesto: 'Este',\r\n\tElev_Propuesto: 'Cota',\r\n\tProf_Propuesto: 'Largo',\r\n\tSR_Propuesto: 'SR',\r\n\tAzimut_Propuesto: 'Azimuth',\r\n\tInclin_Propuesto: 'DIP',\r\n\tDDH_Propuesto: 'DDH',\r\n\tRC_Propuesto: 'RC',\r\n\tObjetivo_Diametro: 'Diámetro',\r\n};\r\n\r\nconst getColumnsDefinition = (data) => {\r\n\tvar columns = [];\r\n\r\n\tObject.keys(defaultColumns).forEach((key, idx) => {\r\n\t\tvar letterSize = 12;\r\n\t\tvar padding = 14;\r\n\t\tvar widthContent = 6 * letterSize + padding;\r\n\t\tvar widthTitle = defaultColumns[key].length * letterSize + padding;\r\n\t\tcolumns.push({\r\n\t\t\ttitle: defaultColumns[key],\r\n\t\t\tdataIndex: key,\r\n\t\t\tkey: key,\r\n\t\t\twidth: idx === 0 ? 190 : widthTitle < widthContent ? widthContent : widthTitle,\r\n\t\t\tfixed: idx === 0 ? 'left' : undefined,\r\n\t\t\tellipsis: true,\r\n\t\t});\r\n\t});\r\n\r\n\treturn columns;\r\n};\r\n\r\n// { state, dispatch }\r\nexport function HepDetails({ data }) {\r\n\tconst columns = useMemo(() => {\r\n\t\treturn getColumnsDefinition(data);\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className='header-details-section'>\r\n\t\t\t<SectionHeader left='Detalles'></SectionHeader>\r\n\t\t\t<div className='table-hep'>\r\n\t\t\t\t<Table\r\n\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\tdataSource={data}\r\n\t\t\t\t\tpagination={false}\r\n\t\t\t\t\tlocale={{ emptyText: <EmptyPlaceholder>No existe información para mostrar</EmptyPlaceholder> }}\r\n\t\t\t\t\tscroll={{ x: '100%' }}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport './styles.scss';\r\n\r\nexport const TitleInput = ({ children }) => <p className='title'>{children}</p>;\r\n","export const groupBy = (items, key) =>\r\n\titems.reduce(\r\n\t\t(result, item) => ({\r\n\t\t\t...result,\r\n\t\t\t[item[key]]: [...(result[item[key]] || []), item],\r\n\t\t}),\r\n\t\t{}\r\n\t);\r\n\r\nexport const toBase64 = async (file) =>\r\n\tnew Promise((resolve, reject) => {\r\n\t\tconst reader = new FileReader();\r\n\t\treader.readAsDataURL(file);\r\n\t\treader.onload = () => resolve(reader.result);\r\n\t\treader.onerror = (error) => reject(error);\r\n\t});\r\n\r\nexport const urlToFile = async (url, filename, mimeType) => {\r\n\treturn fetch(url)\r\n\t\t.then(function (res) {\r\n\t\t\treturn res.arrayBuffer();\r\n\t\t})\r\n\t\t.then(function (buf) {\r\n\t\t\treturn new File([buf], filename, { type: mimeType });\r\n\t\t});\r\n};\r\n\r\nexport const b64toBlob = (b64Data, contentType = 'image/png', sliceSize = 512) => {\r\n\tconst byteCharacters = atob(b64Data);\r\n\tconst byteArrays = [];\r\n\r\n\tfor (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\r\n\t\tconst slice = byteCharacters.slice(offset, offset + sliceSize);\r\n\r\n\t\tconst byteNumbers = new Array(slice.length);\r\n\t\tfor (let i = 0; i < slice.length; i++) {\r\n\t\t\tbyteNumbers[i] = slice.charCodeAt(i);\r\n\t\t}\r\n\r\n\t\tconst byteArray = new Uint8Array(byteNumbers);\r\n\t\tbyteArrays.push(byteArray);\r\n\t}\r\n\r\n\tconst blob = new Blob(byteArrays, { type: contentType });\r\n\treturn blob;\r\n};\r\n\r\nexport function downloadFile({ data, filename = 'document', contentType = 'application/pdf' }) {\r\n\tlet blob = new Blob(data, { type: contentType });\r\n\tlet link = document.createElement('a');\r\n\tlink.href = window.URL.createObjectURL(blob);\r\n\tlink.download = filename;\r\n\tdocument.body.appendChild(link);\r\n\tlink.click();\r\n\tdocument.body.removeChild(link);\r\n}\r\n\r\nexport function resizeImage(file, maxSize = { w: 640, h: 480 }, outputType, callback) {\r\n\tvar reader = new FileReader();\r\n\treader.onload = function (readerEvent) {\r\n\t\tresize(readerEvent.target.result, maxSize, outputType, callback);\r\n\t};\r\n\treader.readAsDataURL(file);\r\n}\r\n\r\nfunction resize(dataURL, maxSize, outputType, callback) {\r\n\tvar image = new Image();\r\n\timage.onload = function (imageEvent) {\r\n\t\tvar canvas = document.createElement('canvas'),\r\n\t\t\twidth = image.width,\r\n\t\t\theight = image.height;\r\n\t\tif (width > height) {\r\n\t\t\tif (width > maxSize.w) {\r\n\t\t\t\theight *= maxSize.w / width;\r\n\t\t\t\twidth = maxSize.w;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (height > maxSize.h) {\r\n\t\t\t\twidth *= maxSize.h / height;\r\n\t\t\t\theight = maxSize.h;\r\n\t\t\t}\r\n\t\t}\r\n\t\tcanvas.width = width;\r\n\t\tcanvas.height = height;\r\n\t\tcanvas.getContext('2d').drawImage(image, 0, 0, width, height);\r\n\t\toutput(canvas, outputType, callback);\r\n\t};\r\n\timage.src = dataURL;\r\n}\r\n\r\nfunction output(canvas, outputType, callback) {\r\n\tswitch (outputType) {\r\n\t\tcase 'file':\r\n\t\t\tcanvas.toBlob(\r\n\t\t\t\tfunction (blob) {\r\n\t\t\t\t\tcallback(blob);\r\n\t\t\t\t},\r\n\t\t\t\t'image/jpeg',\r\n\t\t\t\t0.7\r\n\t\t\t);\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'dataURL':\r\n\t\t\tcallback(canvas.toDataURL('image/png', 0.7));\r\n\t\t\tbreak;\r\n\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t}\r\n}\r\n","\r\n\r\nexport const HepValidator = {\r\n\r\n    checkEmptys: (hep) => {\r\n        if (!hep.type) {\r\n            return [false, \"type\", \"Seleccione tipo de perforación\"]\r\n        }\r\n        // else if (!hep.finalName) {\r\n        //     return [false, \"finalName\", \"Ingrese nombre final para el sondaje\"]\r\n        // }\r\n\r\n        return [true];\r\n    }\r\n}","import Loading from '@outlier-spa/loading';\r\nimport Button from '@outlier-spa/mine/dist/components/Button';\r\nimport Input, { TextArea } from '@outlier-spa/mine/dist/components/Input';\r\nimport Modal from '@outlier-spa/mine/dist/components/Modal';\r\nimport { SectionHeader } from '@outlier-spa/mine/dist/components/Section';\r\nimport Select from '@outlier-spa/mine/dist/components/Select';\r\nimport SwitchOptions from '@outlier-spa/mine/dist/components/SwitchOptions';\r\nimport { CacheHEP } from 'actions';\r\nimport axios from 'axios';\r\nimport { TitleInput } from 'components/Common';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { downloadFile } from 'utils';\r\nimport { db } from 'utils/database';\r\nimport indexDB from 'utils/db';\r\nimport { updateHepProp } from '.';\r\nimport { HepValidator } from './Validations';\r\n\r\nconst documentUrl = `${process.env.REACT_APP_API_URL}hep/pdf/`;\r\n\r\nconst template = `\r\nTo: User <user@domain.demo>\r\nSubject: Subject\r\nX-Unsent: 1\r\nContent-Type: text/html\r\n\r\n<html>\r\n<head>\r\n<style>\r\n    body, html, table {\r\n        font-family: Calibri, Arial, sans-serif;\r\n    }\r\n    .pastdue { color: crimson; }\r\n    table {\r\n    \tborder: 1px solid silver;\r\n    \tpadding: 6px;\r\n    }\r\n    thead {\r\n        text-align: center;\r\n        font-size: 1.2em;\r\n        color: navy;\r\n        background-color: silver;\r\n        font-weight: bold;\r\n    }\r\n    tbody td {\r\n    \ttext-align: center;\r\n    }\r\n</style>\r\n</head>\r\n<body>\r\n<table width=100%>\r\n\t<tr>\r\n\t\t<td><img src=\"http://www.laurell.com/images/logo/laurell_logo_storefront.jpg\" width=\"200\" height=\"57\" alt=\"\"></td>\r\n\t\t<td align=\"right\"><h1><span class=\"pastdue\">PAST DUE</span> INVOICE</h1></td>\r\n\t</tr>\r\n</table>\r\n<table width=100%>\r\n\t<thead>\r\n\t\t<th>Invoice #</th>\r\n\t\t<th>Days Overdue</th>\r\n\t\t<th>Amount Owed</th>\r\n\t</thead>\r\n\t<tbody>\r\n\t<tr>\r\n\t\t<td>OU812</td>\r\n\t\t<td>9</td>\r\n\t\t<td>$4395.00</td>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td>OU812</td>\r\n\t\t<td>9</td>\r\n\t\t<td>$4395.00</td>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td>OU812</td>\r\n\t\t<td>9</td>\r\n\t\t<td>$4395.00</td>\r\n\t</tr>\r\n\t</tbody>\r\n</table>\r\n</body>\r\n</html>\r\n`;\r\n\r\nvar textFile = null;\r\nconst makeTextFile = function (text) {\r\n\tvar data = new Blob([text], { type: 'text/plain' });\r\n\tif (textFile !== null) {\r\n\t\twindow.URL.revokeObjectURL(textFile);\r\n\t}\r\n\ttextFile = window.URL.createObjectURL(data);\r\n\treturn textFile;\r\n};\r\n\r\nfunction updateModalConfig(config) {\r\n\treturn {\r\n\t\ttype: '@hep/updateModalConfig',\r\n\t\tpayload: config,\r\n\t};\r\n}\r\n\r\nconst HepType = [\r\n\t{ label: 'SPRC', value: 'SPRC' },\r\n\t{ label: 'SPD', value: 'SPD' },\r\n\t{ label: 'SPSD', value: 'SPSD' },\r\n\t{ label: 'SPRD', value: 'SPRD' },\r\n\t{ label: 'SPAD', value: 'SPAD' },\r\n];\r\n\r\nexport function HepForm({ onSave, data }) {\r\n\tconst { hepData, modalConfig } = useSelector((selector) => selector.hepReducer);\r\n\tconst { holeId, finalName, type, requiredGeophysics, observation } = hepData;\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst offline = useSelector((selector) => selector.baseReducer.offline);\r\n\tconst history = useHistory();\r\n\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst handleChangeType = async (value) => {\r\n\t\tdispatch(updateHepProp('type', value));\r\n\t};\r\n\r\n\tconst handleSubmit = () => {\r\n\t\tsetLoading(true);\r\n\r\n\t\tif (offline) {\r\n\t\t\tvar data = JSON.parse(JSON.stringify({ ...hepData, inQueue: true }));\r\n\t\t\t// Guarda los datos de hep generadas en cache\r\n\t\t\tindexDB\r\n\t\t\t\t.table('hepQueue')\r\n\t\t\t\t.add(data)\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\tdispatch({ type: '@hep/updateRootProps', payload: { prop: 'hepData', value: data } });\r\n\r\n\t\t\t\t\t// Actualizar los valores el pozo con los nuevos datos\r\n\t\t\t\t\tCacheHEP(data, data.arearequestid)\r\n\t\t\t\t\t\t.then((resp) => {\r\n\t\t\t\t\t\t\tdispatch({ type: '@base/updateRootProp', payload: { prop: 'hepSync', value: true } });\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\t\tdispatch({ type: '@base/updateRootProp', payload: { prop: 'hepSync', value: false } });\r\n\t\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.finally(() => {\r\n\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\taxios\r\n\t\t\t.post(`Hep/${holeId}`, hepData)\r\n\t\t\t.then(({ data, status }) => {\r\n\t\t\t\tif (status === 200 && data?.status === true) {\r\n\t\t\t\t\tconst { emails } = data;\r\n\t\t\t\t\tconsole.log('emails', emails, data);\r\n\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\tupdateModalConfig({\r\n\t\t\t\t\t\t\tactive: true,\r\n\t\t\t\t\t\t\ttitle: 'Hep Generada',\r\n\t\t\t\t\t\t\tcontent: `Se ha generado una nueva HEP para el sondaje ${holeId} con HoleId = ${finalName}`,\r\n\t\t\t\t\t\t\tcancelProps: { visible: false },\r\n\t\t\t\t\t\t\tonSubmit: () => {\r\n\t\t\t\t\t\t\t\tdispatch(updateModalConfig({ active: false }));\r\n\t\t\t\t\t\t\t\tonSave && onSave();\r\n\r\n\t\t\t\t\t\t\t\t// todo: actualizar HepData\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tif (emails && emails.length > 0)\r\n\t\t\t\t\t\temails.forEach((email) => {\r\n\t\t\t\t\t\t\tlet link = document.createElement('a');\r\n\t\t\t\t\t\t\tlink.href = `mailto:${email.to}?Subject=${email.subject}&body=<strong>${email.body}</strong>`;\r\n\t\t\t\t\t\t\tdocument.body.appendChild(link);\r\n\t\t\t\t\t\t\tlink.click();\r\n\t\t\t\t\t\t\tdocument.body.removeChild(link);\r\n\r\n\t\t\t\t\t\t\t// Download file\r\n\r\n\t\t\t\t\t\t\tlet downloadLink = document.createElement('a');\r\n\t\t\t\t\t\t\tdownloadLink.href = `${documentUrl}${email.finalHoleId}`;\r\n\t\t\t\t\t\t\tdownloadLink.download = email.filename;\r\n\t\t\t\t\t\t\tdownloadLink.setAttribute('target', '_blank');\r\n\t\t\t\t\t\t\tdocument.body.appendChild(downloadLink);\r\n\t\t\t\t\t\t\tdownloadLink.click();\r\n\t\t\t\t\t\t\tdocument.body.removeChild(downloadLink);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\tupdateModalConfig({\r\n\t\t\t\t\t\t\tactive: true,\r\n\t\t\t\t\t\t\ttitle: 'Error de ingreso',\r\n\t\t\t\t\t\t\tcontent: `Error al intentar generar la HEP para el sondaje ${holeId} ${data.message ? `: ${data.message}` : ''}`,\r\n\t\t\t\t\t\t\tokProps: { visible: false },\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.finally(() => setLoading(false));\r\n\t};\r\n\r\n\tconst handleGenerate = () => {\r\n\t\tvar [status, prop, error] = HepValidator.checkEmptys(hepData);\r\n\r\n\t\tif (status) {\r\n\t\t\tdispatch(\r\n\t\t\t\tupdateModalConfig({\r\n\t\t\t\t\tactive: true,\r\n\t\t\t\t\tsize: 'small',\r\n\t\t\t\t\ttitle: 'Generar HEP',\r\n\t\t\t\t\tcontent: `Esta seguro que desea generar la HEP ${finalName} para el sondaje ${holeId}`,\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tdispatch(updateHepProp('error', { prop, message: error }));\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!type || (finalName && finalName === holeId)) return;\r\n\r\n\t\tsetLoading(true);\r\n\t\tdb.get(`Hep/getFinalName/${type}`)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tif (response.data) {\r\n\t\t\t\t\tconst { data } = response;\r\n\t\t\t\t\tdispatch(updateHepProp('finalName', data));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.finally(() => setLoading(false));\r\n\t}, [hepData, type, holeId]);\r\n\r\n\tconst disabled = !holeId || (!!hepData.Fecha_HEP && finalName === holeId) || !!hepData.inQueue;\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Loading active={loading} />\r\n\t\t\t<Modal\r\n\t\t\t\tonCancel={() => dispatch(updateModalConfig({ active: false }))}\r\n\t\t\t\tonSubmit={() => {\r\n\t\t\t\t\thandleSubmit();\r\n\t\t\t\t\tdispatch(updateModalConfig({ active: false }));\r\n\t\t\t\t}}\r\n\t\t\t\tokProps={{ text: 'Aceptar' }}\r\n\t\t\t\t{...modalConfig}>\r\n\t\t\t\t<div className='pd-14'>{modalConfig?.content}</div>\r\n\t\t\t</Modal>\r\n\r\n\t\t\t<div className='header-configuration-section'>\r\n\t\t\t\t<SectionHeader left={'HEP'}></SectionHeader>\r\n\t\t\t\t<div className='pd-14 flex flex-vgap-20' style={{ flexDirection: 'column', justifyContent: 'space-between', height: 'calc(100% - 50px)' }}>\r\n\t\t\t\t\t<div className='flex-vgap-20' style={{ display: 'flex', flexDirection: 'column', justifyContent: 'space-between' }}>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<TitleInput>Tipo</TitleInput>\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tisError={hepData?.error?.prop === 'type'}\r\n\t\t\t\t\t\t\t\tmessage={hepData?.error?.prop === 'type' && hepData?.error?.message}\r\n\t\t\t\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\t\t\t\tdarken\r\n\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\tvalue={type}\r\n\t\t\t\t\t\t\t\toptions={HepType}\r\n\t\t\t\t\t\t\t\tonChange={handleChangeType}></Select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<TitleInput>¿Requiere Geofísica?</TitleInput>\r\n\t\t\t\t\t\t\t<SwitchOptions\r\n\t\t\t\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\tindex={requiredGeophysics ? 0 : 1}\r\n\t\t\t\t\t\t\t\tonChange={(value) => dispatch(updateHepProp('requiredGeophysics', value.content === 'Si'))}></SwitchOptions>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<TitleInput>Nombre Final</TitleInput>\r\n\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\tisError={hepData?.error?.prop === 'finalName'}\r\n\t\t\t\t\t\t\t\tmessage={hepData?.error?.prop === 'finalName' && hepData?.error?.message}\r\n\t\t\t\t\t\t\t\tdarken\r\n\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\tvalue={finalName}\r\n\t\t\t\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\t\t\tdispatch(updateHepProp('finalName', value));\r\n\t\t\t\t\t\t\t\t}}></Input>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<TitleInput>Observación</TitleInput>\r\n\t\t\t\t\t\t\t<TextArea\r\n\t\t\t\t\t\t\t\tdarken\r\n\t\t\t\t\t\t\t\tplaceholder='(Opcional)'\r\n\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\tvalue={holeId && observation}\r\n\t\t\t\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\t\t\tdispatch(updateHepProp('observation', value));\r\n\t\t\t\t\t\t\t\t}}></TextArea>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Button disabledOpacity={disabled} type='green' size='large' style={{ width: 258, fontWeight: 'bold' }} onClick={handleGenerate}>\r\n\t\t\t\t\t\t\tGenerar HEP\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}\r\n","export const INITIAL_STATE = {\r\n\tholeId: null,\r\n\tholes: [],\r\n\thepData: {\r\n\t\tfinalName: null,\r\n\t\ttype: null,\r\n\t\tobservation: null,\r\n\t\tholeId: null,\r\n\t\trequiredGeophysics: true,\r\n\t},\r\n\tmodalConfig: {},\r\n};\r\n\r\nexport function hepReducer(state = INITIAL_STATE, action) {\r\n\tswitch (action.type) {\r\n\t\tcase '@hep/updateModalConfig':\r\n\t\t\treturn { ...state, modalConfig: { ...state.modalConfig, ...action.payload } };\r\n\t\tcase '@hep/updateRootProps':\r\n\t\t\tconst { prop: propRoot, value: valueRoot } = action.payload;\r\n\t\t\tstate[propRoot] = valueRoot;\r\n\t\t\treturn { ...state };\r\n\t\tcase '@hep/updateHepData':\r\n\t\t\tstate.hepData['error'] = null; // limpiar errores\r\n\r\n\t\t\tconst { prop: hepProp, value: hepValue } = action.payload;\r\n\t\t\tstate.hepData[hepProp] = hepValue;\r\n\t\t\treturn { ...state };\r\n\r\n\t\tcase 'clean':\r\n\t\t\treturn { ...INITIAL_STATE };\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import Loading from '@outlier-spa/loading';\nimport { DownloadFilled, PdfTone } from '@outlier-spa/mine-icon/dist/icons';\nimport Input from '@outlier-spa/mine/dist/components/Input';\nimport { Section } from '@outlier-spa/mine/dist/components/Section';\nimport { Table } from 'antd';\nimport { BaseLayout } from 'App';\nimport { HeaderPage } from 'components/Headers';\nimport useDebouncedEffect from 'hooks/useDebouncedEffect';\nimport _ from 'lodash';\nimport React, { useCallback, useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { baseApiUrl, db } from 'utils/database';\nimport { HepDetails } from './Details';\nimport { HepForm } from './Form';\nimport { HepStyle, TableStyles } from './styled';\nimport { INITIAL_STATE, hepReducer } from 'reducer/hepReducer';\nimport './styles.scss';\n\nexport function updateProp(prop, value) {\n\treturn { type: '@hep/updateRootProps', payload: { prop: prop, value: value } };\n}\n\nexport function updateHepProp(prop, value) {\n\treturn { type: '@hep/updateHepData', payload: { prop, value } };\n}\n\nexport const _sortColumns = (a, b, key = null) => {\n\tif (!key && (typeof a === 'object' || typeof b === 'object')) return false;\n\treturn (a[key] || a).toString().localeCompare((b[key] || a).toString());\n};\n\nexport const _hepColumns = [\n\t{\n\t\tkey: 'holeId',\n\t\ttitle: 'HOLEID',\n\t\tdataIndex: 'holeId',\n\t\tsorter: (a, b) => _sortColumns(a, b, 'holeId'),\n\t\twidth: 180,\n\t\tfixed: 'left',\n\t},\n\t{\n\t\tkey: 'Nombre_Propuesto',\n\t\ttitle: 'Propuesto',\n\t\tdataIndex: 'Nombre_Propuesto',\n\t\tsorter: (a, b) => _sortColumns(a, b, 'Nombre_Propuesto'),\n\t\twidth: 180,\n\t\tfixed: 'left',\n\t},\n\t{\n\t\tkey: 'Prioridad_Sondaje',\n\t\ttitle: 'Prioridad',\n\t\tdataIndex: 'Prioridad_Sondaje',\n\t\twidth: 110,\n\t\tsorter: (a, b) => _sortColumns(a, b, 'Prioridad_Sondaje'),\n\t},\n\t{\n\t\tkey: 'Nombre_Diseno',\n\t\ttitle: 'Diseño',\n\t\tdataIndex: 'Nombre_Diseno',\n\t\twidth: 180,\n\t\tsorter: (a, b) => _sortColumns(a, b, 'Nombre_Diseno'),\n\t},\n\t{\n\t\tkey: 'FiscalYear_Propuesto',\n\t\ttitle: 'FY',\n\t\tdataIndex: 'FiscalYear_Propuesto',\n\t\twidth: 70,\n\t\tsorter: (a, b) => _sortColumns(a, b, 'FiscalYear_Propuesto'),\n\t},\n\t{\n\t\tkey: 'Campana',\n\t\ttitle: 'Campaña',\n\t\tdataIndex: 'Campana',\n\t\twidth: 220,\n\t\tsorter: (a, b) => _sortColumns(a, b, 'Campana'),\n\t},\n\t{\n\t\tkey: 'hep',\n\t\ttitle: 'HEP',\n\t\tdataIndex: 'hep',\n\t\twidth: 240,\n\t\trender: (_, row) => renderHepColumn(row),\n\t},\n];\n\nexport const _hepDefaultTypes = { RC: 'SPRC', DDH: 'SPD' };\n\nfunction AllHeps(props) {\n\tconst { holes, hepData } = useSelector((selector) => selector.hepReducer);\n\tconst dispatch = useDispatch();\n\tconst [loading, setLoading] = useState(false);\n\tconst [search, setSearch] = useState(null);\n\n\tconst handleChangeHoleId = (hole) => {\n\t\tif (!hole || !hole.holeId) return;\n\t\tdb.get(`Hep/hole/${hole.holeId}`).then((response) => {\n\t\t\tif (response.data) {\n\t\t\t\tconst { data } = response;\n\t\t\t\tvar holeDetails = _.merge(hole, data);\n\n\t\t\t\tif (!holeDetails.type && holeDetails['Objetivo_Tipo']) {\n\t\t\t\t\tholeDetails.type = _hepDefaultTypes[holeDetails['Objetivo_Tipo']] || null;\n\t\t\t\t}\n\n\t\t\t\tdispatch(updateProp('hepData', holeDetails));\n\t\t\t}\n\t\t});\n\t};\n\n\tconst updateRootProps = useCallback(\n\t\t(prop, value) => {\n\t\t\tdispatch(updateProp(prop, value));\n\t\t},\n\t\t[dispatch]\n\t);\n\n\tconst getHoles = useCallback(\n\t\t(text) => {\n\t\t\tif (!text) {\n\t\t\t\tupdateRootProps('holes', []);\n\t\t\t\tupdateRootProps('hepData', {});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// else if (text.length < 4) return;\n\n\t\t\tsetLoading(true);\n\t\t\tdb.get(`Hep/BySearch/${text}`)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif (response.data) {\n\t\t\t\t\t\tconst { data } = response;\n\t\t\t\t\t\tupdateRootProps(\n\t\t\t\t\t\t\t'holes',\n\t\t\t\t\t\t\tdata.map((d) => ({ ...d, key: d['Nombre_Propuesto'] }))\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.finally(() => setLoading(false));\n\t\t},\n\t\t[updateRootProps]\n\t);\n\n\tuseEffect(() => {\n\t\tdispatch({ type: 'clean' });\n\t}, []);\n\n\tuseDebouncedEffect(\n\t\t() => {\n\t\t\tif (search === null) return;\n\t\t\tgetHoles(search);\n\t\t},\n\t\t500,\n\t\t[search]\n\t);\n\n\treturn (\n\t\t<BaseLayout className='all-heps_page' onChangeTheme={props.onChangeTheme} light={props.light}>\n\t\t\t<Loading active={loading} />\n\n\t\t\t<HeaderPage style={{ padding: '19px 0' }}>HEP</HeaderPage>\n\t\t\t<HepStyle className='hep-page flex flex-column flex-1'>\n\t\t\t\t<div className='flex flex-gap-14 flex-1' style={{ height: '100%', maxWidth: '100%', maxHeight: 'calc(100vh - 220px)' }}>\n\t\t\t\t\t<div className='flex-vgap-14 hep-page_holes'>\n\t\t\t\t\t\t<div style={{ minHeight: 500 }} className='flex flex-vgap-14 hep-page_list'>\n\t\t\t\t\t\t\t<Input value={search} onChange={setSearch} placeholder='Escriba el nombre del sondaje para buscar...' />\n\t\t\t\t\t\t\t<Section style={{ height: 'calc(100% - 44px)' }}>\n\t\t\t\t\t\t\t\t<TableStyles className='table-hep'>\n\t\t\t\t\t\t\t\t\t<Table\n\t\t\t\t\t\t\t\t\t\tcolumns={_hepColumns}\n\t\t\t\t\t\t\t\t\t\tdataSource={holes}\n\t\t\t\t\t\t\t\t\t\tpagination={false}\n\t\t\t\t\t\t\t\t\t\tscroll={{ x: '100%', y: 450 }}\n\t\t\t\t\t\t\t\t\t\tlocale={{ triggerDesc: 'Descendente', triggerAsc: 'Ascendente', cancelSort: 'Cancelar orden' }}\n\t\t\t\t\t\t\t\t\t\tonRow={(item, _rowIndex) => {\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\tonClick: () => handleChangeHoleId(item),\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</TableStyles>\n\t\t\t\t\t\t\t</Section>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<Section className='hep-page_details'>\n\t\t\t\t\t\t\t<TableStyles>\n\t\t\t\t\t\t\t\t<HepDetails data={hepData.holeId ? [{ ...hepData, key: 1 }] : []} />\n\t\t\t\t\t\t\t</TableStyles>\n\t\t\t\t\t\t</Section>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<Section className='flex-gap-14 inline-fields' style={{ width: 288 }}>\n\t\t\t\t\t\t<HepForm\n\t\t\t\t\t\t\tonSave={() => {\n\t\t\t\t\t\t\t\tupdateRootProps('hepData', {});\n\t\t\t\t\t\t\t\tgetHoles(search);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Section>\n\t\t\t\t</div>\n\t\t\t</HepStyle>\n\t\t</BaseLayout>\n\t);\n}\n\nexport default AllHeps;\n\n// Renderizado personalizado de la celda HEP\nfunction renderHepColumn(props) {\n\tconst { fileName, holeId } = props;\n\treturn fileName ? (\n\t\t<p style={{ paddingLeft: 30, position: 'relative' }}>\n\t\t\t<PdfTone style={{ width: 18, height: 18, position: 'absolute', left: 0, top: '50%', transform: 'translateY(-50%)' }}></PdfTone>\n\t\t\t<a href={`${baseApiUrl}hep/pdf/${holeId}`} target='_blank' rel='noreferrer'>\n\t\t\t\t{fileName}\n\t\t\t\t<DownloadFilled style={{ position: 'absolute', right: 0, top: '50%', transform: 'translateY(-50%)' }} />\n\t\t\t</a>\n\t\t</p>\n\t) : (\n\t\t<span style={{ opacity: 0.5 }}>No existe documento</span>\n\t);\n}\n","import Loading from '@outlier-spa/loading';\r\nimport { DillFilled } from '@outlier-spa/mine-icon/dist/icons';\r\nimport { Section } from '@outlier-spa/mine/dist/components/Section';\r\nimport { CacheHEP, GetCacheHep, getCacheHoleDetails } from 'actions';\r\nimport { Table } from 'antd';\r\nimport { DetailsHeader } from 'components/Headers';\r\nimport _ from 'lodash';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { db } from 'utils/database';\r\nimport { _hepColumns, _hepDefaultTypes } from './AllHeps';\r\nimport { HepDetails } from './Details';\r\nimport { HepForm } from './Form';\r\nimport { HepStyle, TableStyles } from './styled';\r\nimport './styles.scss';\r\n\r\nexport function updateProp(prop, value) {\r\n\treturn { type: '@hep/updateRootProps', payload: { prop: prop, value: value } };\r\n}\r\n\r\nexport function updateHepProp(prop, value) {\r\n\treturn { type: '@hep/updateHepData', payload: { prop, value } };\r\n}\r\n\r\n// * Obtiene los detalles del pozo, desde\r\nfunction requestHoleDetails(hole, offline = false) {\r\n\tif (offline) {\r\n\t\treturn getCacheHoleDetails(hole.holeId).then((response) => {\r\n\t\t\tvar holeDetails = _.merge(hole, response);\r\n\r\n\t\t\tif (!holeDetails.type && holeDetails['Objetivo_Tipo']) {\r\n\t\t\t\tholeDetails.type = _hepDefaultTypes[holeDetails['Objetivo_Tipo']] || null;\r\n\t\t\t}\r\n\r\n\t\t\treturn holeDetails;\r\n\t\t});\r\n\t}\r\n\r\n\treturn db.get(`Hep/hole/${hole.holeId}`).then((response) => {\r\n\t\tif (response.data) {\r\n\t\t\tconst { data } = response;\r\n\t\t\tvar holeDetails = _.merge(hole, data);\r\n\r\n\t\t\tif (!holeDetails.type && holeDetails['Objetivo_Tipo']) {\r\n\t\t\t\tholeDetails.type = _hepDefaultTypes[holeDetails['Objetivo_Tipo']] || null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn holeDetails;\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction requestHoles(areaRequestId, dispatch, offline = false) {\r\n\tif (offline) {\r\n\t\treturn GetCacheHep(areaRequestId).then((heps) => {\r\n\t\t\tdispatch(heps);\r\n\t\t\tdispatch({ type: '@base/updateRootProp', payload: { prop: 'hepSync', value: true } });\r\n\t\t\treturn heps.payload.map((d) => ({ ...d, key: d['Nombre_Propuesto'] }));\r\n\t\t});\r\n\t}\r\n\r\n\treturn db.get(`Hep/getByAreaRequest/${areaRequestId}`).then((response) => {\r\n\t\tif (response.data) {\r\n\t\t\tconst { data } = response;\r\n\r\n\t\t\t// Guarda los datos en cache\r\n\t\t\tdata.forEach((value) => {\r\n\t\t\t\tCacheHEP({ ...value, arearequestid: areaRequestId, inQueue: false }, areaRequestId)\r\n\t\t\t\t\t.then((resp) => {\r\n\t\t\t\t\t\tdispatch({ type: '@base/updateRootProp', payload: { prop: 'hepSync', value: true } });\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\tdispatch({ type: '@base/updateRootProp', payload: { prop: 'hepSync', value: false } });\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\treturn data.map((d) => ({ ...d, key: d['Nombre_Propuesto'] }));\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction Hep(props) {\r\n\tconst { areaRequestId } = props;\r\n\tconst { holes, hepData } = useSelector((selector) => selector.hepReducer);\r\n\tconst dispatch = useDispatch();\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst offline = useSelector((selector) => selector.baseReducer.offline);\r\n\r\n\t//* Busca los detalles del pozo seleccionado\r\n\tconst handleChangeHoleId = (hole) => {\r\n\t\tif (!hole || !hole.holeId) return;\r\n\t\tsetLoading(true);\r\n\t\trequestHoleDetails(hole, offline)\r\n\t\t\t.then((holeDetails) => {\r\n\t\t\t\tdispatch(updateProp('hepData', holeDetails));\r\n\t\t\t})\r\n\t\t\t.finally(() => setLoading(false));\r\n\t};\r\n\r\n\tconst updateRootProps = useCallback(\r\n\t\t(prop, value) => {\r\n\t\t\tdispatch(updateProp(prop, value));\r\n\t\t},\r\n\t\t[dispatch]\r\n\t);\r\n\r\n\tconst getAreaHoles = useCallback(() => {\r\n\t\tsetLoading(true);\r\n\r\n\t\trequestHoles(areaRequestId, dispatch, offline)\r\n\t\t\t.then((data) => {\r\n\t\t\t\tupdateRootProps('holes', data);\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t});\r\n\t}, [updateRootProps, dispatch]);\r\n\r\n\tuseEffect(() => {\r\n\t\tdispatch({ type: 'clean' });\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (areaRequestId === null) return;\r\n\t\tgetAreaHoles(areaRequestId);\r\n\t}, [areaRequestId, getAreaHoles]);\r\n\r\n\treturn (\r\n\t\t<HepStyle className='hep-page flex flex-column flex-1'>\r\n\t\t\t<Loading active={loading} />\r\n\t\t\t<DetailsHeader icon={<DillFilled style={{ transform: 'rotateZ(45deg)' }} />} text='Pozos propuestos' />\r\n\t\t\t<div className='flex flex-gap-14 flex-1' style={{ marginBottom: 14, height: 'calc(100% - 50px)', maxWidth: '100%' }}>\r\n\t\t\t\t<div className='flex-vgap-14 hep-page_holes'>\r\n\t\t\t\t\t<Section className='hep-page_list'>\r\n\t\t\t\t\t\t<TableStyles className='table-hep'>\r\n\t\t\t\t\t\t\t<Table\r\n\t\t\t\t\t\t\t\tcolumns={_hepColumns}\r\n\t\t\t\t\t\t\t\tdataSource={holes}\r\n\t\t\t\t\t\t\t\tpagination={false}\r\n\t\t\t\t\t\t\t\tscroll={{ x: '100%', y: 400 }}\r\n\t\t\t\t\t\t\t\tlocale={{ triggerDesc: 'Descendente', triggerAsc: 'Ascendente', cancelSort: 'Cancelar orden' }}\r\n\t\t\t\t\t\t\t\tonRow={(item, _rowIndex) => {\r\n\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\tonClick: () => handleChangeHoleId(item),\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</TableStyles>\r\n\t\t\t\t\t</Section>\r\n\r\n\t\t\t\t\t<Section className='hep-page_details'>\r\n\t\t\t\t\t\t<TableStyles>\r\n\t\t\t\t\t\t\t<HepDetails data={hepData.holeId ? [{ ...hepData, key: 1 }] : []} />\r\n\t\t\t\t\t\t</TableStyles>\r\n\t\t\t\t\t</Section>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<Section className='flex-gap-14 inline-fields' style={{ width: 288 }}>\r\n\t\t\t\t\t<HepForm onSave={() => getAreaHoles(areaRequestId)} />\r\n\t\t\t\t</Section>\r\n\t\t\t</div>\r\n\t\t</HepStyle>\r\n\t);\r\n}\r\n\r\nexport default Hep;\r\n","import * as React from 'react';\r\n\r\nfunction SvgParachute(props) {\r\n\treturn (\r\n\t\t<svg width={80} height={80} viewBox='0 0 80 80' fill='none' xmlns='http://www.w3.org/2000/svg' {...props}>\r\n\t\t\t<circle cx={40} cy={40} r={40} fill='#616E82' />\r\n\t\t\t<path\r\n\t\t\t\tfillRule='evenodd'\r\n\t\t\t\tclipRule='evenodd'\r\n\t\t\t\td='M28.47 63.705a2.672 2.672 0 00-2.673-2.672h-.746a2.673 2.673 0 00-2.467 1.644H21.35a2.673 2.673 0 00-2.468 1.643h-.42a2.252 2.252 0 000 4.505h10.685a2.252 2.252 0 000-4.505h-.748c.046-.197.07-.403.07-.615zM65.65 18.008a2.158 2.158 0 00-2.158-2.158h-3.584c-.909 0-1.686.562-2.004 1.356h-2.796c-.908 0-1.686.562-2.004 1.357h-1.535a1.819 1.819 0 100 3.637h16.063a1.819 1.819 0 100-3.637h-2.054a2.16 2.16 0 00.072-.555z'\r\n\t\t\t\tfill='#738095'\r\n\t\t\t/>\r\n\t\t\t<path d='M25.862 41.018l14.209 3.11v18.097l-14.209-4.524V41.018z' fill='#D7D7D7' />\r\n\t\t\t<path d='M25.862 41.018l14.209 3.11v18.097l-14.209-4.524V41.018z' fill='#78889D' />\r\n\t\t\t<path d='M38.88 57.675l-4.4-1.287v2.662l4.4 1.425v-2.8z' fill='#9BA9BB' />\r\n\t\t\t<path d='M54.138 41.018l-14.067 3.11v18.097l14.067-4.524V41.018z' fill='#D7D7D7' />\r\n\t\t\t<path d='M54.138 41.018l-14.067 3.11v18.097l14.067-4.524V41.018z' fill='#8693A4' />\r\n\t\t\t<path d='M40.09 44.133l-14.228-3.115 14.229-3.393 14.047 3.393-14.047 3.115z' fill='#C8BDBD' />\r\n\t\t\t<path d='M40.09 44.133l-14.228-3.115 14.229-3.393 14.047 3.393-14.047 3.115z' fill='#9BA9BB' />\r\n\t\t\t<path d='M59.6 23.2L40 40 20.4 23.2M40 24.4V40' stroke='#2A313B' strokeWidth={0.8} />\r\n\t\t\t<path\r\n\t\t\t\td='M19.06 24.91C21.684 15.518 30.247 9 39.998 9a21.73 21.73 0 0120.802 15.448l.14.462a68.52 68.52 0 00-20.748 1.249L40 26.2l-.192-.041a68.52 68.52 0 00-20.747-1.249z'\r\n\t\t\t\tfill='#38414E'\r\n\t\t\t/>\r\n\t\t\t<path d='M39.187 38.479h1.625l.963 2.4L40 41.5l-1.775-.621.962-2.4z' fill='#5C6D83' />\r\n\t\t\t<path\r\n\t\t\t\tfillRule='evenodd'\r\n\t\t\t\tclipRule='evenodd'\r\n\t\t\t\td='M6.5 31.879a3.5 3.5 0 013.5-3.5h.9c1.296 0 2.427.704 3.032 1.75H15.7a3.502 3.502 0 013.34 2.45h.41a2.95 2.95 0 010 5.9H5.65a2.95 2.95 0 110-5.9h.92a3.515 3.515 0 01-.07-.7zM72.95 47.633a3.5 3.5 0 00-3.5-3.5h-.9c-1.474 0-2.734.91-3.25 2.2h-1.55c-1.474 0-2.734.91-3.25 2.2H60a2.95 2.95 0 100 5.9h13.8a2.95 2.95 0 000-5.9h-.967c.076-.287.117-.589.117-.9z'\r\n\t\t\t\tfill='#738095'\r\n\t\t\t/>\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default SvgParachute;\r\n","export function PdfViewer({ url }) {\r\n\treturn (\r\n\t\t<div className='pd-14' style={{ height: '80vh', width: '100%' }}>\r\n\t\t\t<object data={url} type='application/pdf' style={{ height: '100%', width: '100%' }}>\r\n\t\t\t\t<iframe src={`https://docs.google.com/viewer?url=${url}&embedded=true`} title='view'></iframe>\r\n\t\t\t</object>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default PdfViewer;","import * as React from 'react';\r\n\r\nfunction SvgSave(props) {\r\n\treturn (\r\n\t\t<svg width='1em' height='1em' viewBox='0 0 14 14' fill='none' xmlns='http://www.w3.org/2000/svg' {...props}>\r\n\t\t\t<path\r\n\t\t\t\tfillRule='evenodd'\r\n\t\t\t\tclipRule='evenodd'\r\n\t\t\t\td='M10.889 0H1.556C.7 0 0 .7 0 1.556v10.888C0 13.3.7 14 1.556 14h10.888C13.3 14 14 13.3 14 12.444V3.111L10.889 0zM7 12.444c-1.322 0-2.333-1.01-2.333-2.333 0-1.322 1.01-2.333 2.333-2.333 1.322 0 2.333 1.01 2.333 2.333 0 1.322-1.01 2.333-2.333 2.333zm2.333-7.777H1.556V1.556h7.777v3.11z'\r\n\t\t\t\tfill='currentColor'\r\n\t\t\t/>\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default SvgSave;\r\n","import * as React from 'react';\r\n\r\nfunction SvgSignature(props) {\r\n\treturn (\r\n\t\t<svg width='1em' height='1em' viewBox='0 0 19 18' fill='none' xmlns='http://www.w3.org/2000/svg' {...props}>\r\n\t\t\t<path d='M1.033 3.025l1.775 3.807a.3.3 0 11-.544.253L.362 3.007a.3.3 0 01.145-.399l.544-.253a.3.3 0 01.254.543l-.272.127z' fill='#05ABE8' />\r\n\t\t\t<path\r\n\t\t\t\tfillRule='evenodd'\r\n\t\t\t\tclipRule='evenodd'\r\n\t\t\t\td='M1.356.897A.908.908 0 00.926 2.1L6.91 14.862l2.692-1.286L3.618.814A.892.892 0 002.424.387l-1.068.51zm8.227 12.696l-2.7 1.289 2.07 1.612a.36.36 0 00.58-.278l.05-2.623z'\r\n\t\t\t\tfill='currentColor'\r\n\t\t\t/>\r\n\t\t\t<path\r\n\t\t\t\td='M9.6 17.4s5.4.3 5.4-1.2-5.4-3.3-4.8-5.1c.682-2.047 7.029-.28 7.5-2.4C18.3 6 9 5.4 9 5.4'\r\n\t\t\t\tstroke='currentColor'\r\n\t\t\t\tstrokeWidth={0.9}\r\n\t\t\t\tstrokeLinecap='round'\r\n\t\t\t/>\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default SvgSignature;\r\n","import { ClearFilled, VersionOutlined } from '@outlier-spa/mine-icon';\r\nimport * as d3 from 'd3';\r\nimport React, { useContext, useRef } from 'react';\r\nimport CanvasDraw from 'react-canvas-draw';\r\nimport { ThemeContext } from 'styled-components';\r\n\r\nexport const defaultProps = {\r\n\tlazyRadius: 1,\r\n\tbrushRadius: 2,\r\n\tbrushColor: '#0B22BD',\r\n\tcatenaryColor: '#0B22BD',\r\n\tbackgroundColor: '#2D2F35',\r\n\tcanvasWidth: 665,\r\n\tcanvasHeight: 338,\r\n\thideGrid: true,\r\n};\r\n\r\nconst DrawSignature = React.forwardRef(({ identifier, ...rest }, ref) => {\r\n\tconst canvasDrawRef = useRef();\r\n\tconst theme = useContext(ThemeContext);\r\n\t// const [draw, setDraw] = useState(null);\r\n\tconst handleChange = (value) => {\r\n\t\tvar lineGenerator = d3.line();\r\n\t\tlet finalLines = [];\r\n\r\n\t\tconst lines = JSON.parse(canvasDrawRef.current.getSaveData())['lines'];\r\n\t\tlines.forEach((line) => {\r\n\t\t\tconst points = line.points;\r\n\t\t\tconst finalPoint = [];\r\n\t\t\tpoints.forEach((point) => {\r\n\t\t\t\tfinalPoint.push([point.x, point.y]);\r\n\t\t\t});\r\n\t\t\tfinalLines.push(finalPoint);\r\n\t\t});\r\n\r\n\t\tvar path = '';\r\n\t\tfinalLines.forEach((fl) => {\r\n\t\t\tvar pathData = lineGenerator(fl);\r\n\t\t\tpath = path + `<path d='${pathData}' stroke='black'> </path>`;\r\n\t\t});\r\n\r\n\t\tlet svgContainer = `<svg width='150px' height='45px' viewBox='0 0 ${rest.canvasWidth} ${rest.canvasHeight}' fill='none' xmlns='http://www.w3.org/2000/svg'>#PATHS</svg>`;\r\n\t\tsvgContainer = svgContainer.replace('#PATHS', path);\r\n\t\tsessionStorage.setItem(identifier, svgContainer);\r\n\t};\r\n\r\n\tconst getSvg = () => {};\r\n\r\n\tconst getBase64Data = (callback = null, callbackUri = null) => {\r\n\t\tvar uri = canvasDrawRef.current.canvas.drawing.toDataURL('image/png', 0.7);\r\n\t\tcallbackUri && callbackUri(uri);\r\n\t\tcallback &&\r\n\t\t\tcanvasDrawRef.current.canvas.drawing.toBlob(async function (blob) {\r\n\t\t\t\tcallback(blob);\r\n\t\t\t});\r\n\t};\r\n\r\n\tconst handleUndo = () => {\r\n\t\tcanvasDrawRef.current.undo();\r\n\t};\r\n\tconst handleClear = () => {\r\n\t\tsessionStorage.removeItem(identifier);\r\n\t\tcanvasDrawRef.current.clear();\r\n\t};\r\n\tref && (ref.current = { getSvg, getBase64Data });\r\n\r\n\treturn (\r\n\t\t<div style={{ position: 'relative' }}>\r\n\t\t\t<CanvasDraw ref={canvasDrawRef} onChange={handleChange} {...rest} backgroundColor={theme.dark ? '#2D2F35' : '#fff'} />\r\n\t\t\t<div className='signature-options-container'>\r\n\t\t\t\t<VersionOutlined onClick={handleUndo} />\r\n\t\t\t\t<ClearFilled style={{ marginLeft: 10 }} onClick={handleClear} />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default DrawSignature;\r\n","import { Section } from '@outlier-spa/mine/dist/components/Section';\r\nimport React from 'react';\r\nimport './styles.scss';\r\nimport Signature from 'assets/Signature';\r\nimport { colors } from '@outlier-spa/mine/dist/config/themes';\r\nimport { DescriptionText } from 'styled';\r\nimport { CheckOutlined } from '@outlier-spa/mine-icon';\r\n\r\nexport const SIGNED_TEXT = 'Firmado por el participante';\r\nexport const NO_SIGNED_TEXT = 'Seleccione para firmar';\r\nconst defaultStyles = { color: colors.skyblue, width: 'auto', height: 'auto' };\r\n\r\nfunction SignatureViewer({ disabled, svg, signed = false, signedText = SIGNED_TEXT, noSignedText = NO_SIGNED_TEXT, onClick }) {\r\n\treturn (\r\n\t\t<Section className='signature-viewer' style={{ height: 150, maxWidth: 560, pointerEvents: disabled ? 'none' : 'auto' }}>\r\n\t\t\t<div onClick={onClick}>\r\n\t\t\t\t{svg || (\r\n\t\t\t\t\t<label style={{ textAlign: 'center', cursor: 'pointer' }}>\r\n\t\t\t\t\t\t{!signed && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Signature style={{ ...defaultStyles, fontSize: 22 }} />\r\n\t\t\t\t\t\t\t\t<DescriptionText as='p' style={{ opacity: 0.5 }}>\r\n\t\t\t\t\t\t\t\t\t{noSignedText}\r\n\t\t\t\t\t\t\t\t</DescriptionText>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{signed && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<CheckOutlined style={{ ...defaultStyles, verticalAlign: 'middle', marginRight: 9, fontSize: '1rem' }} />\r\n\t\t\t\t\t\t\t\t<DescriptionText as='span' style={{ opacity: 0.5 }}>\r\n\t\t\t\t\t\t\t\t\t{signedText}\r\n\t\t\t\t\t\t\t\t</DescriptionText>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</label>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</Section>\r\n\t);\r\n}\r\n\r\nexport default SignatureViewer;\r\n","import React from 'react';\r\nimport './styles.scss';\r\nimport styled from 'styled-components';\r\nimport { Section } from '@outlier-spa/mine/dist/components/Section';\r\nimport SwitchOptions from '@outlier-spa/mine/dist/components/SwitchOptions';\r\n\r\nconst TableDualStyle = styled(Section)`\r\n\t&.table-dual-item-container {\r\n\t\tborder-bottom: 1px solid ${({ theme }) => theme.fieldBorder};\r\n\t\t.table-dual-item {\r\n\t\t\tborder-bottom: 1px solid ${({ theme }) => theme.fieldBorder};\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nfunction SimpleTableCheck({ data, headerProp = { label: 'Item', secondaryLabel: 'Cumple' }, options, onChange, disabled = false }) {\r\n\treturn (\r\n\t\t<TableDualStyle className='table-dual-item-container'>\r\n\t\t\t<div className='table-dual-item flex flex-space pd-14'>\r\n\t\t\t\t<span className='flex flex-middle'>{headerProp.label}</span>\r\n\t\t\t\t<div style={{ width: 138 }}>\r\n\t\t\t\t\t<span className='flex flex-left'>{headerProp.secondaryLabel}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{data?.map((d, k) => {\r\n\t\t\t\tlet indexSelected = 0;\r\n\t\t\t\tif (options === undefined) {\r\n\t\t\t\t\tindexSelected = d.answer === 'No' ? 1 : 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptions.forEach((op, key) => {\r\n\t\t\t\t\t\tif (op.content === d.answer) {\r\n\t\t\t\t\t\t\tindexSelected = key;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={k} className='table-dual-item flex flex-space pd-14'>\r\n\t\t\t\t\t\t<span className='flex flex-middle'>{d.label}</span>\r\n\t\t\t\t\t\t<span className='flex flex-middle'>\r\n\t\t\t\t\t\t\t<SwitchOptions\r\n\t\t\t\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\tsecondary\r\n\t\t\t\t\t\t\t\tindex={indexSelected}\r\n\t\t\t\t\t\t\t\tdefaultIndex={1}\r\n\t\t\t\t\t\t\t\toptions={options}\r\n\t\t\t\t\t\t\t\tonChange={(a, b) => onChange && onChange({ ...a, contentIndex: b, elementPosition: k })}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</TableDualStyle>\r\n\t);\r\n}\r\n\r\nexport default SimpleTableCheck;\r\n","export const REQUEST_STATE = Object.freeze({ NO_CREATED: 'no creada', CREATED: 'creada', APPROVED: 'aprobada', DELETED: 'eliminada' });\r\n\r\nexport const MODE = Object.freeze({ CREATING: 1, EDITING: 2 });\r\n\r\nexport const TAB_INDEX = Object.freeze({ REQUEST: 1, RGO: 2, HEP: 3, PLATFORM_DELIVERY: 4 });\r\n","export const INITIAL_STATE = {\r\n\terrors: { revision: 'Requerido' },\r\n\tloading: false,\r\n\tmodalConfig: {},\r\n\trecuperation: '',\r\n\tdip: '',\r\n\tazimuth: '',\r\n\tdepth: '',\r\n\tsector: '',\r\n\trevisions: [\r\n\t\t{ key: 1, label: 'Aplitud 30x30', answer: 'No' },\r\n\t\t{ key: 2, label: 'Pretiles Aljibe', answer: 'No' },\r\n\t\t{ key: 3, label: 'Bermas (tránsito peatonal)', answer: 'No' },\r\n\t\t{ key: 4, label: 'Pretiles contorno caseta', answer: 'No' },\r\n\t\t{ key: 5, label: 'Accesos vehículos y personal', answer: 'No' },\r\n\t\t{ key: 6, label: 'Pretiles contorno', answer: 'No' },\r\n\t\t{ key: 7, label: 'Nivelación plataforma', answer: 'No' },\r\n\t\t{ key: 8, label: 'Estacionamientos', answer: 'No' },\r\n\t\t{ key: 9, label: 'Pretil contorno y tope baño', answer: 'No' },\r\n\t],\r\n\tcontrolMeasures: [\r\n\t\t{ missingFeature: 'Aplitud 30x30', controlMeasure: '', observation: '' },\r\n\t\t{ missingFeature: 'Pretiles Aljibe', controlMeasure: '', observation: '' },\r\n\t\t{ missingFeature: 'Bermas (tránsito peatonal)', controlMeasure: '', observation: '' },\r\n\t\t{ missingFeature: 'Pretiles contorno caseta', controlMeasure: '', observation: '' },\r\n\t\t{ missingFeature: 'Accesos vehículos y personal', controlMeasure: '', observation: '' },\r\n\t\t{ missingFeature: 'Pretiles contorno', controlMeasure: '', observation: '' },\r\n\t\t{ missingFeature: 'Nivelación plataforma', controlMeasure: '', observation: '' },\r\n\t\t{ missingFeature: 'Estacionamientos', controlMeasure: '', observation: '' },\r\n\t\t{ missingFeature: 'Pretil contorno y tope baño', controlMeasure: '', observation: '' },\r\n\t],\r\n\trequiresGeotechnicalEvaluation: '',\r\n\tmaterialRisk: 'Accidente a personas por falla de terreno',\r\n\tcriticalControl: [\r\n\t\t{ key: 1, label: 'Sistema Control de Terreno', answer: 'No' },\r\n\t\t{ key: 2, label: 'Ejecución / Operación y Cumplimiento del Diseño Geotécnico', answer: 'No' },\r\n\t\t{ key: 3, label: 'Segregación de Áreas', answer: 'No' },\r\n\t],\r\n\tplatformSignatures: [\r\n\t\t{ area: 'Entrega', responsibles: [{ personaName: '', signed: false, position: 0, signature: '' }] },\r\n\t\t{ area: 'Recibe', responsibles: [{ personaName: '', signed: false, position: 0, signature: '' }] },\r\n\t],\r\n};\r\n\r\nexport function platformDeliveryReducer(state = INITIAL_STATE, { type, payload }) {\r\n\tswitch (type) {\r\n\t\tcase '@platform/updateLoading':\r\n\t\t\treturn { ...state, loading: payload };\r\n\t\tcase '@platform/updateRootProps':\r\n\t\t\t//recuperation, dip, azimuth, depth, sector\r\n\t\t\tconst { prop, value } = payload;\r\n\r\n\t\t\tstate[prop] = value;\r\n\t\t\treturn { ...state };\r\n\r\n\t\tcase '@platform/setControlMeasure':\r\n\t\t\treturn { ...state, controlMeasures: payload };\r\n\r\n\t\tcase '@platform/updateRevisionProp':\r\n\t\t\tconst { value: valuerevision, index: indexrevision } = payload;\r\n\t\t\tconst revisions = state.revisions;\r\n\r\n\t\t\trevisions[indexrevision]['answer'] = valuerevision;\r\n\t\t\treturn { ...state, revisions };\r\n\r\n\t\tcase '@platform/addControlMeasure':\r\n\t\t\treturn { ...state, controlMeasures: [...state.controlMeasures, { missingFeature: '', controlMeasure: '', observation: '' }] };\r\n\r\n\t\tcase '@platform/updateControlMeasureProp':\r\n\t\t\tconst { prop: propcontrolmeasure, value: valuecontrolmeasure, index: indexcontrolmeasure } = payload;\r\n\t\t\tlet controlMeasures = state.controlMeasures;\r\n\r\n\t\t\tcontrolMeasures[indexcontrolmeasure][propcontrolmeasure] = valuecontrolmeasure;\r\n\t\t\treturn { ...state, controlMeasures };\r\n\r\n\t\tcase '@platform/updateCriticalControlProp':\r\n\t\t\tconst { value: valuecriticalcontrol, index: indexcriticalcontrol } = payload;\r\n\t\t\tlet criticalControl = state.criticalControl;\r\n\r\n\t\t\tcriticalControl[indexcriticalcontrol]['answer'] = valuecriticalcontrol;\r\n\t\t\treturn { ...state, criticalControl };\r\n\r\n\t\tcase '@platform/updateSignatureProps':\r\n\t\t\tconst { areaIndex: areaindexupd, responsibleIndex: responsibleindexupd, prop: propupd, value: valueupd } = payload;\r\n\t\t\tconst signArray = state.platformSignatures;\r\n\r\n\t\t\tsignArray[areaindexupd].responsibles[responsibleindexupd][propupd] = valueupd;\r\n\t\t\treturn { ...state, platformSignatures: signArray };\r\n\r\n\t\tcase '@platform/setModalConfig':\r\n\t\t\treturn { ...state, modalConfig: { ...state.modalConfig, ...payload } };\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","export const PlatformValidations = {\r\n\tcheckRevision: (platform) => {\r\n\t\tlet errors = {};\r\n\t\tlet controlMeasures = [];\r\n\t\tlet failExists = false;\r\n\r\n\t\tplatform.revisions.forEach((revision) => {\r\n\t\t\tif (revision.answer === 'No') {\r\n\t\t\t\tconst find = platform.controlMeasures.find((control) => control.missingFeature === revision.label);\r\n\t\t\t\terrors['revision'] = 'Requerido';\r\n\t\t\t\tcontrolMeasures.push({ missingFeature: revision.label, controlMeasure: find?.controlMeasure ?? '', observation: find?.observation ?? '' });\r\n\t\t\t\trevision.answer === 'No' && (failExists = true);\r\n\t\t\t}\r\n\t\t});\r\n\t\tfailExists && (errors['failExists'] = 'Existen revisiones que no cumplen.');\r\n\r\n\t\treturn { data: platform, errors, controlMeasures };\r\n\t},\r\n\tcheckEmpty: (platform) => {\r\n\t\tlet errors = {};\r\n\r\n\t\t(!platform.recuperation || platform.recuperation.trim() === '') && (errors['recuperation'] = 'Requerido');\r\n\t\t(!platform.dip || platform.dip.trim() === '') && (errors['dip'] = 'Requerido');\r\n\t\t(!platform.azimuth || platform.azimuth.trim() === '') && (errors['azimuth'] = 'Requerido');\r\n\t\t(!platform.depth || platform.depth.trim() === '') && (errors['depth'] = 'Requerido');\r\n\t\t(!platform.sector || platform.sector.trim() === '') && (errors['sector'] = 'Requerido');\r\n\r\n\t\tlet failExists = false;\r\n\r\n\t\tplatform.revisions.forEach((revision) => {\r\n\t\t\trevision.answer === 'No' && (errors['revision'] = 'Requerido');\r\n\t\t\trevision.answer === 'No' && (failExists = true);\r\n\t\t});\r\n\r\n\t\tfailExists && (errors['failExists'] = 'Existen revisiones que no cumplen.');\r\n\t\t// Errores en los inputs de medidas de control\r\n\r\n\t\terrors['revision'] &&\r\n\t\t\tplatform.controlMeasures.forEach((measure, k) => {\r\n\t\t\t\tmeasure.missingFeature.trim() === '' && (errors[`missingFeature${k}`] = 'Caracteristica faltante requerida');\r\n\t\t\t\tmeasure.controlMeasure.trim() === '' && (errors[`controlMeasure${k}`] = 'Medida de control es requerido');\r\n\t\t\t});\r\n\r\n\t\tplatform.platformSignatures &&\r\n\t\t\tplatform.platformSignatures.forEach((sign) => {\r\n\t\t\t\tsign.responsibles.forEach((resp, respIndex) => {\r\n\t\t\t\t\t(!resp.personaName || resp.personaName.trim() === '') &&\r\n\t\t\t\t\t\t(errors[`personaName-${sign.area}-${respIndex}`] = 'Nombre responsable es requerido');\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\tif (!platform.materialRisk || platform.materialRisk.trim() === '') errors[`materialRisk`] = 'Requerido';\r\n\r\n\t\tif (!errors[`missingFeature0`] || !errors[`controlMeasure0`]) delete errors['revision'];\r\n\r\n\t\tconst errorLength = Object.keys(errors).length;\r\n\t\tlet containError = !!errorLength;\r\n\r\n\t\tif (errors && errors['failExists'] && errorLength === 1) containError = false;\r\n\r\n\t\treturn { data: platform, containError: containError, errors };\r\n\t},\r\n};\r\n","import Loading from '@outlier-spa/loading';\r\nimport { DetailsOutlined, SaveTone } from '@outlier-spa/mine-icon';\r\nimport Banner from '@outlier-spa/mine/dist/components/Banner';\r\nimport Button, { BigIconButton } from '@outlier-spa/mine/dist/components/Button';\r\nimport Input, { TextArea } from '@outlier-spa/mine/dist/components/Input';\r\nimport Modal from '@outlier-spa/mine/dist/components/Modal';\r\nimport { Section, SectionHeader } from '@outlier-spa/mine/dist/components/Section';\r\nimport SwitchOptions from '@outlier-spa/mine/dist/components/SwitchOptions';\r\nimport { colors } from '@outlier-spa/mine/dist/config/themes';\r\nimport Save from 'assets/Save';\r\nimport Signature from 'assets/Signature';\r\nimport { TitleInput } from 'components/Common';\r\nimport DrawSignature, { defaultProps as defaultDrawSignatureProps } from 'components/DrawSignature';\r\nimport SignatureViewer from 'components/DrawSignature/SignatureViewer';\r\nimport FixedHeader, { DetailsHeader } from 'components/Headers';\r\nimport SimpleTableCheck from 'components/SimpleTableCheck';\r\nimport { REQUEST_STATE } from 'pages/RequestArea/utils';\r\nimport React, { useEffect, useReducer, useRef } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { INITIAL_STATE, platformDeliveryReducer } from 'reducer/platformDeliveryReducer';\r\nimport { DescriptionText } from 'styled';\r\nimport { toBase64 } from 'utils';\r\nimport { db } from 'utils/database';\r\nimport indexDb from 'utils/db';\r\nimport { PlatformValidations } from './Validation';\r\n\r\nconst criticalControlOption = [{ content: 'Si' }, { content: 'No' }, { content: 'N/A' }];\r\n\r\nfunction updateModal(payload) {\r\n\treturn {\r\n\t\ttype: '@platform/setModalConfig',\r\n\t\tpayload: { ...payload },\r\n\t};\r\n}\r\n\r\nfunction updateSignatureProp({ areaIndex, responsibleIndex, prop, value }) {\r\n\treturn { type: '@platform/updateSignatureProps', payload: { areaIndex: areaIndex, responsibleIndex: responsibleIndex, prop: prop, value: value } };\r\n}\r\n\r\nfunction updateLoading(active = true) {\r\n\treturn { type: '@platform/loading', payload: active };\r\n}\r\n\r\nconst PlatformDetails = React.forwardRef(({ sector, requestId, ...rest }, ref) => {\r\n\tconst modalRef = useRef();\r\n\tconst signatureRef = useRef();\r\n\tconst loadingRef = useRef();\r\n\tconst platformDetails = useSelector((selector) => selector.baseReducer);\r\n\tconst offline = useSelector((selector) => selector.baseReducer.offline);\r\n\tconst [details, dispatch] = useReducer(platformDeliveryReducer, { ...INITIAL_STATE, ...platformDetails.platformSelected });\r\n\tconst history = useHistory();\r\n\r\n\tconst handleOpenModalSave = (type) => {\r\n\t\tswitch (type) {\r\n\t\t\tcase 'savePlatform':\r\n\t\t\t\tmodalRef.current.open();\r\n\t\t\t\tconst contentOffline = 'Actualmente no esta conectado a internet, cuando se encuentre señal se sincronizara automaticamente';\r\n\t\t\t\tconst contentOnline = 'Realmente desea guardar la entrega de plataforma.';\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tupdateModal({\r\n\t\t\t\t\t\ttitle: 'Guardar entrega de plataforma',\r\n\t\t\t\t\t\tsize: 'small',\r\n\t\t\t\t\t\tcontent: `${contentOnline}  ${offline ? contentOffline : ''}`,\r\n\t\t\t\t\t\tonSubmit: () => save(),\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleOpenSignatureModal = (areaIndex, responsibleIndex, prop) => {\r\n\t\tdispatch(\r\n\t\t\tupdateModal({\r\n\t\t\t\ttitle: 'Firma',\r\n\t\t\t\tsize: 'large',\r\n\t\t\t\tonSubmit: () => onSubmitModal(areaIndex, responsibleIndex, prop),\r\n\t\t\t\tcontent: (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<div className='signature-draw-container'>\r\n\t\t\t\t\t\t\t<DrawSignature ref={signatureRef} {...defaultDrawSignatureProps} canvasWidth='100%' canvasHeight='80vh' />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<DescriptionText style={{ marginTop: 20 }}>\r\n\t\t\t\t\t\t\tLa firma realizada en este recuadro, será utilizada únicamente en este documento, y no será guardada o manipulada fuera de este.\r\n\t\t\t\t\t\t</DescriptionText>\r\n\t\t\t\t\t</>\r\n\t\t\t\t),\r\n\t\t\t})\r\n\t\t);\r\n\t\tmodalRef.current.open();\r\n\t};\r\n\r\n\tconst onSubmitModal = (areaIndex, responsibleIndex, prop) => {\r\n\t\tsignatureRef.current.getBase64Data(async function (value) {\r\n\t\t\tdispatch(updateSignatureProp({ areaIndex, responsibleIndex, prop, value: await toBase64(value) }));\r\n\t\t});\r\n\r\n\t\tdispatch(updateSignatureProp({ areaIndex, responsibleIndex, prop: 'signed', value: true }));\r\n\t\tmodalRef.current.close();\r\n\t};\r\n\r\n\tconst updateSignatureProps = (areaIndex, responsibleIndex, prop, value) => {\r\n\t\tdispatch(updateSignatureProp({ areaIndex, responsibleIndex, prop, value }));\r\n\t};\r\n\r\n\tconst updateRevisionProp = (value, index) => {\r\n\t\tdispatch({ type: '@platform/updateRevisionProp', payload: { value, index } });\r\n\t\tcheckRevisions();\r\n\t};\r\n\r\n\tconst updateControlMeasureProp = (prop, value, index) => {\r\n\t\tdispatch({ type: '@platform/updateControlMeasureProp', payload: { prop, value, index } });\r\n\t};\r\n\r\n\tconst updateCriticalControlProp = (value, index) => {\r\n\t\tdispatch({ type: '@platform/updateCriticalControlProp', payload: { value, index } });\r\n\t};\r\n\r\n\tconst updateRootProps = (prop, value) => {\r\n\t\tdispatch({ type: '@platform/updateRootProps', payload: { prop, value } });\r\n\t};\r\n\r\n\tconst save = async () => {\r\n\t\tconst { data, containError } = check();\r\n\t\tconst signMeta = { current: 0, total: 0 };\r\n\t\tconst formData = new FormData();\r\n\r\n\t\tmodalRef.current.close();\r\n\t\tupdateLoading();\r\n\r\n\t\tif (containError) {\r\n\t\t\tupdateLoading(false);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (offline) {\r\n\t\t\tindexDb\r\n\t\t\t\t.table('platformDeliveryQueue')\r\n\t\t\t\t.add(JSON.parse(JSON.stringify(data)))\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\thistory.goBack();\r\n\t\t\t\t})\r\n\t\t\t\t.finally(() => {\r\n\t\t\t\t\tupdateLoading(false);\r\n\t\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdata.platformSignatures.forEach((signature, index) => {\r\n\t\t\tsignMeta['total'] += signature.responsibles.length;\r\n\t\t\tsignMeta['current'] += signature.responsibles.filter((r) => r.signed).length;\r\n\t\t\tsignature.responsibles.forEach((responsible) => {\r\n\t\t\t\tvar file = responsible.signature;\r\n\t\t\t\tformData.append(`file-${signature.area}-${index}-${responsible.position}-${responsible.personaName}`, file);\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tdata.state = signMeta.current === signMeta.total ? REQUEST_STATE.APPROVED : REQUEST_STATE.CREATED;\r\n\r\n\t\tdb.post('PlatformDelivery/save', data, { contentType: 'application/json' })\r\n\t\t\t.then((resp) => {})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tupdateLoading(false);\r\n\t\t\t\thistory.goBack();\r\n\t\t\t});\r\n\t};\r\n\r\n\tconst checkRevisions = (error) => {\r\n\t\tvar validation = PlatformValidations.checkRevision(details);\r\n\r\n\t\tdispatch({ type: '@platform/setControlMeasure', payload: validation.controlMeasures });\r\n\t\tupdateRootProps('errors', validation.errors);\r\n\t};\r\n\r\n\tconst check = () => {\r\n\t\tvar validation = PlatformValidations.checkEmpty(details);\r\n\r\n\t\tupdateRootProps('errors', validation.errors);\r\n\t\treturn validation;\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tupdateLoading();\r\n\r\n\t\tif (requestId) updateLoading(false);\r\n\t\treturn () => updateLoading(false);\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Loading ref={loadingRef} active={details.loading}></Loading>\r\n\t\t\t<Modal ref={modalRef} size='large' {...details.modalConfig}>\r\n\t\t\t\t<div className='pd-14 '>{details.modalConfig.content}</div>\r\n\t\t\t</Modal>\r\n\t\t\t<>\r\n\t\t\t\t<div className='platform-delivery-container'>\r\n\t\t\t\t\t<FixedHeader\r\n\t\t\t\t\t\tleft={<HeaderLeft data={details} />}\r\n\t\t\t\t\t\tright={<HeaderRight onClick={handleOpenModalSave} showSave={!(details.state === REQUEST_STATE.APPROVED)} />}></FixedHeader>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<DetailsHeader icon={<DetailsOutlined />} text='Encabezado' />\r\n\t\t\t\t\t\t<div className='flex-vgap-20' style={{ marginBottom: 30 }}>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<TitleInput>Recomendación</TitleInput>\r\n\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\tisError={details.errors && details.errors['recuperation']}\r\n\t\t\t\t\t\t\t\t\tmessage={details.errors && details.errors['recuperation']}\r\n\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\tplaceholder='Ingrese recuperación'\r\n\t\t\t\t\t\t\t\t\tvalue={details.recuperation}\r\n\t\t\t\t\t\t\t\t\tstyle={{ width: 340 }}\r\n\t\t\t\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\t\t\t\tdetails.errors && value.trim() !== '' && delete details.errors['recuperation'];\r\n\t\t\t\t\t\t\t\t\t\tupdateRootProps('recuperation', value);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<TitleInput>DIP</TitleInput>\r\n\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\tisError={details.errors && details.errors['dip']}\r\n\t\t\t\t\t\t\t\t\tmessage={details.errors && details.errors['dip']}\r\n\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\tplaceholder='Ingrese DIP'\r\n\t\t\t\t\t\t\t\t\tvalue={details.dip}\r\n\t\t\t\t\t\t\t\t\tstyle={{ width: 340 }}\r\n\t\t\t\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\t\t\t\tdetails.errors && value.trim() !== '' && delete details.errors['dip'];\r\n\t\t\t\t\t\t\t\t\t\tupdateRootProps('dip', value);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<TitleInput>Azimuth</TitleInput>\r\n\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\tisError={details.errors && details.errors['azimuth']}\r\n\t\t\t\t\t\t\t\t\tmessage={details.errors && details.errors['azimuth']}\r\n\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\tplaceholder='Ingrese azimuth'\r\n\t\t\t\t\t\t\t\t\tvalue={details.azimuth}\r\n\t\t\t\t\t\t\t\t\tstyle={{ width: 340 }}\r\n\t\t\t\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\t\t\t\tdetails.errors && value.trim() !== '' && delete details.errors['azimuth'];\r\n\t\t\t\t\t\t\t\t\t\tupdateRootProps('azimuth', value);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<TitleInput>Profundidad programada</TitleInput>\r\n\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\tisError={details.errors && details.errors['depth']}\r\n\t\t\t\t\t\t\t\t\tmessage={details.errors && details.errors['depth']}\r\n\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\tplaceholder='Ingrese profundidad programada'\r\n\t\t\t\t\t\t\t\t\tvalue={details.depth}\r\n\t\t\t\t\t\t\t\t\tstyle={{ width: 340 }}\r\n\t\t\t\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\t\t\t\tdetails.errors && value.trim() !== '' && delete details.errors['depth'];\r\n\t\t\t\t\t\t\t\t\t\tupdateRootProps('depth', value);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<TitleInput>Sector</TitleInput>\r\n\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\tisError={details.errors && details.errors['sector']}\r\n\t\t\t\t\t\t\t\t\tmessage={details.errors && details.errors['sector']}\r\n\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\tplaceholder='Ingrese sector'\r\n\t\t\t\t\t\t\t\t\tvalue={details.sector}\r\n\t\t\t\t\t\t\t\t\tstyle={{ width: 340 }}\r\n\t\t\t\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\t\t\t\tdetails.errors && value.trim() !== '' && delete details.errors['sector'];\r\n\t\t\t\t\t\t\t\t\t\tupdateRootProps('sector', value);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* Revisión de plataforma de sondajes */}\r\n\t\t\t\t\t\t<DetailsHeader icon={<DetailsOutlined />} text='Revisión de plataforma de sondajes' />\r\n\t\t\t\t\t\t<div style={{ marginBottom: 30 }}>\r\n\t\t\t\t\t\t\t<SimpleTableCheck\r\n\t\t\t\t\t\t\t\tdisabled={details.state === REQUEST_STATE.APPROVED}\r\n\t\t\t\t\t\t\t\tdata={details.revisions}\r\n\t\t\t\t\t\t\t\tonChange={(revision) => {\r\n\t\t\t\t\t\t\t\t\tupdateRevisionProp(revision.content, revision.elementPosition);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{details.controlMeasures && details.controlMeasures.length > 0 && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Banner type='danger' style={{ marginBottom: 10 }}>\r\n\t\t\t\t\t\t\t\t\t<strong>Nota:</strong> Si alguna de las condiciones de las características de la plataforma NO CUMPLE se debe APLICAR las medidas de\r\n\t\t\t\t\t\t\t\t\tcontrol para definirla como PLATAFORMA EXCEPCIONAL\r\n\t\t\t\t\t\t\t\t</Banner>\r\n\r\n\t\t\t\t\t\t\t\t{/* Medidas de control */}\r\n\t\t\t\t\t\t\t\t<DetailsHeader icon={<DetailsOutlined />} text='Medidas de control' />\r\n\t\t\t\t\t\t\t\t<Section style={{ marginBottom: 30 }}>\r\n\t\t\t\t\t\t\t\t\t<SectionHeader left='Ítems' />\r\n\t\t\t\t\t\t\t\t\t<div className='pd-14 flex-vgap-14'>\r\n\t\t\t\t\t\t\t\t\t\t{details.controlMeasures?.map((measure, key) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Section key={key} type='inner'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<SectionHeader left={`Item ${key + 1}`} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='pd-14 flex-vgap-20'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TitleInput>Característica plataforma faltante</TitleInput>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TextArea\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisError={details.errors && details.errors[`missingFeature${key}`]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage={details.errors && details.errors[`missingFeature${key}`]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdarken\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Ingrese una caracteristica de plataforma faltante'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={measure.missingFeature}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ maxWidth: 860 }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdetails.errors && value.trim() !== '' && delete details.errors[`missingFeature${key}`];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateControlMeasureProp('missingFeature', value, key);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TitleInput>Medidas de control</TitleInput>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TextArea\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={details.state === REQUEST_STATE.APPROVED}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisError={details.errors && details.errors[`controlMeasure${key}`]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage={details.errors && details.errors[`controlMeasure${key}`]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdarken\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Ingrese una medida de control'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={measure.controlMeasure}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ maxWidth: 860 }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdetails.errors && value.trim() !== '' && delete details.errors[`controlMeasure${key}`];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateControlMeasureProp('controlMeasure', value, key);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TitleInput>Observaciones</TitleInput>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TextArea\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={details.state === REQUEST_STATE.APPROVED}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisError={details.errors && details.errors[`observation${key}`]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage={details.errors && details.errors[`observation${key}`]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdarken\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Ingrese una observación'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={measure.observation}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ maxWidth: 860 }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdetails.errors && value.trim() !== '' && delete details.errors[`observation${key}`];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateControlMeasureProp('observation', value, key);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Section>\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</Section>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t{/* Controles Críticos */}\r\n\t\t\t\t\t\t<DetailsHeader icon={<DetailsOutlined />} text='Controles Críticos' />\r\n\t\t\t\t\t\t<div className='flex-vgap-20' style={{ marginBottom: 30 }}>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<TitleInput>Requiere evaluación geotécnica</TitleInput>\r\n\t\t\t\t\t\t\t\t<SwitchOptions\r\n\t\t\t\t\t\t\t\t\tdisabled={details.state === REQUEST_STATE.APPROVED}\r\n\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\tindex={details.requiresGeotechnicalEvaluation ? 0 : 1}\r\n\t\t\t\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\t\t\t\tupdateRootProps('requiresGeotechnicalEvaluation', value.content === 'Si');\r\n\t\t\t\t\t\t\t\t\t}}></SwitchOptions>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{details.requiredRgo && (\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<TitleInput>R-GO</TitleInput>\r\n\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\tdisabled={details.state === REQUEST_STATE.APPROVED}\r\n\t\t\t\t\t\t\t\t\t\tvalue={details.rgoName}\r\n\t\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='Ingrese RGO'\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ width: 340 }}></Input>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<TitleInput>Riesgo Material</TitleInput>\r\n\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\tdisabled={details.state === REQUEST_STATE.APPROVED}\r\n\t\t\t\t\t\t\t\t\tisError={details.errors && details.errors['materialRisk']}\r\n\t\t\t\t\t\t\t\t\tmessage={details.errors && details.errors['materialRisk']}\r\n\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\tvalue={details.materialRisk}\r\n\t\t\t\t\t\t\t\t\tplaceholder='Accidente a personas por falla de terreno'\r\n\t\t\t\t\t\t\t\t\tstyle={{ width: 340 }}\r\n\t\t\t\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\t\t\t\tdetails.errors && value.trim() !== '' && delete details.errors['materialRisk'];\r\n\t\t\t\t\t\t\t\t\t\tupdateRootProps('materialRisk', value);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div style={{ marginBottom: 30 }}>\r\n\t\t\t\t\t\t\t\t<SimpleTableCheck\r\n\t\t\t\t\t\t\t\t\tdisabled={details.state === REQUEST_STATE.APPROVED}\r\n\t\t\t\t\t\t\t\t\tdata={details.criticalControl}\r\n\t\t\t\t\t\t\t\t\toptions={criticalControlOption}\r\n\t\t\t\t\t\t\t\t\theaderProp={{ label: 'Control critico', secondaryLabel: 'Si / No / No Aplica' }}\r\n\t\t\t\t\t\t\t\t\tonChange={(control) => updateCriticalControlProp(control.content, control.elementPosition)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* Firmas Responsables */}\r\n\t\t\t\t\t\t<DetailsHeader icon={<Signature />} text='Firmas Responsables' />\r\n\r\n\t\t\t\t\t\t<div className='flex-vgap-20'>\r\n\t\t\t\t\t\t\t{details.platformSignatures?.map(({ area, responsibles }, areaIndex) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Section key={areaIndex} style={{ marginBottom: 20 }}>\r\n\t\t\t\t\t\t\t\t\t\t<SectionHeader left={`${area} plataforma de perforación`}></SectionHeader>\r\n\t\t\t\t\t\t\t\t\t\t<div className='pd-14'>\r\n\t\t\t\t\t\t\t\t\t\t\t{responsibles.map(({ personaName, signed }, responsibleIndex) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Section type='inner' style={{ marginBottom: 14 }} key={responsibleIndex}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='pd-14 signature-section'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TitleInput>Nombres</TitleInput>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={details.state === REQUEST_STATE.APPROVED || details.state === REQUEST_STATE.CREATED}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisError={details.errors && details.errors[`personaName-${area}-${responsibleIndex}`]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage={details.errors && details.errors[`personaName-${area}-${responsibleIndex}`]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={personaName}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ maxWidth: 560, marginBottom: 20 }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Escriba nombres y apellidos'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdetails.errors && value.trim() !== '' && delete details.errors[`personaName-${area}-${responsibleIndex}`];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateSignatureProps(areaIndex, responsibleIndex, 'personaName', value);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TitleInput>Firma</TitleInput>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SignatureViewer\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={signed && (details.state === REQUEST_STATE.APPROVED || details.state === REQUEST_STATE.CREATED)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsigned={signed}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleOpenSignatureModal(areaIndex, responsibleIndex, 'signature')}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Section>\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</Section>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t\t<div style={{ marginTop: 30, marginBottom: 60 }}>\r\n\t\t\t\t{details.state !== REQUEST_STATE.APPROVED && (\r\n\t\t\t\t\t<BigIconButton type='green' icon={<SaveTone />} onClick={() => handleOpenModalSave('savePlatform')}>\r\n\t\t\t\t\t\tGuardar Cambios\r\n\t\t\t\t\t</BigIconButton>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n});\r\n\r\nexport default PlatformDetails;\r\n\r\nfunction HeaderLeft({ data }) {\r\n\tconst signatures = { current: 0, total: 0 };\r\n\r\n\tdata.platformSignatures.forEach((signature) => {\r\n\t\tvar responsibles = signature.responsibles;\r\n\t\tsignatures.total += responsibles.length;\r\n\t\tsignatures.current += responsibles.filter((responsible) => responsible.signed).length;\r\n\t});\r\n\r\n\tconst color = signatures.current < signatures.total ? colors.red : colors.skyblue;\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<p>Formulario entrega de plataformas</p>\r\n\t\t\t<span style={{ color }}>\r\n\t\t\t\t{signatures.current}/{signatures.total} Firmas necesarias\r\n\t\t\t</span>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n// Acciones del lado derecho de la cabecera\r\nfunction HeaderRight({ onClick, showSave = true }) {\r\n\treturn (\r\n\t\t<div className='flex flex-center'>\r\n\t\t\t{showSave && (\r\n\t\t\t\t<Button type='green' prefix={<Save style={{ width: 14, height: 14 }} />} onClick={() => onClick && onClick('savePlatform')}>\r\n\t\t\t\t\tGuardar Cambios\r\n\t\t\t\t</Button>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n","import Loading from '@outlier-spa/loading';\r\nimport { DillFilled, ProbingTone } from '@outlier-spa/mine-icon';\r\nimport Modal from '@outlier-spa/mine/dist/components/Modal';\r\nimport { Section, SectionHeader } from '@outlier-spa/mine/dist/components/Section';\r\nimport Tag from '@outlier-spa/mine/dist/components/Tag';\r\nimport { colors } from '@outlier-spa/mine/dist/config/themes';\r\nimport { CachePlatforms, GetCachePlatform } from 'actions';\r\nimport Parachute from 'assets/Parachute';\r\nimport { DetailsHeader } from 'components/Headers';\r\nimport NotFound from 'components/NotFound';\r\nimport PdfViewer from 'components/PdfViewer';\r\nimport useDebouncedEffect from 'hooks/useDebouncedEffect';\r\nimport React, { useCallback, useRef, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Route, Switch, useHistory } from 'react-router-dom';\r\nimport { DescriptionText, Dot } from 'styled';\r\nimport { db } from 'utils/database';\r\nimport Details from './Details';\r\nimport './styles.scss';\r\n\r\nconst documentUrl = `${process.env.REACT_APP_API_URL}PlatformDelivery/getDocument/`;\r\n\r\nfunction getPlatforms(requestId, dispatch, setLoading) {\r\n\tGetCachePlatform(requestId)\r\n\t\t.then((resp) => {\r\n\t\t\tdispatch(resp);\r\n\t\t\tdispatch({ type: '@base/updateRootProp', payload: { prop: 'platformDeliverySync', value: true } });\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tdispatch({ type: '@base/updateRootProp', payload: { prop: 'platformDeliverySync', value: false } });\r\n\t\t})\r\n\t\t.finally(() => {\r\n\t\t\tsetLoading(false);\r\n\t\t});\r\n}\r\n\r\nfunction PlatformDelivery(props) {\r\n\tconst { requestId } = props;\r\n\tconst docRef = useRef();\r\n\tconst history = useHistory();\r\n\tconst dispatch = useDispatch();\r\n\tconst offline = useSelector((selector) => selector.baseReducer.offline);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst platformDelivery = useSelector((selector) => selector.baseReducer.platformDelivery);\r\n\tconst [modalConfig, setModalConfig] = useState({ active: false });\r\n\r\n\tconst findPlatforms = () => {\r\n\t\tsetLoading(true);\r\n\r\n\t\tif (offline) {\r\n\t\t\tgetPlatforms(requestId, dispatch, setLoading);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdb.get(`PlatformDelivery/getByAreaRequest/${requestId}`)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tif (response.data) {\r\n\t\t\t\t\tconst { data } = response;\r\n\t\t\t\t\t// Guarda los datos en local\r\n\t\t\t\t\tdata.forEach((value) => {\r\n\t\t\t\t\t\tCachePlatforms(value)\r\n\t\t\t\t\t\t\t.then((resp) => {\r\n\t\t\t\t\t\t\t\tdispatch({ type: '@base/updateRootProp', payload: { prop: 'platformDeliverySync', value: true } });\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\t\t\tdispatch({ type: '@base/updateRootProp', payload: { prop: 'platformDeliverySync', value: false } });\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tdispatch({ type: '@base/replacePlatform', payload: data });\r\n\t\t\t\t\tsetModalConfig({ ...modalConfig });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\t// Obtiene los datos en cache\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t});\r\n\t};\r\n\r\n\tconst handleClickCard = (platform) => {\r\n\t\tdispatch({ type: '@base/updateRootProp', payload: { prop: 'platformSelected', value: platform } });\r\n\t\thistory.push({\r\n\t\t\tpathname: `${props.match.url}/platform/${platform.holeId}`,\r\n\t\t\tstate: platform,\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleDownload = (holeid) => {\r\n\t\tsetModalConfig({\r\n\t\t\t...modalConfig,\r\n\t\t\tcancelProps: { visible: false },\r\n\t\t\tokProps: { text: 'Aceptar' },\r\n\t\t\tsize: 'large',\r\n\t\t\tactive: true,\r\n\t\t\tholeid: holeid,\r\n\t\t\turl: `${documentUrl}${holeid}`,\r\n\t\t\tonCancel: () => {\r\n\t\t\t\tsetModalConfig({ ...modalConfig, active: false });\r\n\t\t\t},\r\n\t\t\tonSubmit: () => {\r\n\t\t\t\tsetModalConfig({ ...modalConfig, active: false });\r\n\t\t\t},\r\n\t\t});\r\n\t};\r\n\r\n\tuseDebouncedEffect(\r\n\t\t() => {\r\n\t\t\tfindPlatforms();\r\n\t\t},\r\n\t\t300,\r\n\t\t[]\r\n\t);\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Loading active={loading} />\r\n\t\t\t<Modal href={docRef} {...modalConfig}>\r\n\t\t\t\t<div className='pd-14'>\r\n\t\t\t\t\t<PdfViewer url={modalConfig.url} id={modalConfig.holeid} />\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t\t<Switch>\r\n\t\t\t\t<Route path={`${props.match.path}/platform/:holeid`} render={(routeProps) => <Details {...routeProps} />}></Route>\r\n\t\t\t\t<Route\r\n\t\t\t\t\tpath={`${props.match.path}`}\r\n\t\t\t\t\trender={(routeProps) => (\r\n\t\t\t\t\t\t<PlatformDeliveryIndex {...routeProps} data={platformDelivery} onClick={handleClickCard} onDownload={handleDownload} />\r\n\t\t\t\t\t)}></Route>\r\n\t\t\t</Switch>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default PlatformDelivery;\r\n\r\nfunction PlatformDeliveryIndex({ data, onClick, onDownload }) {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{data && data.length > 0 && <DetailsHeader icon={<DillFilled style={{ transform: 'rotateZ(45deg)' }} />} text='Pozos propuestos' />}\r\n\t\t\t<div className='flex flex-vgap-14 flex-1 flex-column'>\r\n\t\t\t\t{data && data.length > 0 ? (\r\n\t\t\t\t\tdata?.map((platform) => {\r\n\t\t\t\t\t\t// Conteo de firmas\r\n\t\t\t\t\t\tconst signatures = { current: 0, total: 0 };\r\n\r\n\t\t\t\t\t\tplatform.platformSignatures.forEach((signature) => {\r\n\t\t\t\t\t\t\tvar responsibles = signature.responsibles;\r\n\t\t\t\t\t\t\tsignatures.total += responsibles.length;\r\n\t\t\t\t\t\t\tsignatures.current += responsibles.filter((responsible) => responsible.signed).length;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<HoleCard\r\n\t\t\t\t\t\t\t\tkey={platform.holeId}\r\n\t\t\t\t\t\t\t\tstate={platform.state}\r\n\t\t\t\t\t\t\t\tdocumentName={platform.documentName}\r\n\t\t\t\t\t\t\t\tcurrentSignatures={signatures.current}\r\n\t\t\t\t\t\t\t\ttotalSignature={signatures.total}\r\n\t\t\t\t\t\t\t\tholeid={platform.holeId}\r\n\t\t\t\t\t\t\t\tonClick={() => onClick && onClick(platform)}\r\n\t\t\t\t\t\t\t\tonClickDocument={onDownload}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className='flex flex-middle flex-1'>\r\n\t\t\t\t\t\t<NotFound\r\n\t\t\t\t\t\t\ticon={(props) => <Parachute {...props} />}\r\n\t\t\t\t\t\t\tprimaryText='Descarga de datos'\r\n\t\t\t\t\t\t\tsecondaryText='Debido a las limitaciones de acceso a internet, debe descargar los datos de los sondajes antes de dirigirse a una zona sin cobertura.'\r\n\t\t\t\t\t\t\tbuttonProps={{ text: 'Descargar datos' }}\r\n\t\t\t\t\t\t\tonClick={onDownload}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n//\r\nfunction HoleCard({ onClick, holeid, currentSignatures = 0, totalSignature = 2, documentName, onClickDocument }) {\r\n\tconst color = currentSignatures < totalSignature ? colors.red : colors.skyblue;\r\n\treturn (\r\n\t\t<Section onClick={onClick} style={{ fontSize: '1rem', cursor: 'pointer' }} className='platform-card translation-y-hover'>\r\n\t\t\t<SectionHeader\r\n\t\t\t\tleft={\r\n\t\t\t\t\t<div style={{}}>\r\n\t\t\t\t\t\t<div style={{ display: 'inline-block' }}>\r\n\t\t\t\t\t\t\t<ProbingTone style={{ fontSize: 26, verticalAlign: 'middle' }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<span style={{ marginLeft: 10 }}>{holeid}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t\t<SectionHeader\r\n\t\t\t\tleft={\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<span style={{ color: color }}>\r\n\t\t\t\t\t\t\t<span>{currentSignatures}</span>/<span>{totalSignature}</span> necesarias\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<Dot />\r\n\r\n\t\t\t\t\t\t<DescriptionText\r\n\t\t\t\t\t\t\tas='span'\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\tdocumentName !== 'Sin documento' && onClickDocument && onClickDocument(holeid);\r\n\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tstyle={{ opacity: documentName !== 'Sin documento' ? 1 : 0.5 }}>\r\n\t\t\t\t\t\t\t{documentName}\r\n\t\t\t\t\t\t</DescriptionText>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\tright={\r\n\t\t\t\t\t<Tag colorTranslucence={color} style={{ color }}>\r\n\t\t\t\t\t\t{currentSignatures < totalSignature ? 'Faltan firmas' : 'Autorizada'}\r\n\t\t\t\t\t</Tag>\r\n\t\t\t\t}></SectionHeader>\r\n\t\t</Section>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport TagOriginal from '@outlier-spa/mine/dist/components/Tag';\r\nimport './styles.scss';\r\n\r\nfunction Tag({ children, colorTranslucence, ...rest }) {\r\n\treturn (\r\n\t\t<TagOriginal size='small' rounded colorTranslucence={colorTranslucence} {...rest}>\r\n\t\t\t{children}\r\n\t\t</TagOriginal>\r\n\t);\r\n}\r\n\r\nexport default Tag;\r\n","import Loading from '@outlier-spa/loading';\r\nimport { LocationTone, SearchOutlined } from '@outlier-spa/mine-icon';\r\nimport Button from '@outlier-spa/mine/dist/components/Button';\r\nimport Input from '@outlier-spa/mine/dist/components/Input';\r\nimport { Section, SectionHeader } from '@outlier-spa/mine/dist/components/Section';\r\nimport { colors } from '@outlier-spa/mine/dist/config/themes';\r\nimport { AddAreaRequests, CleanAreaRequests, GetAreaRequests } from 'actions';\r\nimport { Collapse } from 'antd';\r\nimport { BaseLayout } from 'App';\r\nimport { HeaderPage } from 'components/Headers';\r\nimport NotFound from 'components/NotFound';\r\nimport Tag from 'components/Tag';\r\nimport useDebouncedEffect from 'hooks/useDebouncedEffect';\r\nimport React, { useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useHistory } from 'react-router';\r\nimport { DescriptionText, Dot } from 'styled';\r\nimport styled from 'styled-components';\r\nimport { groupBy } from 'utils';\r\nimport { db } from 'utils/database';\r\nimport './collapse-animation.scss';\r\nimport './styles.scss';\r\n\r\nconst { Panel } = Collapse;\r\n\r\nconst WhiteText = styled.span`\r\n\tcolor: ${({ theme }) => theme.fontColor};\r\n`;\r\n\r\nconst stateDict = Object.freeze({\r\n\t1: { text: 'creada', step: 'Solicitud de área', bgColor: colors.skyblue, fontColor: colors.skyblue, opacity: 1 },\r\n\t2: { text: 'aprobada', step: 'Solicitud de área', bgColor: colors.skyblue, fontColor: colors.skyblue, opacity: 1 },\r\n\t3: { text: 'Faltan firmas', step: 'Solicitud de área', bgColor: colors.red, fontColor: colors.red, opacity: 1 },\r\n\t4: { text: 'creada', step: 'Extensión de solicitud', bgColor: colors.skyblue, fontColor: colors.skyblue, opacity: 1 },\r\n\t5: { text: 'aprobada', step: 'Extensión de solicitud', bgColor: colors.skyblue, fontColor: colors.skyblue, opacity: 1 },\r\n\t6: { text: 'Faltan firmas', step: 'Extensión de solicitud', bgColor: colors.red, fontColor: colors.red, opacity: 1 },\r\n\t7: { text: 'creada', step: 'Devolución de área', bgColor: colors.skyblue, fontColor: colors.skyblue, opacity: 1 },\r\n\t8: { text: 'Área devuelta', step: 'Devolución de área', bgColor: '', fontColor: '', opacity: 0.6 },\r\n\t9: { text: 'Faltan firmas', step: 'Devolución de área', bgColor: colors.red, fontColor: colors.red, opacity: 1 },\r\n});\r\n\r\nconst dateformat = 'DD/MM/YYYY';\r\nfunction RequestAreaIndex(props) {\r\n\tconst offline = useSelector((selector) => selector.baseReducer.offline);\r\n\tconst state = useSelector((selector) => selector.baseReducer);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst dispatch = useDispatch();\r\n\tconst history = useHistory();\r\n\tconst [activeCollapseKey, setActiveCollapseKey] = useState(null);\r\n\tconst [filter, setFilter] = useState('');\r\n\tconst areaRequests = useSelector((selector) => selector.baseReducer.areaRequests);\r\n\r\n\tconst handleNewRequest = () => {\r\n\t\thistory.push('/new-request-area');\r\n\t};\r\n\r\n\tconst handleViewRequest = (request) => {\r\n\t\thistory.push(`/request-area-view/${request.requestId}`);\r\n\t};\r\n\r\n\t// Realiza la petición de búsqueda de las solicitudes.\r\n\tconst findAreaRequest = async (value = '') => {\r\n\t\tsetLoading(true);\r\n\t\tif (offline) {\r\n\t\t\tGetAreaRequests()\r\n\t\t\t\t.then((resp) => {\r\n\t\t\t\t\tdispatch(resp);\r\n\r\n\t\t\t\t\tconsole.log(resp);\r\n\t\t\t\t\tvar actives = [];\r\n\t\t\t\t\tresp.payload.forEach(async (payload) => {\r\n\t\t\t\t\t\tactives.push(payload.createAt);\r\n\t\t\t\t\t\tvar rq = await AddAreaRequests(payload);\r\n\t\t\t\t\t\tdispatch(rq);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetActiveCollapseKey(actives);\r\n\t\t\t\t})\r\n\t\t\t\t.finally(() => {\r\n\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tCleanAreaRequests().then((resp) => {\r\n\t\t\tdispatch(resp);\r\n\t\t});\r\n\r\n\t\tvar actives = [];\r\n\t\tdb.get(`RequestArea/getByHole?hole=${value}`)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tif (response.data && response.data.length > 0) {\r\n\t\t\t\t\tvar grouped = groupBy(response.data, 'requestCreateAt');\r\n\t\t\t\t\tvar groupList = Object.keys(grouped).map((key) => {\r\n\t\t\t\t\t\tactives.push(key);\r\n\t\t\t\t\t\treturn { createAt: key, areaRequest: grouped[key] };\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tgroupList.reverse().forEach(async (gl) => {\r\n\t\t\t\t\t\tvar resp = await AddAreaRequests(gl);\r\n\t\t\t\t\t\tdispatch(resp);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t});\r\n\t\tsetActiveCollapseKey(actives);\r\n\t};\r\n\r\n\tuseDebouncedEffect(\r\n\t\t() => {\r\n\t\t\tfindAreaRequest(filter);\r\n\t\t},\r\n\t\t300,\r\n\t\t[filter]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<BaseLayout className='request-page ' showHelp onChangeTheme={props.onChangeTheme} light={props.light}>\r\n\t\t\t<Loading active={loading}></Loading>\r\n\t\t\t<HeaderPage style={{ padding: '19px 0' }}>Solicitudes de área</HeaderPage>\r\n\t\t\t<div className='flex flex-gap-10'>\r\n\t\t\t\t<div className='flex-1'>\r\n\t\t\t\t\t<Input prefix={<SearchOutlined />} size='large' placeholder='Escriba algún parámetro para filtrar...' onChange={setFilter}></Input>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Button type='green' size='large' onClick={handleNewRequest}>\r\n\t\t\t\t\t\tNueva Solicitud\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className='request-cards-container' style={{ marginTop: 10 }}>\r\n\t\t\t\t{areaRequests && !loading && (\r\n\t\t\t\t\t<Collapse collapsible='header' expandIconPosition='right' activeKey={activeCollapseKey} onChange={setActiveCollapseKey} ghost>\r\n\t\t\t\t\t\t{areaRequests.map(({ createAt, areaRequest }) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Panel header={createAt} key={createAt}>\r\n\t\t\t\t\t\t\t\t\t{areaRequest?.map((request) => {\r\n\t\t\t\t\t\t\t\t\t\tvar holesRenderer = request.recommendedWells.map((hole) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Tag key={hole.recommendation}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<WhiteText>{hole.recommendation}</WhiteText>,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<DescriptionText as='span' style={{ marginLeft: 4 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tPrioridad: {hole.details['Prioridad_Perforacio']}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</DescriptionText>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Tag>\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<RequestCard\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={request.requestId}\r\n\t\t\t\t\t\t\t\t\t\t\t\tid={request.requestId}\r\n\t\t\t\t\t\t\t\t\t\t\t\tbeginDate={request.dateAuthorization.from}\r\n\t\t\t\t\t\t\t\t\t\t\t\tendDate={request.dateAuthorization.to}\r\n\t\t\t\t\t\t\t\t\t\t\t\tstate={request.cardState}\r\n\t\t\t\t\t\t\t\t\t\t\t\tsector={request.sector}\r\n\t\t\t\t\t\t\t\t\t\t\t\tholes={holesRenderer}\r\n\t\t\t\t\t\t\t\t\t\t\t\trgoName={request.rgoName}\r\n\t\t\t\t\t\t\t\t\t\t\t\trgoExists={request.rgoExists}\r\n\t\t\t\t\t\t\t\t\t\t\t\tsignatureProps={{ total: request.totalSignature, signed: request.totalSigned }}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleViewRequest(request)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Collapse>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t{state.areaRequests && state.areaRequests.length === 0 && (\r\n\t\t\t\t<div className='flex flex-column flex-1 flex-middle'>\r\n\t\t\t\t\t<NotFound secondaryText='Para crear una solicitud de área presione el botón “Nueva Solicitud”' />\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</BaseLayout>\r\n\t);\r\n}\r\n\r\nexport default RequestAreaIndex;\r\n\r\nfunction RequestCard({ id, beginDate = dateformat, endDate = dateformat, holes, state, sector, rgoName, rgoExists, signatureProps, onClick }) {\r\n\tconst { text, step, bgColor, fontColor, opacity } = stateDict[state];\r\n\r\n\treturn (\r\n\t\t<Section className='request-card translation-y-hover' onClick={onClick} style={{ opacity }}>\r\n\t\t\t<SectionHeader\r\n\t\t\t\tclassName='request-card-header'\r\n\t\t\t\tleft={\r\n\t\t\t\t\t<div style={{}}>\r\n\t\t\t\t\t\t<div style={{ display: 'inline-block' }}>\r\n\t\t\t\t\t\t\t<LocationTone style={{ fontSize: 26, verticalAlign: 'middle' }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<span style={{ marginLeft: 10 }}>{sector}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\tright={\r\n\t\t\t\t\t<DescriptionText as='span'>\r\n\t\t\t\t\t\t{beginDate} a {endDate}\r\n\t\t\t\t\t</DescriptionText>\r\n\t\t\t\t}></SectionHeader>\r\n\t\t\t<div className='pd-14 flex flex-gap-10'>{holes}</div>\r\n\t\t\t<SectionHeader\r\n\t\t\t\tclassName='request-card-footer'\r\n\t\t\t\tleft={\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<DescriptionText as='span'>{step}</DescriptionText>\r\n\t\t\t\t\t\t<Dot />\r\n\t\t\t\t\t\t<label style={{ color: fontColor, fontWeight: 'bold' }}>\r\n\t\t\t\t\t\t\t{signatureProps.signed}/{signatureProps.total} firmas\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<Dot />\r\n\t\t\t\t\t\t{rgoExists && (\r\n\t\t\t\t\t\t\t<LinkRgoStyled>\r\n\t\t\t\t\t\t\t\t<DescriptionText\r\n\t\t\t\t\t\t\t\t\tas='a'\r\n\t\t\t\t\t\t\t\t\thref={`${process.env.REACT_APP_API_URL}Rgo/download/${id}`}\r\n\t\t\t\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\t\t\t\trel='noreferred'\r\n\t\t\t\t\t\t\t\t\tstyle={{ textDecoration: 'underline' }}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{rgoName}\r\n\t\t\t\t\t\t\t\t</DescriptionText>\r\n\t\t\t\t\t\t\t</LinkRgoStyled>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{!rgoExists && (\r\n\t\t\t\t\t\t\t<DescriptionText as='span' style={{ opacity: 0.5 }}>\r\n\t\t\t\t\t\t\t\t{rgoName}\r\n\t\t\t\t\t\t\t</DescriptionText>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\tright={\r\n\t\t\t\t\t<Tag colorTranslucence={bgColor} style={{ textTransform: 'capitalize', color: fontColor }}>\r\n\t\t\t\t\t\t{text}\r\n\t\t\t\t\t</Tag>\r\n\t\t\t\t}></SectionHeader>\r\n\t\t</Section>\r\n\t);\r\n}\r\n\r\nconst LinkRgoStyled = styled(DescriptionText)`\r\n\tdisplay: inline-block;\r\n\t&:hover {\r\n\t\tfont-weight: 600;\r\n\t}\r\n`;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst ErrorContainer = styled.div``;\r\n\r\nfunction Error({ children, isError, message }) {\r\n\treturn (\r\n\t\t<ErrorContainer className={`wp-field ${isError ? 'error' : ''}`} data-msg={message} style={{ border: isError ? '1px solid #ff6060' : 'none' }}>\r\n\t\t\t{children}\r\n\t\t</ErrorContainer>\r\n\t);\r\n}\r\n\r\nexport default Error;\r\n\r\nexport function Warning({ children, isWarning, message }) {\r\n\treturn (\r\n\t\t<ErrorContainer\r\n\t\t\tclassName={`wp-field ${isWarning ? 'warning' : ''}`}\r\n\t\t\tdata-msg={message}\r\n\t\t\tstyle={{ border: isWarning ? '1px solid #ffb116' : 'none' }}>\r\n\t\t\t{children}\r\n\t\t</ErrorContainer>\r\n\t);\r\n}\r\n","import moment from 'moment';\r\n\r\nconst dateFormat = 'DD/MM/YYYY';\r\n\r\nexport const INITIAL_STATE = {\r\n\trequestId: -1,\r\n\tareas: ['Mina', 'Drilling'],\r\n\trequiredRgo: true,\r\n\tmodalConfig: {},\r\n\tsector: undefined,\r\n\tdescription: null,\r\n\trequestNote: null,\r\n\tfile: undefined,\r\n\trecommendedWells: [{ recommendation: null, north: null, east: null, elevation: null }],\r\n\tactivities: [\r\n\t\t{\r\n\t\t\tactivityName: null,\r\n\t\t\tresponsible: null,\r\n\t\t\tfrom: moment().format(dateFormat),\r\n\t\t\tto: moment().format(dateFormat),\r\n\t\t\tobservation: '',\r\n\t\t},\r\n\t],\r\n\tdateAuthorization: { from: moment().format(dateFormat), to: moment().add(1, 'days').format(dateFormat) },\r\n\tsignatures: [\r\n\t\t{ area: 'Mina', responsibles: [{ personaName: '', signature: null, position: 0, signed: false }] },\r\n\t\t{ area: 'Drilling', responsibles: [{ personaName: '', signature: null, position: 0, signed: false }] },\r\n\t],\r\n\trgo: {},\r\n\tplatforms: [],\r\n};\r\n\r\nexport function requestFormReducer(state = INITIAL_STATE, { type, payload }) {\r\n\tswitch (type) {\r\n\t\tcase '@requestForm/setActivities':\r\n\t\t\treturn state.activities ? { ...state, activities: [...state.activities, payload] } : { ...state, activities: [payload] };\r\n\t\tcase '@requestForm/setWell':\r\n\t\t\treturn state.recommendedWells\r\n\t\t\t\t? { ...state, recommendedWells: [...state.recommendedWells, payload] }\r\n\t\t\t\t: { ...state, recommendedWells: [payload] };\r\n\t\tcase '@requestForm/setModalConfig':\r\n\t\t\treturn state.modalConfig ? { ...state, modalConfig: { ...state.modalConfig, ...payload } } : { ...state, modalConfig: { ...payload } };\r\n\r\n\t\tcase '@requestForm/updateRootProp':\r\n\t\t\tconst { prop, value } = payload;\r\n\r\n\t\t\tstate[prop] = value;\r\n\t\t\treturn { ...state };\r\n\r\n\t\tcase '@requestForm/updateLogisticsArea':\r\n\t\t\tlet finalAreas = [...payload];\r\n\t\t\tlet signaturesToAdd = finalAreas.map((fa) => ({ area: fa, responsibles: [{ personaName: '', Signed: false, position: 0, Signature: '' }] }));\r\n\t\t\treturn { ...state, areas: finalAreas, signatures: signaturesToAdd };\r\n\r\n\t\tcase '@requestForm/updateSignatures':\r\n\t\t\tlet { prop: propsignature, value: valuesignature, indexAreas: indexaressignature, indexResponsible: indexresponsiblesignature } = payload;\r\n\t\t\tlet allsignatures = state.signatures;\r\n\t\t\tallsignatures[indexaressignature].responsibles[indexresponsiblesignature][propsignature] = valuesignature;\r\n\r\n\t\t\treturn { ...state, signatures: allsignatures };\r\n\r\n\t\t// Actualizar propiedades de actividad\r\n\t\tcase '@requestForm/updateActivity':\r\n\t\t\tconst { prop: propactivity, value: valueactivity, index: indexactivity } = payload;\r\n\t\t\tlet activities = state.activities;\r\n\r\n\t\t\tactivities[indexactivity][propactivity] = valueactivity;\r\n\t\t\treturn { ...state, activities };\r\n\r\n\t\t// Actualizar propiedades de pozos propuesto\r\n\t\tcase '@requestForm/updateRecommendedWells':\r\n\t\t\tconst { prop: propwell, value: valuewell, index: indexwell } = payload;\r\n\t\t\tlet recommendedWells = state.recommendedWells;\r\n\r\n\t\t\trecommendedWells[indexwell][propwell] = valuewell;\r\n\t\t\treturn { ...state, recommendedWells };\r\n\r\n\t\tcase '@requestForm/updateDateAuthorization':\r\n\t\t\tconst { prop: propdateauthorization, value: valuedateauthorization } = payload;\r\n\t\t\tlet dateAuthorization = state.dateAuthorization;\r\n\t\t\tdateAuthorization[propdateauthorization] = valuedateauthorization;\r\n\t\t\treturn { ...state, dateAuthorization };\r\n\r\n\t\tcase '@requestForm/updateSignatureProps':\r\n\t\t\tconst { areaIndex: areaindexupd, responsibleIndex: responsibleindexupd, prop: propupd, value: valueupd } = payload;\r\n\t\t\tlet signArray = state.signatures;\r\n\r\n\t\t\tsignArray[areaindexupd].responsibles[responsibleindexupd][propupd] = valueupd;\r\n\t\t\treturn { ...state, signatures: signArray };\r\n\r\n\t\tcase '@requestForm/addSignature':\r\n\t\t\tconst { areaIndex: addAreaIndex, position: positionSignature } = payload;\r\n\t\t\tlet signatures = state.signatures;\r\n\r\n\t\t\tsignatures[addAreaIndex].responsibles = [\r\n\t\t\t\t...signatures[addAreaIndex].responsibles,\r\n\t\t\t\t{ personaName: '', signed: false, position: positionSignature, signature: '' },\r\n\t\t\t];\r\n\t\t\treturn { ...state, signatures };\r\n\r\n\t\tcase '@requestForm/removeWell':\r\n\t\t\tconst { index: indexremovewell } = payload;\r\n\t\t\tlet well = state.recommendedWells.filter((_, k) => k !== indexremovewell);\r\n\r\n\t\t\treturn { ...state, recommendedWells: well };\r\n\r\n\t\tcase '@requestForm/removeActivity':\r\n\t\t\tconst { index: indexremoveactivity } = payload;\r\n\t\t\tlet acts = state.activities.filter((_, k) => k !== indexremoveactivity);\r\n\r\n\t\t\treturn { ...state, activities: acts };\r\n\t\tcase '@requestForm/removeSignature':\r\n\t\t\tconst { areaIndex: airemove, responsibleIndex: riremove } = payload;\r\n\t\t\tlet signs = state.signatures;\r\n\t\t\tlet responsiblesFilter = signs[airemove].responsibles.filter((_, k) => k !== riremove);\r\n\r\n\t\t\tsigns[airemove].responsibles = responsiblesFilter;\r\n\t\t\treturn { ...state, signatures: signs };\r\n\t\tcase '@requestForm/updateAllData':\r\n\t\t\treturn { ...payload };\r\n\t\t//PLATFORMS\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import { v4 as uuidv4 } from 'uuid';\r\n\r\nFile.prototype.blobFileStruct = function () {\r\n\tconst extensionFile = /(?:\\.([^.]+))?$/;\r\n\tconst oldName = this.name;\r\n\tconst guidName = uuidv4();\r\n\tconst renamedFile = new File([this], `${guidName}.${extensionFile.exec(this.name)[1]}`, { type: this.type });\r\n\treturn { file: renamedFile, oldName, publicPath: `/public/${renamedFile.name}` };\r\n};\r\n","import Loading from '@outlier-spa/loading';\r\nimport { DetailsOutlined, ImageOutlined, PdfTone, TrashcanFilled } from '@outlier-spa/mine-icon';\r\nimport Button from '@outlier-spa/mine/dist/components/Button';\r\nimport DatePicker from '@outlier-spa/mine/dist/components/DatePicker';\r\nimport Input, { InputNumber, TextArea } from '@outlier-spa/mine/dist/components/Input';\r\nimport Modal from '@outlier-spa/mine/dist/components/Modal';\r\nimport { Section, SectionHeader } from '@outlier-spa/mine/dist/components/Section';\r\nimport Select from '@outlier-spa/mine/dist/components/Select';\r\nimport SwitchOptions from '@outlier-spa/mine/dist/components/SwitchOptions';\r\nimport Upload from '@outlier-spa/mine/dist/components/Upload';\r\nimport { AddRequest } from 'actions';\r\nimport Signature from 'assets/Signature';\r\nimport { TitleInput } from 'components/Common';\r\nimport DrawSignature, { defaultProps as defaultDrawSignatureProps } from 'components/DrawSignature';\r\nimport SignatureViewer from 'components/DrawSignature/SignatureViewer';\r\nimport Error from 'components/Error';\r\nimport { DetailsHeader } from 'components/Headers';\r\nimport PdfViewer from 'components/PdfViewer';\r\nimport useDebouncedEffect from 'hooks/useDebouncedEffect';\r\nimport moment from 'moment';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { INITIAL_STATE } from 'reducer/requestFormReducer';\r\nimport { DescriptionText } from 'styled';\r\nimport styled from 'styled-components';\r\nimport { resizeImage } from 'utils';\r\nimport { db } from 'utils/database';\r\nimport 'utils/extensions';\r\nimport { REQUEST_STATE } from './utils';\r\n\r\nconst dateFormat = 'DD/MM/YYYY';\r\nconst imageUrl = `${process.env.REACT_APP_API_URL}RequestArea/getImage/`;\r\nconst documentUrl = `${process.env.REACT_APP_API_URL}RequestArea/getDocument/`;\r\n\r\nconst TagSelectStyledOverride = styled.div`\r\n\t.rounded-tag-large {\r\n\t\theight: 40px !important;\r\n\t}\r\n`;\r\n\r\nconst toBase64 = (file) =>\r\n\tnew Promise((resolve, reject) => {\r\n\t\tconst reader = new FileReader();\r\n\t\treader.readAsDataURL(file);\r\n\t\treader.onload = () => resolve(reader.result);\r\n\t\treader.onerror = (error) => reject(error);\r\n\t});\r\n\r\nconst RequestForm = React.forwardRef(({ mode = 'edit', ...rest }, ref) => {\r\n\tconst modalRef = useRef();\r\n\tconst signatureRef = useRef();\r\n\tconst modalImageRef = useRef();\r\n\tconst modalPdfRef = useRef();\r\n\tconst loadingRef = useRef();\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [areaOptions, setAreaOptions] = useState(null);\r\n\tconst [sectorOptions, setSectorOptions] = useState(null);\r\n\tconst [imagePreview, setImagePreview] = useState(null);\r\n\tconst state = useSelector((selector) => selector.requestFormReducer);\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst handleOpenSignatureModal = (areaIndex, responsibleIndex, prop) => {\r\n\t\tdispatch({ type: '@requestForm/setModalConfig', payload: { title: 'Firma', onSubmit: () => onSubmitModal(areaIndex, responsibleIndex, prop) } });\r\n\t\tmodalRef.current.open();\r\n\t};\r\n\r\n\tconst onSubmitModal = (areaIndex, responsibleIndex, prop) => {\r\n\t\tsignatureRef.current.getBase64Data(function (value) {\r\n\t\t\tdispatch({ type: '@requestForm/updateSignatureProps', payload: { areaIndex, responsibleIndex, prop, value } });\r\n\t\t});\r\n\r\n\t\tdispatch({ type: '@requestForm/updateSignatureProps', payload: { areaIndex, responsibleIndex, prop: 'signed', value: true } });\r\n\t\tmodalRef.current.close();\r\n\t};\r\n\r\n\tconst updateLogisticsArea = (value) => {\r\n\t\tdispatch({ type: '@requestForm/updateLogisticsArea', payload: value });\r\n\t};\r\n\r\n\tconst updateRootProps = (prop, value) => {\r\n\t\tdispatch({ type: '@requestForm/updateRootProp', payload: { prop, value } });\r\n\t};\r\n\r\n\tconst updateDateAuthorization = (prop, value) => {\r\n\t\tdispatch({ type: '@requestForm/updateDateAuthorization', payload: { prop, value } });\r\n\r\n\t\t//* Si la fecha inicial es menor a la fecha de término cambia la fecha de término\r\n\t\tif (moment(state.dateAuthorization.from, dateFormat) > moment(state.dateAuthorization.to, dateFormat)) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: '@requestForm/updateDateAuthorization',\r\n\t\t\t\tpayload: { prop: 'to', value: moment(state.dateAuthorization.from, dateFormat).add(1, 'days').format(dateFormat) },\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst updateSignatureProps = (areaIndex, responsibleIndex, prop, value) => {\r\n\t\tdispatch({ type: '@requestForm/updateSignatureProps', payload: { areaIndex, responsibleIndex, prop, value } });\r\n\t};\r\n\r\n\t// Eventos de botones de firmas\r\n\tconst handleAddSignature = (areaIndex) => {\r\n\t\tdispatch({ type: '@requestForm/addSignature', payload: { areaIndex, position: state.signatures[areaIndex].responsibles.length } });\r\n\t};\r\n\r\n\tconst handleRemoveSignature = (areaIndex, responsibleIndex) => {\r\n\t\tdispatch({ type: '@requestForm/removeSignature', payload: { areaIndex, responsibleIndex } });\r\n\t};\r\n\r\n\tconst handleChangeUpload = async (evt) => {\r\n\t\tconst { file } = evt.target.files[0].blobFileStruct();\r\n\r\n\t\tresizeImage(file, { w: 640, h: 480 }, 'dataURL', function (uri) {\r\n\t\t\tsetImagePreview(uri);\r\n\t\t});\r\n\r\n\t\tdispatch({ type: '@requestForm/updateRootProp', payload: { prop: 'file', value: file } });\r\n\t};\r\n\r\n\tconst handleViewImage = () => {\r\n\t\tmodalImageRef.current.open();\r\n\t};\r\n\r\n\tconst findAreaRequest = (arearequestid) => {\r\n\t\tdb.get(`RequestArea/getById?arearequestid=${arearequestid}`).then((response) => {\r\n\t\t\tif (response.data) {\r\n\t\t\t\tdispatch({ type: '@requestForm/updateAllData', payload: response.data });\r\n\t\t\t\tAddRequest(response.data).then((resp) => {\r\n\t\t\t\t\tdispatch(resp);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tconst findSectors = (value = '') => {\r\n\t\tdb.get(`Sector/getAll?sector=${value}`)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tif (response.data && response.data.length > 0) {\r\n\t\t\t\t\tvar sectors = response.data.map((sector) => ({ label: sector, value: sector }));\r\n\t\t\t\t\tsetSectorOptions(Object.values(sectors));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((error) => console.debug(error));\r\n\t};\r\n\r\n\tconst handleViewPdf = () => {\r\n\t\tmodalPdfRef.current.open();\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (state.areas?.length > 0) {\r\n\t\t\tif (state.signatures?.length !== state.areas.length) {\r\n\t\t\t\tdispatch({ type: '@requestForm/updateLogisticsArea', payload: state.areas });\r\n\t\t\t}\r\n\t\t}\r\n\t}, [state.areas, state.signatures]);\r\n\r\n\tuseEffect(() => {\r\n\t\tdb.get('Area')\r\n\t\t\t.then((response) => {\r\n\t\t\t\tif (response.data && response.data.length > 0) {\r\n\t\t\t\t\tvar areasOptions = [];\r\n\t\t\t\t\tresponse.data.forEach((area) => {\r\n\t\t\t\t\t\tlet areaValues = Object.values(area)[0];\r\n\t\t\t\t\t\tlet areaKeys = Object.keys(area)[0];\r\n\t\t\t\t\t\tareasOptions.push({ value: areaValues, label: areaValues, key: areaKeys });\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetAreaOptions(areasOptions);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((error) => console.debug(error));\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (mode !== 'edit') {\r\n\t\t\tdispatch({ type: '@requestForm/updateAllData', payload: INITIAL_STATE });\r\n\t\t\tupdateRootProps('requestState', REQUEST_STATE.CREATED);\r\n\t\t} else {\r\n\t\t\tconst { id } = rest.match.params;\r\n\t\t\tfindAreaRequest(id);\r\n\t\t}\r\n\t\tfindSectors();\r\n\t}, []);\r\n\r\n\t// *Validaciones\r\n\tconst handleCheck = () => {\r\n\t\tvar errors = {};\r\n\t\t(!state.areas || state.areas.length === 0) && (errors['areas'] = 'Requerido');\r\n\t\t(!state.description || state.description.trim() === '') && (errors['description'] = 'Requerido');\r\n\t\t(!state.sector || state.sector.length === 0) && (errors['sector'] = 'Requerido');\r\n\t\t!state.file && mode !== 'edit' && (errors['file'] = 'Requerido');\r\n\t\tlet wells = [];\r\n\t\tstate.recommendedWells &&\r\n\t\t\tstate.recommendedWells.forEach((rw, k) => {\r\n\t\t\t\trw.recommendation.trim() === '' && (errors[`well-${k}`] = 'Requerido');\r\n\t\t\t\twells.includes(rw.recommendation.trim()) && (errors[`well-${k}`] = 'Pozo repetido.');\r\n\t\t\t\twells.push(rw.recommendation.trim());\r\n\t\t\t});\r\n\t\tstate.activities &&\r\n\t\t\tstate.activities.forEach((a, k) => {\r\n\t\t\t\t!a.activityName && (errors[`activity-${k}`] = 'Requerido');\r\n\t\t\t\t!a.responsible && (errors[`activity-responsible-${k}`] = 'Requerido');\r\n\t\t\t});\r\n\r\n\t\tif (mode === 'edit') {\r\n\t\t\t!state.signatures && state.signatures.forEach((signature) => {});\r\n\t\t}\r\n\r\n\t\tdispatch({ type: '@requestForm/updateRootProp', payload: { prop: 'errors', value: errors } });\r\n\r\n\t\tconst containError = !!Object.keys(errors).length;\r\n\t\treturn { data: state, containError: containError, errors };\r\n\t};\r\n\r\n\tref && (ref.current = { state: state, getState: handleCheck });\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{/* <Loading ref={loadingRef} active={loading}></Loading> */}\r\n\t\t\t<Modal ref={modalRef} size='large' title='Autorización y Firma - Planificación corto plazo' {...state.modalConfig}>\r\n\t\t\t\t<div className='pd-14 '>\r\n\t\t\t\t\t<div className='signature-draw-container'>\r\n\t\t\t\t\t\t<DrawSignature\r\n\t\t\t\t\t\t\tref={signatureRef}\r\n\t\t\t\t\t\t\t{...defaultDrawSignatureProps}\r\n\t\t\t\t\t\t\tidentifier={state.modalConfig?.identifier}\r\n\t\t\t\t\t\t\tcanvasWidth='100%'\r\n\t\t\t\t\t\t\tcanvasHeight='80vh'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<DescriptionText style={{ marginTop: 20 }}>\r\n\t\t\t\t\t\tLa firma realizada en este recuadro, será utilizada únicamente en este documento, y no será guardada o manipulada fuera de este.\r\n\t\t\t\t\t</DescriptionText>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t\t<Modal ref={modalImageRef} size='large' cancelProps={{ text: 'Cerrar' }} okProps={{ visible: false }}>\r\n\t\t\t\t<div className='pd-14'>\r\n\t\t\t\t\t<img src={`${imageUrl}${state.requestId}`} style={{ height: '100%', width: '100%' }} alt='' />\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\r\n\t\t\t{state.requestId && mode === 'edit' && (\r\n\t\t\t\t<Modal ref={modalPdfRef} cancelProps={{ text: 'Cerrar' }} size='large' okProps={{ visible: false }}>\r\n\t\t\t\t\t{/* <div className='pd-14' style={{ height: '80vh', width: '100%' }}> */}\r\n\t\t\t\t\t<PdfViewer url={`${documentUrl}${state.requestId}`} id={state.requestId} />\r\n\t\t\t\t\t{/* </div> */}\r\n\t\t\t\t</Modal>\r\n\t\t\t)}\r\n\r\n\t\t\t<>\r\n\t\t\t\t{mode === 'edit' && (\r\n\t\t\t\t\t<Button prefix={<PdfTone />} onClick={handleViewPdf} style={{ width: 150 }}>\r\n\t\t\t\t\t\tVer Solicitud\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t)}\r\n\t\t\t\t<div className='request-container'>\r\n\t\t\t\t\t<DetailsHeader icon={<DetailsOutlined />} text='Detalles' />\r\n\t\t\t\t\t<div className='flex-vgap-20'>\r\n\t\t\t\t\t\t<div className='flex flex-gap-14'>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<TitleInput>Fecha inicial</TitleInput>\r\n\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\tdisabled={mode === 'edit'}\r\n\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\tdisabledDate={(current) => current && current <= moment().subtract(1, 'days').endOf('day')}\r\n\t\t\t\t\t\t\t\t\tvalue={state.dateAuthorization?.from ? moment(state.dateAuthorization?.from, dateFormat) : moment(dateFormat)}\r\n\t\t\t\t\t\t\t\t\tplaceholder={dateFormat}\r\n\t\t\t\t\t\t\t\t\tformat={dateFormat}\r\n\t\t\t\t\t\t\t\t\tonChange={(value) => value && updateDateAuthorization('from', value.format(dateFormat))}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<TitleInput>Fecha final</TitleInput>\r\n\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\tdisabled={mode === 'edit'}\r\n\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\tdisabledDate={(current) => current && current <= moment(state.dateAuthorization?.from, dateFormat).endOf('day')}\r\n\t\t\t\t\t\t\t\t\tvalue={moment(state.dateAuthorization?.to, dateFormat) || moment(dateFormat)}\r\n\t\t\t\t\t\t\t\t\tplaceholder={dateFormat}\r\n\t\t\t\t\t\t\t\t\tformat={dateFormat}\r\n\t\t\t\t\t\t\t\t\tonChange={(value) => value && updateDateAuthorization('to', value.format(dateFormat))}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<TagSelectStyledOverride>\r\n\t\t\t\t\t\t\t<TitleInput>Áreas logísticas.</TitleInput>\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tisError={state.errors && state.errors['areas']}\r\n\t\t\t\t\t\t\t\tmessage='Requerido'\r\n\t\t\t\t\t\t\t\tdisabled={mode === 'edit'}\r\n\t\t\t\t\t\t\t\tmode='tags'\r\n\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\tmaxTagCount={0}\r\n\t\t\t\t\t\t\t\tvalue={state.areas}\r\n\t\t\t\t\t\t\t\toptions={areaOptions || []}\r\n\t\t\t\t\t\t\t\tfieldStyle={{ width: 374 }}\r\n\t\t\t\t\t\t\t\tonChange={(value) => updateLogisticsArea(value)}></Select>\r\n\t\t\t\t\t\t</TagSelectStyledOverride>\r\n\r\n\t\t\t\t\t\t<div className='tags-non-resize'>\r\n\t\t\t\t\t\t\t<TitleInput>Área física (a solicitar)</TitleInput>\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tisError={state.errors && state.errors['sector']}\r\n\t\t\t\t\t\t\t\tmessage='Requerido'\r\n\t\t\t\t\t\t\t\tmode='tags'\r\n\t\t\t\t\t\t\t\tonSearch={() => {}}\r\n\t\t\t\t\t\t\t\tmaxTagCount={0}\r\n\t\t\t\t\t\t\t\tdisabled={mode === 'edit'}\r\n\t\t\t\t\t\t\t\tfieldStyle={{ width: 374 }}\r\n\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\toptions={sectorOptions}\r\n\t\t\t\t\t\t\t\tvalue={state.sector !== undefined ? [state.sector] : undefined}\r\n\t\t\t\t\t\t\t\tplaceholder='Escriba área a solicitar'\r\n\t\t\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\t\t\tstate.errors && value.length > 0 && delete state.errors['sector'];\r\n\t\t\t\t\t\t\t\t\tupdateRootProps('sector', value.length > 0 ? value[value.length - 1] : undefined);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<TitleInput>¿Requiere R-GO?</TitleInput>\r\n\t\t\t\t\t\t\t<SwitchOptions\r\n\t\t\t\t\t\t\t\tdisabled={mode === 'edit'}\r\n\t\t\t\t\t\t\t\tindex={state.requiredRgo ? 0 : 1}\r\n\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\tonChange={(_, index) => updateRootProps('requiredRgo', index === 0)}></SwitchOptions>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<TitleInput>Descripción</TitleInput>\r\n\t\t\t\t\t\t\t<TextArea\r\n\t\t\t\t\t\t\t\tisError={state.errors && state.errors['description']}\r\n\t\t\t\t\t\t\t\tmessage='Requerido'\r\n\t\t\t\t\t\t\t\tvalue={state.description}\r\n\t\t\t\t\t\t\t\tdisabled={mode === 'edit'}\r\n\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\tplaceholder='Escriba una descripción para la solicitud'\r\n\t\t\t\t\t\t\t\tstyle={{ width: 720 }}\r\n\t\t\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\t\t\tstate.errors && delete state.errors['description'];\r\n\t\t\t\t\t\t\t\t\tupdateRootProps('description', value);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<TitleInput>Notas</TitleInput>\r\n\t\t\t\t\t\t\t<TextArea\r\n\t\t\t\t\t\t\t\tdisabled={mode === 'edit'}\r\n\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\tplaceholder='Escriba una nota (Opcional)'\r\n\t\t\t\t\t\t\t\tstyle={{ width: 720 }}\r\n\t\t\t\t\t\t\t\tonChange={(value) => updateRootProps('requestNote', value)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<TitleInput>Fotografía o Plano de área solicitada</TitleInput>\r\n\t\t\t\t\t\t\t{mode !== 'edit' && (\r\n\t\t\t\t\t\t\t\t<Error isError={state.errors && state.errors['file']} message='Requerido'>\r\n\t\t\t\t\t\t\t\t\t{!state.file && (\r\n\t\t\t\t\t\t\t\t\t\t<Upload\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={mode === 'edit'}\r\n\t\t\t\t\t\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\t\t\t\t\t\taccept='.png, .jpg, .jpge'\r\n\t\t\t\t\t\t\t\t\t\t\ticon={<ImageOutlined style={{ fontSize: 40 }} />}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tstate.errors && delete state.errors['file'];\r\n\t\t\t\t\t\t\t\t\t\t\t\thandleChangeUpload(value);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t{state.file && (\r\n\t\t\t\t\t\t\t\t\t\t<Section className='flex flex-middle' style={{ height: 380, position: 'relative' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t<TrashcanFilled\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ position: 'absolute', right: 14, top: 14, cursor: 'pointer' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => dispatch({ type: '@requestForm/updateRootProp', payload: { prop: 'file', value: null } })}></TrashcanFilled>\r\n\t\t\t\t\t\t\t\t\t\t\t<img src={imagePreview} style={{ height: 380 }} alt=''></img>\r\n\t\t\t\t\t\t\t\t\t\t</Section>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Error>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{mode !== 'new' && (\r\n\t\t\t\t\t\t\t\t<Section className='image-preview' style={{ height: 380 }}>\r\n\t\t\t\t\t\t\t\t\t<div className='flex flex-middle' style={{ height: '100%', cursor: 'pointer' }} onClick={handleViewImage}>\r\n\t\t\t\t\t\t\t\t\t\t{/* {`${imageUrl}${state.requestId}`} */}\r\n\t\t\t\t\t\t\t\t\t\t<img src={`${imageUrl}${state.requestId}`} loading='lazy' style={{ height: '100%' }} alt='' />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</Section>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{/* propuestos */}\r\n\t\t\t\t\t\t<WellSection mode={mode} state={state} dispatch={dispatch} setLoading={setLoading} />\r\n\r\n\t\t\t\t\t\t{/* actividades */}\r\n\t\t\t\t\t\t<ActivitySection mode={mode} areaOptions={areaOptions} state={state} dispatch={dispatch} />\r\n\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<DetailsHeader icon={<Signature />} text='Firmas Responsables' />\r\n\t\t\t\t\t\t\t\t{state.signatures?.map((signature, areaindex) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Section key={signature.area} style={{ marginBottom: 20 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t<SectionHeader left={signature.area}></SectionHeader>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='pd-14'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{signature?.responsibles?.map((ma, responsibleIndex) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Section key={responsibleIndex} type='inner' style={{ marginBottom: 14 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SectionHeader\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tleft={`Firma ${responsibleIndex + 1}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tright={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsignature?.responsibles.length > 1 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmode !== 'edit' && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='section-trashcan-container' onClick={() => handleRemoveSignature(areaindex, responsibleIndex)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TrashcanFilled />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}></SectionHeader>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='pd-14 signature-section'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TitleInput>Nombres</TitleInput>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={mode === 'edit'}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ma?.personaName}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ maxWidth: 560, marginBottom: 20 }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Escriba nombres y apellidos'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(value) => updateSignatureProps(areaindex, responsibleIndex, 'personaName', value)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{mode !== 'new' && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TitleInput>Firma</TitleInput>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SignatureViewer\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={ma.signed}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsigned={ma.signed}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleOpenSignatureModal(areaindex, responsibleIndex, 'signature')}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Section>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t{mode === 'new' && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button type='green' size='large' onClick={() => handleAddSignature(areaindex)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tAñadir integrante\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</Section>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t</>\r\n\t);\r\n});\r\n\r\nexport default RequestForm;\r\n\r\nfunction updateRecommendedWell(prop, value, index) {\r\n\treturn {\r\n\t\ttype: '@requestForm/updateRecommendedWells',\r\n\t\tpayload: {\r\n\t\t\tprop: prop,\r\n\t\t\tvalue: value,\r\n\t\t\tindex: index,\r\n\t\t},\r\n\t};\r\n}\r\n\r\nfunction WellSection({ mode, state, dispatch, setLoading }) {\r\n\tconst offline = useSelector((selector) => selector.baseReducer.offline);\r\n\tconst [holeOptions, setHoleOptions] = useState(null);\r\n\tconst [search, setSearch] = useState('');\r\n\r\n\t// Actualiza los valores de los pozos propuesto\r\n\tconst updateRecommendedWells = (prop, value, index, item) => {\r\n\t\tconst findHoleFromOptions = holeOptions.find((hole) => hole.value === value);\r\n\t\tdispatch(updateRecommendedWell(prop, value, index));\r\n\t\tdispatch(updateRecommendedWell('east', findHoleFromOptions.Este_Propuesto, index));\r\n\t\tdispatch(updateRecommendedWell('north', findHoleFromOptions.Norte_Propuesto, index));\r\n\t\tdispatch(updateRecommendedWell('elevation', findHoleFromOptions.Elev_Propuesto, index));\r\n\t\tdispatch(updateRecommendedWell('campana', findHoleFromOptions.campana, index));\r\n\t};\r\n\r\n\tconst handleRemoveWell = (index) => {\r\n\t\tdispatch({ type: '@requestForm/removeWell', payload: { index } });\r\n\t};\r\n\r\n\tconst handleAddWell = () => {\r\n\t\tdispatch({\r\n\t\t\ttype: '@requestForm/setWell',\r\n\t\t\tpayload: { recommendation: '', north: '', east: '', elevation: '' },\r\n\t\t});\r\n\t};\r\n\r\n\tconst findHoles = (value = '') => {\r\n\t\tsetLoading(true);\r\n\t\tdb.get(`HoleLocation/getProposedWell?holeid=${value}`)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tif (response.data && response.data.length > 0) {\r\n\t\t\t\t\tvar holes = response.data.map((hole) => ({ ...hole, label: hole.Nombre_Propuesto, value: hole.Nombre_Propuesto }));\r\n\r\n\t\t\t\t\tsetHoleOptions([...holes]);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((err) => console.debug(err))\r\n\t\t\t.finally(() => {\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t});\r\n\t};\r\n\r\n\tuseDebouncedEffect(\r\n\t\t() => {\r\n\t\t\tif (offline) return;\r\n\r\n\t\t\tfindHoles(search);\r\n\t\t},\r\n\t\t300,\r\n\t\t[search]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<Section>\r\n\t\t\t<SectionHeader left='Recomendaciones a perforar' />\r\n\t\t\t<div className='pd-14 txt-left'>\r\n\t\t\t\t{state?.recommendedWells?.map((well, k) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Section key={k} type='inner' style={{ marginBottom: 20 }}>\r\n\t\t\t\t\t\t\t<SectionHeader\r\n\t\t\t\t\t\t\t\tleft={`Pozo recomentado ${k + 1}`}\r\n\t\t\t\t\t\t\t\tright={state?.recommendedWells.length > 1 && mode !== 'edit' && <TrashcanFilled onClick={() => handleRemoveWell(k)} />}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<div className='pd-14'>\r\n\t\t\t\t\t\t\t\t<div className='inline-fields' style={{ width: 440, marginTop: 10 }}>\r\n\t\t\t\t\t\t\t\t\t<TitleInput>Pozo propuesto</TitleInput>\r\n\t\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t\tdisabled={mode === 'edit'}\r\n\t\t\t\t\t\t\t\t\t\tisError={state.errors && state.errors[`well-${k}`]}\r\n\t\t\t\t\t\t\t\t\t\tmessage={state?.errors && state?.errors[`well-${k}`]}\r\n\t\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\t\toptions={holeOptions}\r\n\t\t\t\t\t\t\t\t\t\tvalue={well.recommendation}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='Seleccione pozo propuesto'\r\n\t\t\t\t\t\t\t\t\t\tonChange={(value, item) => {\r\n\t\t\t\t\t\t\t\t\t\t\tstate.errors && delete state.errors[`well-${k}`];\r\n\t\t\t\t\t\t\t\t\t\t\tupdateRecommendedWells('recommendation', value, k, item);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tonSearch={setSearch}></Select>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className='inline-fields' style={{ width: 180, marginTop: 10 }}>\r\n\t\t\t\t\t\t\t\t\t<TitleInput>Campaña</TitleInput>\r\n\t\t\t\t\t\t\t\t\t<InputNumber value={well?.campana} disabled size='large' onChange={(value) => updateRecommendedWells('campana', value, k)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className='inline-fields' style={{ width: 180, marginTop: 10 }}>\r\n\t\t\t\t\t\t\t\t\t<TitleInput>Norte</TitleInput>\r\n\t\t\t\t\t\t\t\t\t<InputNumber value={well?.north} disabled size='large' onChange={(value) => updateRecommendedWells('north', value, k)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className='inline-fields' style={{ width: 180, marginTop: 10 }}>\r\n\t\t\t\t\t\t\t\t\t<TitleInput>Este</TitleInput>\r\n\t\t\t\t\t\t\t\t\t<InputNumber disabled value={well?.east} size='large' onChange={(value) => updateRecommendedWells('east', value, k)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className='inline-fields' style={{ width: 180, marginTop: 10 }}>\r\n\t\t\t\t\t\t\t\t\t<TitleInput>Elevación</TitleInput>\r\n\t\t\t\t\t\t\t\t\t<InputNumber disabled value={well?.elevation} size='large' onChange={(value) => updateRecommendedWells('elevation', value, k)} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Section>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t\t{mode !== 'edit' && (\r\n\t\t\t\t\t<Button type='green' size='large' onClick={handleAddWell}>\r\n\t\t\t\t\t\tAñadir recomendación\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</Section>\r\n\t);\r\n}\r\n\r\nfunction ActivitySection({ mode, areaOptions, state, dispatch }) {\r\n\tconst [activities, setActivities] = useState(null);\r\n\r\n\tconst handleRemoveActivity = (index) => {\r\n\t\tdispatch({ type: '@requestForm/removeActivity', payload: { index } });\r\n\t};\r\n\r\n\t// Actualiza los valores de las actividades\r\n\tconst updatePropsActivity = (prop, value, index) => {\r\n\t\tdispatch({\r\n\t\t\ttype: '@requestForm/updateActivity',\r\n\t\t\tpayload: {\r\n\t\t\t\tprop,\r\n\t\t\t\tvalue,\r\n\t\t\t\tindex,\r\n\t\t\t},\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleAddActivity = () => {\r\n\t\tdispatch({\r\n\t\t\ttype: '@requestForm/setActivities',\r\n\t\t\tpayload: {\r\n\t\t\t\tactivityName: null,\r\n\t\t\t\tresponsible: null,\r\n\t\t\t\tfrom: moment().format(dateFormat),\r\n\t\t\t\tto: moment().format(dateFormat),\r\n\t\t\t\tobservation: '',\r\n\t\t\t},\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleActivitySearch = (value) => {};\r\n\r\n\tuseEffect(() => {\r\n\t\tvar flag = true;\r\n\t\tdb.get('Activity')\r\n\t\t\t.then((response) => {\r\n\t\t\t\tif (response.data && response.data.length > 0) {\r\n\t\t\t\t\tvar activityOptions = [];\r\n\t\t\t\t\tresponse.data.forEach((activity) => {\r\n\t\t\t\t\t\tlet activityValue = Object.values(activity)[0];\r\n\r\n\t\t\t\t\t\tactivityOptions.push({ value: activityValue, label: activityValue });\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tsetActivities(activityOptions);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((error) => console.debug(error));\r\n\r\n\t\treturn () => (flag = false);\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<Section>\r\n\t\t\t<SectionHeader left='Actividades a realizar en área recibida' />\r\n\t\t\t<div className='pd-14 txt-left'>\r\n\t\t\t\t{state?.activities?.map((activity, k) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Section key={k} type='inner' style={{ marginBottom: 20 }}>\r\n\t\t\t\t\t\t\t<SectionHeader\r\n\t\t\t\t\t\t\t\tleft={`Actividad ${k + 1}`}\r\n\t\t\t\t\t\t\t\tright={state?.activities.length > 1 && mode !== 'edit' && <TrashcanFilled onClick={() => handleRemoveActivity(k)} />}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<div className='pd-14'>\r\n\t\t\t\t\t\t\t\t<div className='inline-fields' style={{ width: 440, marginTop: 10 }}>\r\n\t\t\t\t\t\t\t\t\t<TitleInput>Actividad</TitleInput>\r\n\t\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t\tdisabledTags\r\n\t\t\t\t\t\t\t\t\t\tmode='tags'\r\n\t\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\t\tisError={state.errors && state.errors[`activity-${k}`]}\r\n\t\t\t\t\t\t\t\t\t\tmessage='Requerido'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={mode === 'edit'}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='Seleccione una actividad'\r\n\t\t\t\t\t\t\t\t\t\tvalue={activity.activityName ? [activity.activityName] : undefined}\r\n\t\t\t\t\t\t\t\t\t\toptions={activities}\r\n\t\t\t\t\t\t\t\t\t\tonSearch={handleActivitySearch}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(value, item) => {\r\n\t\t\t\t\t\t\t\t\t\t\tstate.errors && delete state.errors[`activity-${k}`];\r\n\t\t\t\t\t\t\t\t\t\t\tupdatePropsActivity('activityName', value.length > 0 ? value[value.length - 1] : undefined, k);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className='inline-fields' style={{ width: 180, marginTop: 10 }}>\r\n\t\t\t\t\t\t\t\t\t<TitleInput>Responsable</TitleInput>\r\n\t\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\t\tisError={state.errors && state.errors[`activity-responsible-${k}`]}\r\n\t\t\t\t\t\t\t\t\t\tmessage='Requerido'\r\n\t\t\t\t\t\t\t\t\t\tdisabled={mode === 'edit'}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='Seleccione un responsable'\r\n\t\t\t\t\t\t\t\t\t\toptions={areaOptions || []}\r\n\t\t\t\t\t\t\t\t\t\tvalue={activity.responsible ?? null}\r\n\t\t\t\t\t\t\t\t\t\tfieldStyle={{ width: 180 }}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(value, item) => {\r\n\t\t\t\t\t\t\t\t\t\t\tstate.errors && delete state.errors[`activity-responsible-${k}`];\r\n\t\t\t\t\t\t\t\t\t\t\tupdatePropsActivity('responsible', item.label, k);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className='inline-fields' style={{ width: 180, marginTop: 10 }}>\r\n\t\t\t\t\t\t\t\t\t<TitleInput>Fecha inicial</TitleInput>\r\n\t\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\t\tdisabled={mode === 'edit'}\r\n\t\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\t\tdisabledDate={(current) => {\r\n\t\t\t\t\t\t\t\t\t\t\tconst tooLate =\r\n\t\t\t\t\t\t\t\t\t\t\t\tmoment(activity.from, dateFormat) &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tcurrent < moment(state.dateAuthorization.from, dateFormat).subtract(1, 'days').endOf('day');\r\n\t\t\t\t\t\t\t\t\t\t\tconst tooEarly = moment(activity.to, dateFormat) && current > moment(state.dateAuthorization.to, dateFormat);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\treturn tooLate || tooEarly;\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tvalue={moment(activity.from, dateFormat)}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={dateFormat}\r\n\t\t\t\t\t\t\t\t\t\tformat={dateFormat}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(value) => value && updatePropsActivity('from', value.format(dateFormat), k)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className='inline-fields' style={{ width: 180, marginTop: 10 }}>\r\n\t\t\t\t\t\t\t\t\t<TitleInput>Fecha final</TitleInput>\r\n\t\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\t\tdisabled={mode === 'edit'}\r\n\t\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\t\tdisabledDate={(current) => {\r\n\t\t\t\t\t\t\t\t\t\t\tconst tooLate =\r\n\t\t\t\t\t\t\t\t\t\t\t\tmoment(activity.from, dateFormat) &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tcurrent < moment(state.dateAuthorization.from, dateFormat).subtract(1, 'days').endOf('day');\r\n\t\t\t\t\t\t\t\t\t\t\tconst tooEarly = moment(activity.to, dateFormat) && current > moment(state.dateAuthorization.to, dateFormat);\r\n\t\t\t\t\t\t\t\t\t\t\treturn tooLate || tooEarly;\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tvalue={activity.to ? moment(activity.to, dateFormat) : null}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={dateFormat}\r\n\t\t\t\t\t\t\t\t\t\tformat={dateFormat}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(value) => updatePropsActivity('to', value ? value.format(dateFormat) : null, k)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className='inline-fields' style={{ width: 348, marginTop: 10 }}>\r\n\t\t\t\t\t\t\t\t\t<TitleInput>Observación </TitleInput>\r\n\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\tdisabled={mode === 'edit'}\r\n\t\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\t\tvalue={activity.observation}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='Escriba un comentario'\r\n\t\t\t\t\t\t\t\t\t\tonChange={(value) => updatePropsActivity('observation', value, k)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Section>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t\t{mode !== 'edit' && (\r\n\t\t\t\t\t<Button type='green' size='large' onClick={handleAddActivity}>\r\n\t\t\t\t\t\tAñadir actividad\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</Section>\r\n\t);\r\n}\r\n","import Loading from '@outlier-spa/loading';\r\nimport { CheckOutlined, InfoFilled, LocationTone } from '@outlier-spa/mine-icon';\r\nimport Banner from '@outlier-spa/mine/dist/components/Banner';\r\nimport Button from '@outlier-spa/mine/dist/components/Button';\r\nimport Modal from '@outlier-spa/mine/dist/components/Modal';\r\nimport { BaseLayout } from 'App';\r\nimport Save from 'assets/Save';\r\nimport FixedHeader from 'components/Headers';\r\nimport _ from 'lodash';\r\nimport React, { useRef, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { db } from 'utils/database';\r\nimport RequestForm from './RequestForm';\r\n\r\nfunction NewRequest(props) {\r\n\tconst requestRef = useRef();\r\n\tconst modalRef = useRef();\r\n\tconst loadingRef = useRef();\r\n\tconst history = useHistory();\r\n\tconst [modalConfig, setModalConfig] = useState({});\r\n\r\n\tconst handleOpenModal = () => {\r\n\t\tmodalRef.current.open();\r\n\t\tsetModalConfig({\r\n\t\t\ttitle: 'Confirmación',\r\n\t\t\tokProps: { text: 'Crear' },\r\n\t\t\tcontent: 'Al hacer clic en \"Crear\", la información ya no se podrá modificar.',\r\n\t\t\tonSubmit: () => handleSave(),\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleSave = async () => {\r\n\t\tconst { active, setActive } = loadingRef.current;\r\n\t\tconst { data, containError } = requestRef.current.getState();\r\n\t\tmodalRef.current.close();\r\n\r\n\t\tif (containError) {\r\n\t\t\tsetActive(false);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetActive(!active);\r\n\r\n\t\tvar sendWithoutFile = _.cloneDeep(data);\r\n\t\tdelete sendWithoutFile.file;\r\n\r\n\t\tvar requestAreaResponse = await db.post('requestArea/SaveRequest', sendWithoutFile);\r\n\t\tvar { state, id } = requestAreaResponse.data;\r\n\r\n\t\tif (state === true) {\r\n\t\t\tconst formData = new FormData();\r\n\t\t\tformData.append('files[]', data.file);\r\n\r\n\t\t\tdb.post(`requestArea/saveImage/${id}`, formData, {\r\n\t\t\t\tprocessData: false,\r\n\t\t\t\theaders: { 'Content-Type': 'multipart/form-data' },\r\n\t\t\t}).then(async (response) => {\r\n\t\t\t\tdb.post(`requestArea/saveDocument/${id}`, sendWithoutFile).then((response) => {\r\n\t\t\t\t\tif (response.data) {\r\n\t\t\t\t\t\tsetActive(!active);\r\n\t\t\t\t\t\thistory.push(`/request-area-view/${id}`);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleRemove = () => {\r\n\t\tmodalRef.current.open();\r\n\t\tsetModalConfig({\r\n\t\t\ttitle: 'Confirmación',\r\n\t\t\tcontent: 'Al presionar \"Aceptar\" se borrará la solicitud.',\r\n\t\t\tokProps: { text: 'Aceptar' },\r\n\t\t\tonSubmit: () => history.push('/request-area'),\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Loading size={400} ref={loadingRef} />\r\n\t\t\t<Modal ref={modalRef} size='small' {...modalConfig} onSubmit={handleSave}>\r\n\t\t\t\t<div className='pd-14'>{modalConfig.content}</div>\r\n\t\t\t</Modal>\r\n\t\t\t<BaseLayout className='request-page ' onChangeTheme={props.onChangeTheme} light={props.light}>\r\n\t\t\t\t<FixedHeader\r\n\t\t\t\t\tclassName='sticky top0'\r\n\t\t\t\t\tleft={<HeaderLeft />}\r\n\t\t\t\t\tright={<HeaderRight onRemove={handleRemove} onSave={handleOpenModal} />}></FixedHeader>\r\n\t\t\t\t<Banner>\r\n\t\t\t\t\t<InfoFilled style={{ marginRight: 8, fontSize: '0.875rem' }} />\r\n\t\t\t\t\tSolo puede firmar el documento luego de guardar los cambios con la información requerida.\r\n\t\t\t\t</Banner>\r\n\t\t\t\t<RequestForm ref={requestRef} mode='new'></RequestForm>\r\n\t\t\t</BaseLayout>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default NewRequest;\r\n\r\nfunction HeaderLeft({ stockName = '' }) {\r\n\treturn (\r\n\t\t<div className='header-left flex-gap-14' style={{ padding: '21px 0' }}>\r\n\t\t\t<LocationTone />\r\n\t\t\t<div>\r\n\t\t\t\t<h1>Nueva solicitud</h1>\r\n\t\t\t\t<span>{stockName}</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction HeaderRight({ onRemove, onSave, allSignatures }) {\r\n\treturn (\r\n\t\t<div className='header-right flex flex-middle'>\r\n\t\t\t<Button onClick={onRemove}>Cancelar</Button>\r\n\t\t\t{!allSignatures && (\r\n\t\t\t\t<Button type='green' prefix={<Save style={{ fontSize: 10 }} />} style={{ marginLeft: 14 }} onClick={onSave}>\r\n\t\t\t\t\tCrear solicitud\r\n\t\t\t\t</Button>\r\n\t\t\t)}\r\n\t\t\t{allSignatures && (\r\n\t\t\t\t<Button prefix={<CheckOutlined style={{ fontSize: 10 }} />} style={{ marginLeft: 14 }} type='primary' onClick={() => onSave('FINISH')}>\r\n\t\t\t\t\tFinalizar aprobación\r\n\t\t\t\t</Button>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n","export const INITIAL_STATE = {\r\n\tmodalConfig: {},\r\n\treturnObservation: null,\r\n\twithoutSignature: false,\r\n\tfile: undefined,\r\n\treturnSignatures: [\r\n\t\t{ area: 'Devolución', responsibles: [{ personaName: null, signed: false, position: 0, signature: null }] },\r\n\t\t{ area: 'Recibe conforme', responsibles: [{ personaName: null, signed: false, position: 0, signature: null }] },\r\n\t],\r\n\trequestReturnId: -1,\r\n\treturnImage: null,\r\n};\r\n\r\nexport function requestReturnFormReducer(state = INITIAL_STATE, action) {\r\n\tswitch (action.type) {\r\n\t\tcase '@returnForm/addSignature':\r\n\t\t\tconst { areaIndex: addAreaIndex, position: positionSignature } = action.payload;\r\n\t\t\tlet returnSignatures = state.returnSignatures;\r\n\r\n\t\t\treturnSignatures[addAreaIndex].responsibles = [\r\n\t\t\t\t...returnSignatures[addAreaIndex].responsibles,\r\n\t\t\t\t{ personaName: '', signed: false, position: positionSignature, signature: '' },\r\n\t\t\t];\r\n\t\t\treturn { ...state, returnSignatures };\r\n\t\tcase '@returnForm/removeSignature':\r\n\t\t\tconst { areaIndex: airemove, responsibleIndex: riremove } = action.payload;\r\n\t\t\tlet signs = state.returnSignatures;\r\n\t\t\tlet responsiblesFilter = signs[airemove].responsibles.filter((_, k) => k !== riremove);\r\n\r\n\t\t\tsigns[airemove].responsibles = responsiblesFilter;\r\n\t\t\treturn { ...state, returnSignatures: signs };\r\n\r\n\t\tcase '@returnForm/updateSignatureProps':\r\n\t\t\tconst { areaIndex: areaindexupd, responsibleIndex: responsibleindexupd, prop: propupd, value: valueupd } = action.payload;\r\n\t\t\tlet signArray = state.returnSignatures;\r\n\r\n\t\t\tsignArray[areaindexupd].responsibles[responsibleindexupd][propupd] = valueupd;\r\n\t\t\treturn { ...state, returnSignatures: signArray };\r\n\r\n\t\tcase '@returnForm/setModalConfig':\r\n\t\t\treturn state.modalConfig\r\n\t\t\t\t? { ...state, modalConfig: { ...state.modalConfig, ...action.payload } }\r\n\t\t\t\t: { ...state, modalConfig: { ...action.payload } };\r\n\r\n\t\tcase '@returnForm/updateRootProp':\r\n\t\t\tconst { prop, value } = action.payload;\r\n\r\n\t\t\tstate[prop] = value;\r\n\t\t\treturn { ...state };\r\n\r\n\t\tcase '@returnForm/updateAll':\r\n\t\t\treturn { ...state, ...action.payload };\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import React from 'react';\r\n\r\nfunction ImageViewer({ url, wrap = false }) {\r\n\treturn <img src={url} style={{ height: '100%', width: wrap && '100%' }} alt='' />;\r\n}\r\n\r\nexport default ImageViewer;\r\n","export const requestReturnValidation = {\r\n\tcheckEmpty: (request, mode) => {\r\n\t\tvar errors = {};\r\n\r\n\t\t// Si se crea una devolucion de area sin firmas\r\n\t\tif (request.withoutSignature) {\r\n\t\t\treturn { data: request, containError: false, errors };\r\n\t\t}\r\n\r\n\t\t(!request.returnObservation || request.returnObservation.trim() === '') && (errors['returnObservation'] = 'Observación es requerido');\r\n\r\n\t\trequest.returnSignatures &&\r\n\t\t\trequest.returnSignatures.forEach((sign) => {\r\n\t\t\t\tsign.responsibles.forEach((resp, respIndex) => {\r\n\t\t\t\t\t(!resp.personaName || resp.personaName.trim() === '') && (errors[`personaName-${sign.area}-${respIndex}`] = 'Nombre es Requerido');\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t!request.returnImage && mode !== 'edit' && (errors['returnImage'] = 'Requerido');\r\n\t\tconst containError = !!Object.keys(errors).length;\r\n\t\treturn { data: request, containError: containError, errors };\r\n\t},\r\n};\r\n","import { DetailsOutlined, ImageOutlined, InfoFilled, PdfTone, TrashcanFilled } from '@outlier-spa/mine-icon';\r\nimport Button from '@outlier-spa/mine/dist/components/Button';\r\nimport Input, { TextArea } from '@outlier-spa/mine/dist/components/Input';\r\nimport Modal from '@outlier-spa/mine/dist/components/Modal';\r\nimport Popover from '@outlier-spa/mine/dist/components/Popover';\r\nimport { Section, SectionHeader } from '@outlier-spa/mine/dist/components/Section';\r\nimport SwitchOptions from '@outlier-spa/mine/dist/components/SwitchOptions';\r\nimport Upload from '@outlier-spa/mine/dist/components/Upload';\r\nimport { TitleInput } from 'components/Common';\r\nimport DrawSignature, { defaultProps as defaultDrawSignatureProps } from 'components/DrawSignature';\r\nimport SignatureViewer, { SIGNED_TEXT } from 'components/DrawSignature/SignatureViewer';\r\nimport Error from 'components/Error';\r\nimport { DetailsHeader } from 'components/Headers';\r\nimport ImageViewer from 'components/ImageViewer';\r\nimport PdfViewer from 'components/PdfViewer';\r\nimport React, { useEffect, useRef } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { DescriptionText } from 'styled';\r\nimport { resizeImage } from 'utils';\r\nimport { requestReturnValidation } from './validation';\r\n\r\nconst imageUrl = `${process.env.REACT_APP_API_URL}RequestReturn/getImage/`;\r\nconst documentUrl = `${process.env.REACT_APP_API_URL}RequestReturn/getDocument/`;\r\n\r\nconst RequestReturnForm = React.forwardRef(({ mode = 'edit', initial, ...rest }, ref) => {\r\n\tconst { id } = rest.match.params;\r\n\tconst modalRef = useRef();\r\n\tconst modalImageRef = useRef();\r\n\tconst signatureRef = useRef();\r\n\tconst modalPdfRef = useRef();\r\n\tconst state = useSelector((selector) => selector.requestReturnFormReducer);\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst handleViewPdf = () => {\r\n\t\tmodalPdfRef.current.open();\r\n\t};\r\n\r\n\tconst handleOpenSignatureModal = (areaIndex, responsibleIndex, prop) => {\r\n\t\tdispatch({ type: '@returnForm/setModalConfig', payload: { title: 'Firma', onSubmit: () => onSubmitModal(areaIndex, responsibleIndex, prop) } });\r\n\t\tmodalRef.current.open();\r\n\t};\r\n\r\n\tconst onSubmitModal = (areaIndex, responsibleIndex, prop) => {\r\n\t\tsignatureRef.current.getBase64Data(null, (uri) => {\r\n\t\t\tdispatch({ type: '@returnForm/updateSignatureProps', payload: { areaIndex, responsibleIndex, prop, value: uri } });\r\n\t\t});\r\n\r\n\t\tdispatch({ type: '@returnForm/updateSignatureProps', payload: { areaIndex, responsibleIndex, prop: 'signed', value: true } });\r\n\t\tmodalRef.current.close();\r\n\t};\r\n\r\n\tconst handleAddSignature = (areaIndex) => {\r\n\t\tdispatch({ type: '@returnForm/addSignature', payload: { areaIndex, position: state.returnSignatures[areaIndex].responsibles.length } });\r\n\t};\r\n\r\n\tconst handleRemoveSignature = (areaIndex, responsibleIndex) => {\r\n\t\tdispatch({ type: '@returnForm/removeSignature', payload: { areaIndex, responsibleIndex } });\r\n\t};\r\n\r\n\tconst updateSignatureProps = (areaIndex, responsibleIndex, prop, value) => {\r\n\t\tdispatch({ type: '@returnForm/updateSignatureProps', payload: { areaIndex, responsibleIndex, prop, value } });\r\n\t};\r\n\r\n\tconst updateRootProps = (prop, value) => {\r\n\t\tdispatch({ type: '@returnForm/updateRootProp', payload: { prop, value } });\r\n\t};\r\n\r\n\tconst changeWithoutSignature = (prop, value) => {\r\n\t\tupdateRootProps(prop, value);\r\n\t\tif (value === true) {\r\n\t\t\tupdateRootProps('returnObservation', 'Devolución sin firmas');\r\n\t\t\tupdateRootProps('errors', {});\r\n\t\t} else {\r\n\t\t\tupdateRootProps('returnObservation', '');\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleChangeUpload = async (evt) => {\r\n\t\tconst { file } = evt.target.files[0].blobFileStruct();\r\n\t\tresizeImage(file, { w: 640, h: 480 }, 'dataURL', function (uri) {\r\n\t\t\tdispatch({ type: '@returnForm/updateRootProp', payload: { prop: 'returnImage', value: uri } });\r\n\t\t\tupdateRootProps('imageLoading', false);\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleViewImage = () => {\r\n\t\tmodalImageRef.current.open();\r\n\t};\r\n\r\n\t// *Validaciones\r\n\tconst handleCheck = () => {\r\n\t\tconst validations = requestReturnValidation.checkEmpty(state, mode);\r\n\r\n\t\tdispatch({ type: '@returnForm/updateRootProp', payload: { prop: 'errors', value: validations.errors } });\r\n\t\treturn validations;\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tupdateRootProps('requestId', id);\r\n\t}, []);\r\n\r\n\tref && (ref.current = { getState: handleCheck });\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Modal ref={modalRef} size='large' title='Autorización y Firma - Planificación corto plazo' {...state.modalConfig}>\r\n\t\t\t\t<div className='pd-14 '>\r\n\t\t\t\t\t<div className='signature-draw-container'>\r\n\t\t\t\t\t\t<DrawSignature\r\n\t\t\t\t\t\t\tref={signatureRef}\r\n\t\t\t\t\t\t\t{...defaultDrawSignatureProps}\r\n\t\t\t\t\t\t\tidentifier={state.modalConfig?.identifier}\r\n\t\t\t\t\t\t\tcanvasWidth='100%'\r\n\t\t\t\t\t\t\tcanvasHeight='80vh'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<DescriptionText style={{ marginTop: 20 }}>\r\n\t\t\t\t\t\tLa firma realizada en este recuadro, será utilizada únicamente en este documento, y no será guardada o manipulada fuera de este.\r\n\t\t\t\t\t</DescriptionText>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t\t<Modal ref={modalImageRef} size='large' cancelProps={{ text: 'Cerrar' }} okProps={{ visible: false }}>\r\n\t\t\t\t<div className='pd-14' style={{ height: '85vh' }}>\r\n\t\t\t\t\t<ImageViewer url={`${imageUrl}${state.requestReturnId}`} wrap></ImageViewer>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\r\n\t\t\t{state.requestReturnId && mode === 'edit' && (\r\n\t\t\t\t<Modal ref={modalPdfRef} cancelProps={{ text: 'Cerrar' }} size='large' okProps={{ visible: false }}>\r\n\t\t\t\t\t<PdfViewer url={`${documentUrl}${state.requestReturnId}`}> </PdfViewer>\r\n\t\t\t\t</Modal>\r\n\t\t\t)}\r\n\r\n\t\t\t{mode === 'edit' && (\r\n\t\t\t\t<Button prefix={<PdfTone />} onClick={handleViewPdf}>\r\n\t\t\t\t\tVer devolución\r\n\t\t\t\t</Button>\r\n\t\t\t)}\r\n\t\t\t<DetailsHeader icon={<DetailsOutlined />} text='Detalles'></DetailsHeader>\r\n\r\n\t\t\t<div className='flex-vgap-20'>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div className='flex'>\r\n\t\t\t\t\t\t<TitleInput>Devolución sin firmas</TitleInput>\r\n\t\t\t\t\t\t<Popover trigger='hover' content='Si se selecciona \"Si\", se crea una solicitud de devolución de área sin requerir firmas.'>\r\n\t\t\t\t\t\t\t<InfoFilled style={{ marginLeft: 10, lineHeight: '1.375rem', cursor: 'pointer' }} />\r\n\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<SwitchOptions\r\n\t\t\t\t\t\tdisabled={mode === 'edit'}\r\n\t\t\t\t\t\tindex={state.withoutSignature ? 0 : 1}\r\n\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\tconst { content } = value;\r\n\t\t\t\t\t\t\tchangeWithoutSignature('withoutSignature', content.toLowerCase() === 'si');\r\n\t\t\t\t\t\t}}></SwitchOptions>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<TitleInput>Observaciones</TitleInput>\r\n\t\t\t\t\t<TextArea\r\n\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\tdisabled={mode === 'edit' || state.withoutSignature}\r\n\t\t\t\t\t\tisError={state.errors && state.errors['returnObservation']}\r\n\t\t\t\t\t\tmessage={state.errors && state.errors['returnObservation']}\r\n\t\t\t\t\t\tvalue={state.returnObservation}\r\n\t\t\t\t\t\tplaceholder='Escriba una observación'\r\n\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\tstate.errors && delete state.errors['returnObservation'];\r\n\t\t\t\t\t\t\tupdateRootProps('returnObservation', value);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tstyle={{ width: 720 }}></TextArea>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='request-page'>\r\n\t\t\t\t\t<TitleInput>Fotografía o Plano de área solicitada</TitleInput>\r\n\t\t\t\t\t{mode !== 'edit' && (\r\n\t\t\t\t\t\t<Error isError={state.errors && state.errors['returnImage']} message={state.errors && state.errors['returnImage']}>\r\n\t\t\t\t\t\t\t{!state.returnImage && (\r\n\t\t\t\t\t\t\t\t<Upload\r\n\t\t\t\t\t\t\t\t\tdisabled={mode === 'edit'}\r\n\t\t\t\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\t\t\t\taccept='.png, .jpg, .jpge'\r\n\t\t\t\t\t\t\t\t\ttext={state.imageLoading ? 'Cargando...' : 'Subir Archivo'}\r\n\t\t\t\t\t\t\t\t\ticon={<ImageOutlined style={{ fontSize: 40 }} />}\r\n\t\t\t\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\t\t\t\tstate.errors && delete state.errors['returnImage'];\r\n\t\t\t\t\t\t\t\t\t\tupdateRootProps('imageLoading', true);\r\n\t\t\t\t\t\t\t\t\t\thandleChangeUpload(value);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{state.returnImage && (\r\n\t\t\t\t\t\t\t\t<Section className='flex flex-middle' style={{ height: 380, position: 'relative' }}>\r\n\t\t\t\t\t\t\t\t\t<TrashcanFilled\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ position: 'absolute', right: 14, top: 14, cursor: 'pointer' }}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tupdateRootProps('imageLoading', false);\r\n\t\t\t\t\t\t\t\t\t\t\tdispatch({ type: '@returnForm/updateRootProp', payload: { prop: 'returnImage', value: null } });\r\n\t\t\t\t\t\t\t\t\t\t}}></TrashcanFilled>\r\n\t\t\t\t\t\t\t\t\t<img src={state.returnImage} style={{ height: 380 }} alt=''></img>\r\n\t\t\t\t\t\t\t\t</Section>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Error>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{mode !== 'new' && (\r\n\t\t\t\t\t\t<Section className='image-preview' style={{ height: 380 }}>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName='flex flex-middle'\r\n\t\t\t\t\t\t\t\tstyle={{ height: '100%', cursor: state.returnImageExists && 'pointer' }}\r\n\t\t\t\t\t\t\t\tonClick={() => state.returnImageExists && handleViewImage()}>\r\n\t\t\t\t\t\t\t\t<ImageViewer url={`${imageUrl}${state.requestReturnId}`}></ImageViewer>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Section>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t{state.returnSignatures?.map((signature, areaIndex) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Section style={{ marginBottom: 20 }} key={areaIndex}>\r\n\t\t\t\t\t\t\t<SectionHeader left={`Firma ${signature.area}`} />\r\n\t\t\t\t\t\t\t<div className='pd-14'>\r\n\t\t\t\t\t\t\t\t{signature.responsibles?.map((ma, responsibleIndex) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Section key={responsibleIndex} type='inner' style={{ marginBottom: 14 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t<SectionHeader\r\n\t\t\t\t\t\t\t\t\t\t\t\tleft={`Firma ${responsibleIndex + 1}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\tright={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsignature.responsibles.length > 1 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmode !== 'edit' && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='section-trashcan-container' onClick={() => handleRemoveSignature(areaIndex, responsibleIndex)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TrashcanFilled />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='pd-14 signature-section'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TitleInput>Nombres</TitleInput>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={mode === 'edit' || state.withoutSignature}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tisError={state.errors && state.errors[`personaName-${signature.area}-${responsibleIndex}`]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessage={state.errors && state.errors[`personaName-${signature.area}-${responsibleIndex}`]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ma.personaName}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ maxWidth: 560, marginBottom: 20 }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={!state.withoutSignature ? 'Escriba nombres y apellidos' : 'Nombre no requerido'}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.errors && delete state.errors[`personaName-${signature.area}-${responsibleIndex}`];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateSignatureProps(areaIndex, responsibleIndex, 'personaName', value);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TitleInput>Firma</TitleInput>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<SignatureViewer\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={ma.signed || state.withoutSignature}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsigned={ma.signed || state.withoutSignature}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsignedText={state.withoutSignature ? 'Firma no requerida' : SIGNED_TEXT}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleOpenSignatureModal(areaIndex, responsibleIndex, 'signature')}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</Section>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t{mode === 'new' && !state.withoutSignature && (\r\n\t\t\t\t\t\t\t\t\t<Button type='green' size='large' onClick={() => handleAddSignature(areaIndex)}>\r\n\t\t\t\t\t\t\t\t\t\tAñadir integrante\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Section>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n});\r\n\r\nexport default RequestReturnForm;\r\n","import Loading from '@outlier-spa/loading';\r\nimport { InfoFilled, LocationTone } from '@outlier-spa/mine-icon';\r\nimport Banner from '@outlier-spa/mine/dist/components/Banner';\r\nimport Button from '@outlier-spa/mine/dist/components/Button';\r\nimport Modal from '@outlier-spa/mine/dist/components/Modal';\r\nimport { BaseLayout } from 'App';\r\nimport Save from 'assets/Save';\r\nimport FixedHeader from 'components/Headers';\r\nimport React, { useCallback, useEffect, useReducer, useRef } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { INITIAL_STATE } from 'reducer/requestReturnFormReducer';\r\nimport { db } from 'utils/database';\r\nimport RequestReturnForm from './RequestReturnForm';\r\nimport { REQUEST_STATE } from '../RequestArea/utils';\r\n\r\nconst initialState = {\r\n\tmodalConfig: {},\r\n\tloading: false,\r\n\tsector: '',\r\n\tstartDate: null,\r\n};\r\n\r\nfunction reducer(state, action) {\r\n\tswitch (action.type) {\r\n\t\tcase 'setModalConfig':\r\n\t\t\treturn state.modalConfig\r\n\t\t\t\t? { ...state, modalConfig: { ...state.modalConfig, ...action.payload } }\r\n\t\t\t\t: { ...state, modalConfig: { ...action.payload } };\r\n\r\n\t\tcase 'updateRootProp':\r\n\t\t\tconst { prop, value } = action.payload;\r\n\r\n\t\t\tstate[prop] = value;\r\n\t\t\treturn { ...state };\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nfunction NewReturnRequest(props) {\r\n\tconst { id: areaRequestId } = props.match.params;\r\n\tconst returnRef = useRef();\r\n\tconst loadingRef = useRef();\r\n\tconst modalRef = useRef();\r\n\tconst history = useHistory();\r\n\tconst [state, dispatch] = useReducer(reducer, initialState);\r\n\tconst globalDispatch = useDispatch();\r\n\r\n\tconst updateRootProps = (prop, value) => {\r\n\t\tdispatch({ type: 'updateRootProp', payload: { prop, value } });\r\n\t};\r\n\r\n\tconst handleOpenModal = (value) => {\r\n\t\tmodalRef.current.open();\r\n\t\tswitch (value) {\r\n\t\t\tcase 'save':\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: 'setModalConfig',\r\n\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\ttitle: 'Crear solicitud de devolución',\r\n\t\t\t\t\t\tcontent: 'Realmente desea crear la solicitud de devolución.',\r\n\t\t\t\t\t\tsize: 'small',\r\n\t\t\t\t\t\tokProps: { text: 'Crear' },\r\n\t\t\t\t\t\tonSubmit: () => handelSave(),\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\tcase 'cancel':\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: 'setModalConfig',\r\n\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\ttitle: 'Cancelar solicitud de devolución',\r\n\t\t\t\t\t\tcontent: 'Al presionar en \"Aceptar\" se descartará la solicitud de devolución',\r\n\t\t\t\t\t\tsize: 'small',\r\n\t\t\t\t\t\tokProps: { text: 'Aceptar', type: 'danger' },\r\n\t\t\t\t\t\tonSubmit: () => {\r\n\t\t\t\t\t\t\thistory.goBack();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\tdefault:\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tconst handelSave = async () => {\r\n\t\tconst { data, containError } = returnRef.current.getState();\r\n\r\n\t\tmodalRef.current.close();\r\n\t\tupdateRootProps('loading', true);\r\n\r\n\t\tif (containError) {\r\n\t\t\tupdateRootProps('loading', false);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdata.returnState = REQUEST_STATE.CREATED;\r\n\r\n\t\tif (data.withoutSignature) data.returnState = REQUEST_STATE.APPROVED;\r\n\r\n\t\t// Guardar solicitud\r\n\t\tdb.post(`RequestReturn/saveReturn`, data).then(async (response) => {\r\n\t\t\tif (response.data) {\r\n\t\t\t\tconst { state } = response.data;\r\n\t\t\t\tif (state === true) {\r\n\t\t\t\t\thistory.push(`/request-area-view/${areaRequestId}`);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tconst findRequest = useCallback(() => {\r\n\t\tdb.get(`RequestArea/getById?arearequestid=${areaRequestId}&showExtension=false&showReturn=false`).then((response) => {\r\n\t\t\tconst { data } = response;\r\n\t\t\tupdateRootProps('requestId', data.requestId);\r\n\t\t\tupdateRootProps('sector', data.sector);\r\n\t\t});\r\n\t}, [areaRequestId]);\r\n\r\n\tuseEffect(() => {\r\n\t\tfindRequest();\r\n\t\tupdateRootProps('returnState', REQUEST_STATE.CREATED);\r\n\t\tglobalDispatch({ type: '@returnForm/updateAll', payload: INITIAL_STATE });\r\n\t}, [findRequest, globalDispatch]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Loading ref={loadingRef} active={state.loading} />\r\n\t\t\t<Modal ref={modalRef} {...state.modalConfig}>\r\n\t\t\t\t<div className='pd-14 '>{state.modalConfig?.content}</div>\r\n\t\t\t</Modal>\r\n\t\t\t<BaseLayout cleanInner className='return-area-page'>\r\n\t\t\t\t<FixedHeader\r\n\t\t\t\t\tclassName='sticky top0'\r\n\t\t\t\t\tleft={<HeaderLeft name={state.sector} />}\r\n\t\t\t\t\tright={<HeaderRight onCancel={() => handleOpenModal('cancel')} onSubmit={() => handleOpenModal('save')} />}></FixedHeader>\r\n\t\t\t\t<Banner>\r\n\t\t\t\t\t<InfoFilled style={{ marginRight: 8, fontSize: '0.875rem' }} />\r\n\t\t\t\t\tSolo puede firmar el documento luego de guardar los cambios con la información requerida.\r\n\t\t\t\t</Banner>\r\n\t\t\t\t<RequestReturnForm ref={returnRef} mode='new' {...props} />\r\n\t\t\t</BaseLayout>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default NewReturnRequest;\r\n\r\nfunction HeaderLeft({ name = '' }) {\r\n\treturn (\r\n\t\t<div className='header-left flex-gap-14' style={{ padding: '21px 0' }}>\r\n\t\t\t<LocationTone />\r\n\t\t\t<div>\r\n\t\t\t\t<h1>Devolución de Área</h1>\r\n\t\t\t\t<span>{name}</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction HeaderRight({ onCancel, onSubmit }) {\r\n\treturn (\r\n\t\t<div className='header-right flex flex-middle'>\r\n\t\t\t<Button onClick={onCancel}>Cancelar</Button>\r\n\t\t\t<Button type='green' prefix={<Save style={{ fontSize: 10 }} />} onClick={onSubmit} style={{ marginLeft: 14 }}>\r\n\t\t\t\tGuardar Cambios\r\n\t\t\t</Button>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import * as React from 'react';\r\n\r\nfunction SvgBoxNoSync(props) {\r\n\treturn (\r\n\t\t<svg width={26} height={21} viewBox='0 0 26 21' fill='none' xmlns='http://www.w3.org/2000/svg' {...props}>\r\n\t\t\t<g clipPath='url(#prefix__clip0)' fill='currentColor'>\r\n\t\t\t\t<path d='M3.797 10.12v2.013l-.88-.424c-.218-.096-.425.156-.288.35l2.074 4.08c.07.1.203.13.308.07l2.041-2.288a.235.235 0 00-.021-.421l-.88-.383v-2.07a.588.588 0 00-.374-.548l-1.66-.598a.235.235 0 00-.32.22z' />\r\n\t\t\t\t<path\r\n\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\td='M20 5.222L10 .5 0 5.222v11.605L10 20.5l10-3.673V5.222zM.71 5.98l8.935 3.75v9.884L.71 16.333V5.98zm18.58 10.353l-8.935 3.281V9.73l8.934-3.75v10.353zm-4.317-9.31l3.801-1.595L10 1.284 6.641 2.87l8.332 4.153zM5.825 3.255l-4.6 2.173L10 9.11l4.11-1.726-8.285-4.13z'\r\n\t\t\t\t/>\r\n\t\t\t</g>\r\n\t\t\t<circle cx={20.5} cy={15} r={5.5} fill='#FF6060' />\r\n\t\t\t<path\r\n\t\t\t\tfillRule='evenodd'\r\n\t\t\t\tclipRule='evenodd'\r\n\t\t\t\td='M21.06 15.91h-1.123l-.235-4.498h1.593l-.235 4.498zm-1.376 1.575c0-.258.069-.453.207-.585.138-.132.339-.198.603-.198.255 0 .452.067.591.202.14.136.21.329.21.58 0 .243-.07.434-.212.574-.141.14-.337.21-.59.21-.257 0-.456-.07-.598-.206-.14-.136-.211-.329-.211-.578z'\r\n\t\t\t\tfill='#fff'\r\n\t\t\t/>\r\n\t\t\t<defs>\r\n\t\t\t\t<clipPath id='prefix__clip0'>\r\n\t\t\t\t\t<path fill='#fff' transform='translate(0 .5)' d='M0 0h20v20H0z' />\r\n\t\t\t\t</clipPath>\r\n\t\t\t</defs>\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default SvgBoxNoSync;\r\n","import * as React from 'react';\r\n\r\nfunction SvgBoxSync(props) {\r\n\treturn (\r\n\t\t<svg width={26} height={21} viewBox='0 0 26 21' fill='none' xmlns='http://www.w3.org/2000/svg' {...props}>\r\n\t\t\t<g clipPath='url(#prefix__clip0)' fill='currentColor'>\r\n\t\t\t\t<path d='M3.797 10.12v2.013l-.88-.424c-.218-.096-.425.156-.288.35l2.074 4.08c.07.1.203.13.308.07l2.041-2.288a.235.235 0 00-.021-.421l-.88-.383v-2.07a.588.588 0 00-.374-.548l-1.66-.598a.235.235 0 00-.32.22z' />\r\n\t\t\t\t<path\r\n\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\tclipRule='evenodd'\r\n\t\t\t\t\td='M20 5.222L10 .5 0 5.222v11.605L10 20.5l10-3.673V5.222zM.71 5.98l8.935 3.75v9.884L.71 16.333V5.98zm18.58 10.353l-8.935 3.281V9.73l8.934-3.75v10.353zm-4.317-9.31l3.801-1.595L10 1.284 6.641 2.87l8.332 4.153zM5.825 3.255l-4.6 2.173L10 9.11l4.11-1.726-8.285-4.13z'\r\n\t\t\t\t/>\r\n\t\t\t</g>\r\n\t\t\t<circle cx={20.5} cy={15} r={5.5} fill='#46BD8D' />\r\n\t\t\t<path\r\n\t\t\t\td='M22.69 13.327a.412.412 0 11.57.596l-3.165 3.025a.412.412 0 01-.57 0l-1.51-1.443a.413.413 0 01.57-.596l1.225 1.17 2.88-2.752z'\r\n\t\t\t\tfill='#fff'\r\n\t\t\t/>\r\n\t\t\t<defs>\r\n\t\t\t\t<clipPath id='prefix__clip0'>\r\n\t\t\t\t\t<path fill='#fff' transform='translate(0 .5)' d='M0 0h20v20H0z' />\r\n\t\t\t\t</clipPath>\r\n\t\t\t</defs>\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default SvgBoxSync;\r\n","import * as React from 'react';\r\n\r\nfunction SvgGeotec(props) {\r\n\treturn (\r\n\t\t<svg width='1em' height='1em' viewBox='0 0 16 17' fill='none' xmlns='http://www.w3.org/2000/svg' {...props}>\r\n\t\t\t<g clipPath='url(#prefix__clip0)' fill='currentColor'>\r\n\t\t\t\t<path d='M10.376 1.443l-.536.536v1.07l1.07.536H12l.4-1.606-2.024-.536zM12.4 10.1l.217 2.204L14 13.3l2-2.083-1.576-2.185L12.4 10.1zM10.948 4.98l-.697.982.284 1.68 1.822.556.414-2.662-1.823-.556zM6.8.5H0v15.2a.8.8 0 00.8.8h11.6l-1.2-4.4-2.8-3.6L8 6.038l.4-2.461L6.8.5z' />\r\n\t\t\t</g>\r\n\t\t\t<defs>\r\n\t\t\t\t<clipPath id='prefix__clip0'>\r\n\t\t\t\t\t<path fill='#fff' transform='translate(0 .5)' d='M0 0h16v16H0z' />\r\n\t\t\t\t</clipPath>\r\n\t\t\t</defs>\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default SvgGeotec;\r\n","import { ReportFilled, TrashcanFilled } from '@outlier-spa/mine-icon';\r\nimport Button from '@outlier-spa/mine/dist/components/Button';\r\nimport DatePicker from '@outlier-spa/mine/dist/components/DatePicker';\r\nimport Input from '@outlier-spa/mine/dist/components/Input';\r\nimport Modal from '@outlier-spa/mine/dist/components/Modal';\r\nimport Select from '@outlier-spa/mine/dist/components/Select';\r\nimport Upload from '@outlier-spa/mine/dist/components/Upload';\r\nimport Save from 'assets/Save';\r\nimport { TitleInput } from 'components/Common';\r\nimport Error from 'components/Error';\r\nimport FixedHeader from 'components/Headers';\r\nimport moment from 'moment';\r\nimport React, { useEffect, useRef } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { toBase64 } from 'utils';\r\nimport { db } from 'utils/database';\r\nimport './styles.scss';\r\nimport Loading from '@outlier-spa/loading';\r\nimport PdfViewer from 'components/PdfViewer';\r\nimport { REQUEST_STATE } from 'pages/RequestArea/utils';\r\n\r\nconst documentUrl = `${process.env.REACT_APP_API_URL}Rgo/getDocument/`;\r\nconst dateFormat = 'DD/MM/YYYY';\r\n\r\nconst updateProps = (prop, value) => ({ type: '@rgo/updateRootProps', payload: { prop: prop, value: value } });\r\n\r\nconst addProp = (data) => ({ type: '@rgo/addProps', payload: data });\r\n\r\nconst activeLoading = (active = true) => ({ type: '@rgo/updateLoading', payload: active });\r\n\r\nconst updateModal = (config) => ({ type: '@rgo/updateModalConfig', payload: config });\r\n\r\nconst Rgo = React.forwardRef(({ mode = 'edit', ...rest }, ref) => {\r\n\tconst modalRef = useRef();\r\n\tconst loadingRef = useRef();\r\n\tconst state = useSelector((selector) => selector.rgoReducer);\r\n\tconst dispatch = useDispatch();\r\n\tconst history = useHistory();\r\n\tconst offline = useSelector((selector) => selector.baseReducer.offline);\r\n\tconst { requestId, sector } = rest;\r\n\r\n\tconst updateRootProps = (prop, value) => {\r\n\t\tdispatch(updateProps(prop, value));\r\n\t};\r\n\r\n\tconst handleChangeUpload = async (evt) => {\r\n\t\tconst { file } = evt.target.files[0].blobFileStruct();\r\n\t\tdispatch(updateProps('rgoFile', file));\r\n\t\tdispatch(updateProps('filePreview', await toBase64(file)));\r\n\t};\r\n\r\n\tconst check = () => {\r\n\t\tvar errors = {};\r\n\t\t!state.sector && state.sector.trim() === '' && (errors['sector'] = 'Requerido');\r\n\r\n\t\tupdateRootProps('errors', errors);\r\n\t\tconst containError = !!Object.keys(errors).length;\r\n\r\n\t\treturn { data: state, containError: containError, errors };\r\n\t};\r\n\r\n\tconst handleRemovePreview = () => {\r\n\t\tdispatch(updateProps('filePreview', undefined));\r\n\t};\r\n\r\n\tconst handleOpenModal = (type) => {\r\n\t\tswitch (type) {\r\n\t\t\tcase 'saveRgo':\r\n\t\t\t\tmodalRef.current.open();\r\n\t\t\t\tdispatch(updateModal({ title: 'Guardar RGO', content: 'Realmente quiere guardar el RGO ', size: 'small', onSubmit: () => handleSave() }));\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleSave = async () => {\r\n\t\tconst { data, containError } = check();\r\n\t\tdispatch(activeLoading());\r\n\t\tmodalRef.current.close();\r\n\r\n\t\tif (containError) {\r\n\t\t\tdispatch(activeLoading(false));\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst { data: dataSave } = await db.post(`Rgo/saveRgo`, data);\r\n\t\tconst { rgoId, state } = dataSave;\r\n\r\n\t\t// Guardar documento\r\n\t\tif (state && data.rgoFile) {\r\n\t\t\tconst formData = new FormData();\r\n\t\t\tformData.append('files[]', data.rgoFile);\r\n\r\n\t\t\tconst rgoDocumentResult = await db.post(`Rgo/saveDocument/${rgoId}`, formData, {\r\n\t\t\t\tprocessData: false,\r\n\t\t\t\theaders: { 'Content-Type': 'multipart/form-data' },\r\n\t\t\t});\r\n\r\n\t\t\tif (rgoDocumentResult.status === 200) rest.onComplete && rest.onComplete();\r\n\t\t}\r\n\r\n\t\tdispatch(activeLoading(false));\r\n\t\tfindRgo();\r\n\t};\r\n\r\n\t// Busca todos los sectores\r\n\tconst findSectors = (value = '') => {\r\n\t\tif (offline) {\r\n\t\t\tdispatch(activeLoading(false));\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdb.get(`Sector/getAll?sector=${value}`)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tif (response.data && response.data.length > 0) {\r\n\t\t\t\t\tvar sectors = response.data.map((sector) => ({ label: sector, value: sector }));\r\n\t\t\t\t\tupdateRootProps('sectors', Object.values(sectors));\r\n\t\t\t\t\tdispatch(activeLoading(false));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((error) => console.debug(error));\r\n\t};\r\n\r\n\t// Busca los datos de la RGO\r\n\tconst findRgo = () => {\r\n\t\tdb.get(`Rgo/get/${requestId}`).then((response) => {\r\n\t\t\tif (response.data) {\r\n\t\t\t\tconst { data } = response;\r\n\t\t\t\tdata.date = data.date ? moment(data.date).format(dateFormat) : moment();\r\n\t\t\t\tdispatch(addProp(data));\r\n\t\t\t}\r\n\t\t\t// NO CONTENT\r\n\t\t\tif (response.status === 204) {\r\n\t\t\t\tdispatch(updateProps('date', moment()));\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tfindSectors();\r\n\t\tupdateRootProps('sector', sector);\r\n\t\tupdateRootProps('areaRequestId', requestId);\r\n\t\tfindRgo();\r\n\t}, []);\r\n\r\n\tconst rgoDisabled = state.state === REQUEST_STATE.CREATED || state.state === REQUEST_STATE.APPROVED;\r\n\r\n\tref && (ref.current = { state: state, getState: check });\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Modal ref={modalRef} {...state.modalConfig}>\r\n\t\t\t\t<div className='pd-14'>{state.modalConfig?.content}</div>\r\n\t\t\t</Modal>\r\n\t\t\t<Loading ref={loadingRef} active={state.loading} />\r\n\t\t\t<div className='flex flex-column flex-vgap-20 rgo-container'>\r\n\t\t\t\t<FixedHeader left={<HeaderLeft state='error' />} right={<HeaderRight showSave={!rgoDisabled} onClick={handleOpenModal} />}></FixedHeader>\r\n\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<TitleInput>Nombre</TitleInput>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tdisabled={rgoDisabled}\r\n\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\tplaceholder='Escriba nombre rgo'\r\n\t\t\t\t\t\tvalue={state.name}\r\n\t\t\t\t\t\tfieldStyle={{ width: 374 }}\r\n\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\tupdateRootProps('name', value);\r\n\t\t\t\t\t\t}}></Input>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<TitleInput>Restricción</TitleInput>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tdisabled={rgoDisabled}\r\n\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\tplaceholder='Escriba restricción'\r\n\t\t\t\t\t\tvalue={state.restriction}\r\n\t\t\t\t\t\tfieldStyle={{ width: 374 }}\r\n\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\tupdateRootProps('restriction', value);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<TitleInput>Sector</TitleInput>\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tdisabled={rgoDisabled}\r\n\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\tplaceholder='Seleccione sector'\r\n\t\t\t\t\t\tvalue={state?.sector}\r\n\t\t\t\t\t\tfieldStyle={{ width: 374 }}\r\n\t\t\t\t\t\toptions={state?.sectors}\r\n\t\t\t\t\t\tonChange={(value, v2) => {\r\n\t\t\t\t\t\t\tupdateRootProps('sector', value);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<TitleInput>Fecha</TitleInput>\r\n\t\t\t\t\t{state.date && (\r\n\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\tdisabled={rgoDisabled}\r\n\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\tplaceholder='Seleccione fecha de rgo'\r\n\t\t\t\t\t\t\tformat={dateFormat}\r\n\t\t\t\t\t\t\tvalue={moment.isMoment(moment(state.date)) ? moment(state.date, dateFormat) : moment()}\r\n\t\t\t\t\t\t\tdisabledDate={(current) => current < moment().subtract(1, 'days').endOf('day')}\r\n\t\t\t\t\t\t\tfieldStyle={{ width: 374 }}\r\n\t\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\t\tupdateRootProps('date', value ? value.format(dateFormat) : null);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div className=' flex flex-space trashcan'>\r\n\t\t\t\t\t\t<TitleInput> {state.documentExists ? 'Rgo existente' : 'Subir Rgo'}</TitleInput>\r\n\t\t\t\t\t\t{state.filePreview && <TrashcanFilled onClick={handleRemovePreview} />}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Error isError={state.errors && state.errors['file']} message='Requerido'>\r\n\t\t\t\t\t\t{!rgoDisabled && !state.filePreview && (\r\n\t\t\t\t\t\t\t<Upload\r\n\t\t\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\t\t\taccept='.pdf, .docx, .doc'\r\n\t\t\t\t\t\t\t\ticon={<ReportFilled style={{ fontSize: 40 }} />}\r\n\t\t\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\t\t\tstate.errors && delete state.errors['file'];\r\n\t\t\t\t\t\t\t\t\thandleChangeUpload(value);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{state.documentExists && <PdfViewer url={`${documentUrl}${state.rgoId}`} />}\r\n\t\t\t\t\t\t{state.filePreview && <PdfViewer url={state.filePreview} />}\r\n\t\t\t\t\t</Error>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n});\r\n\r\nexport default Rgo;\r\n\r\nfunction HeaderLeft({ state }) {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<p>RGO</p>\r\n\t\t\t<span className={`${state === 'success' ? 'success' : 'error'}`}></span>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n// Acciones del lado derecho de la cabecera\r\nfunction HeaderRight({ showSave = true, onClick }) {\r\n\treturn (\r\n\t\t<div className='flex flex-center'>\r\n\t\t\t{showSave && (\r\n\t\t\t\t<Button type='green' prefix={<Save style={{ width: 14, height: 14 }} />} onClick={() => onClick && onClick('saveRgo')}>\r\n\t\t\t\t\tGuardar Cambios\r\n\t\t\t\t</Button>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n","export const requestExtensionValidation = {\r\n\tcheckEmpty: (request) => {\r\n\t\tvar errors = {};\r\n\t\t(!request.dateExtensionAuthorization || request.dateExtensionAuthorization.from === '' || request.dateExtensionAuthorization.from === undefined) &&\r\n\t\t\t(errors['extensionFrom'] = 'Requerido');\r\n\r\n\t\t(!request.dateExtensionAuthorization || request.dateExtensionAuthorization.to === '' || request.dateExtensionAuthorization.to === undefined) &&\r\n\t\t\t(errors['extensionTo'] = 'Requerido');\r\n\r\n\t\t(!request.reasonExtension || request.reasonExtension.trim() === '') && (errors['reasonExtension'] = 'Motivo es Requerido');\r\n\r\n\t\trequest.extensionSignatures &&\r\n\t\t\trequest.extensionSignatures.forEach((sign) => {\r\n\t\t\t\tsign.responsibles.forEach((resp, respIndex) => {\r\n\t\t\t\t\t(!resp.personaName || resp.personaName.trim() === '') && (errors[`personaName-${sign.area}-${respIndex}`] = 'Nombre es Requerido');\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\tconst containError = !!Object.keys(errors).length;\r\n\t\treturn { data: request, containError: containError, errors };\r\n\t},\r\n};\r\n","import { DetailsOutlined, PdfTone, TrashcanFilled } from '@outlier-spa/mine-icon';\r\nimport Button from '@outlier-spa/mine/dist/components/Button';\r\nimport DatePicker from '@outlier-spa/mine/dist/components/DatePicker';\r\nimport Input, { TextArea } from '@outlier-spa/mine/dist/components/Input';\r\nimport Modal from '@outlier-spa/mine/dist/components/Modal';\r\nimport { Section, SectionHeader } from '@outlier-spa/mine/dist/components/Section';\r\nimport Signature from 'assets/Signature';\r\nimport { TitleInput } from 'components/Common';\r\nimport DrawSignature, { defaultProps as defaultDrawSignatureProps } from 'components/DrawSignature';\r\nimport SignatureViewer from 'components/DrawSignature/SignatureViewer';\r\nimport { DetailsHeader } from 'components/Headers';\r\nimport PdfViewer from 'components/PdfViewer';\r\nimport moment from 'moment';\r\nimport React, { useEffect, useRef } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { DescriptionText } from 'styled';\r\nimport '../RequestArea/styles.scss';\r\nimport { requestExtensionValidation } from './validation';\r\n\r\nconst dateFormat = 'DD/MM/YYYY';\r\nconst documentUrl = `${process.env.REACT_APP_API_URL}RequestExtension/getDocument/`;\r\n\r\nconst ExtensionRequest = React.forwardRef(({ mode = 'edit', ...rest }, ref) => {\r\n\tconst { id } = rest.match.params;\r\n\tconst modalRef = useRef();\r\n\tconst signatureRef = useRef();\r\n\tconst modalPdfRef = useRef();\r\n\tconst state = useSelector((selector) => selector.requestExtensionFormReducer);\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst handleViewPdf = () => {\r\n\t\tmodalPdfRef.current.open();\r\n\t\tdispatch({\r\n\t\t\ttype: '@extensionForm/setModalConfig',\r\n\t\t\tpayload: { title: 'Firma', okProps: { visible: false } },\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleOpenSignatureModal = (areaIndex, responsibleIndex, prop) => {\r\n\t\tdispatch({\r\n\t\t\ttype: '@extensionForm/setModalConfig',\r\n\t\t\tpayload: { title: 'Firma', onSubmit: () => onSubmitModal(areaIndex, responsibleIndex, prop) },\r\n\t\t});\r\n\t\tmodalRef.current.open();\r\n\t};\r\n\r\n\tconst onSubmitModal = (areaIndex, responsibleIndex, prop) => {\r\n\t\tsignatureRef.current.getBase64Data(null, (uri) => {\r\n\t\t\tdispatch({ type: '@extensionForm/updateSignatureProps', payload: { areaIndex, responsibleIndex, prop, value: uri } });\r\n\t\t});\r\n\r\n\t\tdispatch({ type: '@extensionForm/updateSignatureProps', payload: { areaIndex, responsibleIndex, prop: 'signed', value: true } });\r\n\t\tmodalRef.current.close();\r\n\t};\r\n\r\n\tconst handleAddSignature = (areaIndex) => {\r\n\t\tdispatch({ type: '@extensionForm/addSignature', payload: { areaIndex, position: state.extensionSignatures[areaIndex].responsibles.length } });\r\n\t};\r\n\r\n\tconst handleRemoveSignature = (areaIndex, responsibleIndex) => {\r\n\t\tdispatch({ type: '@extensionForm/removeSignature', payload: { areaIndex, responsibleIndex } });\r\n\t};\r\n\r\n\tconst updateSignatureProps = (areaIndex, responsibleIndex, prop, value) => {\r\n\t\tdispatch({ type: '@extensionForm/updateSignatureProps', payload: { areaIndex, responsibleIndex, prop, value } });\r\n\t};\r\n\r\n\tconst updateRootProps = (prop, value) => {\r\n\t\tdispatch({ type: '@extensionForm/updateRootProp', payload: { prop, value } });\r\n\t};\r\n\r\n\tconst updateDateExtensionAuthorization = (prop, value) => {\r\n\t\tdispatch({ type: '@extensionForm/updateDateExtensionAuthorization', payload: { prop, value } });\r\n\t};\r\n\r\n\t// *Validaciones\r\n\tconst handleCheck = () => {\r\n\t\tvar validation = requestExtensionValidation.checkEmpty(state);\r\n\t\tdispatch({ type: '@extensionForm/updateRootProp', payload: { prop: 'errors', value: validation.errors } });\r\n\t\treturn validation;\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tmode === 'new' && dispatch({ type: '@extensionForm/clean' });\r\n\t\tupdateRootProps('requestId', Number(id));\r\n\t\tupdateRootProps('extensionState', 'creada');\r\n\t\tupdateDateExtensionAuthorization(\r\n\t\t\t'from',\r\n\t\t\tstate.dateExtensionAuthorization?.from\r\n\t\t\t\t? moment(state.dateExtensionAuthorization.from, dateFormat).format(dateFormat)\r\n\t\t\t\t: rest.startDate && moment(rest.startDate, dateFormat).format(dateFormat)\r\n\t\t);\r\n\t\tupdateDateExtensionAuthorization(\r\n\t\t\t'to',\r\n\t\t\tstate.dateExtensionAuthorization?.to\r\n\t\t\t\t? moment(state.dateExtensionAuthorization.to, dateFormat).format(dateFormat)\r\n\t\t\t\t: rest.startDate && moment(rest.startDate, dateFormat).add(1, 'days').format(dateFormat)\r\n\t\t);\r\n\t}, []);\r\n\r\n\tref && (ref.current = { getState: handleCheck });\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Modal ref={modalPdfRef} cancelProps={{ text: 'Cerrar' }} size='large' {...state.modalConfig}>\r\n\t\t\t\t{state.requestExtensionId && mode === 'edit' && <PdfViewer url={`${documentUrl}${state.requestExtensionId}`}></PdfViewer>}\r\n\t\t\t</Modal>\r\n\r\n\t\t\t<Modal ref={modalRef} size='large' {...state.modalConfig}>\r\n\t\t\t\t<div className='pd-14 '>\r\n\t\t\t\t\t<div className='signature-draw-container'>\r\n\t\t\t\t\t\t<DrawSignature ref={signatureRef} {...defaultDrawSignatureProps} canvasWidth='100%' canvasHeight='80vh' />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<DescriptionText style={{ marginTop: 20 }}>\r\n\t\t\t\t\t\tLa firma realizada en este recuadro, será utilizada únicamente en este documento, y no será guardada o manipulada fuera de este.\r\n\t\t\t\t\t</DescriptionText>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\r\n\t\t\t{mode === 'edit' && (\r\n\t\t\t\t<Button prefix={<PdfTone />} onClick={handleViewPdf}>\r\n\t\t\t\t\tVer Solicitud\r\n\t\t\t\t</Button>\r\n\t\t\t)}\r\n\t\t\t<DetailsHeader icon={<DetailsOutlined />} text='Detalles'></DetailsHeader>\r\n\t\t\t<div className='flex-vgap-20'>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div className='inline-fields'>\r\n\t\t\t\t\t\t<TitleInput children='Fecha Inicial' />\r\n\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\tdisabled={mode === 'edit'}\r\n\t\t\t\t\t\t\tdisabledDate={(current) => current && current <= moment(rest.startDate, dateFormat).subtract(1, 'days').endOf('day')}\r\n\t\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\t\tstate.dateExtensionAuthorization?.from\r\n\t\t\t\t\t\t\t\t\t? moment(state.dateExtensionAuthorization.from, dateFormat)\r\n\t\t\t\t\t\t\t\t\t: rest.startDate && moment(rest.startDate, dateFormat)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplaceholder={dateFormat}\r\n\t\t\t\t\t\t\tformat={dateFormat}\r\n\t\t\t\t\t\t\tonChange={(value) => value && updateDateExtensionAuthorization('from', value.format(dateFormat))}\r\n\t\t\t\t\t\t\tstyle={{ width: 180 }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='inline-fields'>\r\n\t\t\t\t\t\t<TitleInput children='Fecha Final' />\r\n\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\tdisabled={mode === 'edit'}\r\n\t\t\t\t\t\t\tdisabledDate={(current) => current && current <= moment(rest.startDate, dateFormat).endOf('day')}\r\n\t\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\t\tstate.dateExtensionAuthorization?.to\r\n\t\t\t\t\t\t\t\t\t? moment(state.dateExtensionAuthorization.to, dateFormat)\r\n\t\t\t\t\t\t\t\t\t: rest.startDate && moment(rest.startDate, dateFormat).add(1, 'days')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplaceholder={dateFormat}\r\n\t\t\t\t\t\t\tformat={dateFormat}\r\n\t\t\t\t\t\t\tonChange={(value) => value && updateDateExtensionAuthorization('to', value.format(dateFormat))}\r\n\t\t\t\t\t\t\tstyle={{ width: 180 }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<TitleInput children='Motivo de la extensión' />\r\n\t\t\t\t\t<TextArea\r\n\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\tdisabled={mode === 'edit'}\r\n\t\t\t\t\t\tisError={state.errors && state.errors['reasonExtension']}\r\n\t\t\t\t\t\tmessage={state.errors && state.errors['reasonExtension']}\r\n\t\t\t\t\t\tvalue={state.reasonExtension}\r\n\t\t\t\t\t\tplaceholder='Escriba un motivo para la extensión'\r\n\t\t\t\t\t\tstyle={{ width: 860 }}\r\n\t\t\t\t\t\tfieldStyle={{ height: 200 }}\r\n\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\tstate.errors && delete state.errors['reasonExtension'];\r\n\t\t\t\t\t\t\tupdateRootProps('reasonExtension', value);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<DetailsHeader icon={<Signature />} text='Firmas Responsables'></DetailsHeader>\r\n\t\t\t\t\t{state.extensionSignatures?.map((signature, areaIndex) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Section style={{ marginBottom: 20 }} key={areaIndex}>\r\n\t\t\t\t\t\t\t\t<SectionHeader left={`Firma ${signature.area} extensión`} />\r\n\t\t\t\t\t\t\t\t<div className='pd-14'>\r\n\t\t\t\t\t\t\t\t\t{signature.responsibles?.map((ma, responsibleIndex) => {\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<Section key={responsibleIndex} type='inner' style={{ marginBottom: 14 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<SectionHeader\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tleft={`Firma ${responsibleIndex + 1}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tright={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsignature.responsibles.length > 1 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmode !== 'edit' && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='section-trashcan-container' onClick={() => handleRemoveSignature(areaIndex, responsibleIndex)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TrashcanFilled />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='pd-14 signature-section'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TitleInput>Nombres</TitleInput>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={mode === 'edit'}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisError={state.errors && state.errors[`personaName-${signature.area}-${responsibleIndex}`]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage={state.errors && state.errors[`personaName-${signature.area}-${responsibleIndex}`]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ma.personaName}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ maxWidth: 560, marginBottom: 20 }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Escriba nombres y apellidos'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.errors && delete state.errors[`personaName-${signature.area}-${responsibleIndex}`];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateSignatureProps(areaIndex, responsibleIndex, 'personaName', value);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TitleInput>Firma</TitleInput>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<SignatureViewer\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={ma.signed}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsigned={ma.signed}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleOpenSignatureModal(areaIndex, responsibleIndex, 'signature')}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</Section>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t{mode === 'new' && (\r\n\t\t\t\t\t\t\t\t\t\t<Button type='green' size='large' onClick={() => handleAddSignature(areaIndex)}>\r\n\t\t\t\t\t\t\t\t\t\t\tAñadir integrante\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Section>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n});\r\n\r\nexport default ExtensionRequest;\r\n","import { colors } from '@outlier-spa/mine/dist/config/themes';\r\nimport { Tabs } from 'antd';\r\nimport styled from 'styled-components';\r\n\r\nexport const TabStyle = styled(Tabs)`\r\n\t&.ant-tabs {\r\n\t\tcolor: ${({ theme }) => theme.fontColor};\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t}\r\n\r\n\t&.ant-tabs > .ant-tabs-nav .ant-tabs-nav-wrap {\r\n\t\toverflow: inherit;\r\n\t}\r\n\r\n\t[data-tooltip]:after {\r\n\t\tcolor: ${({ theme }) => theme.fontColor};\r\n\t}\r\n\r\n\t.ant-tabs-content,\r\n\t.ant-tabs-content-holder,\r\n\t.ant-tabs-tabpane {\r\n\t\tdisplay: flex;\r\n\t\tflex: 1;\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t.ant-tabs-tab-btn {\r\n\t\tfont-style: normal;\r\n\t\tfont-weight: normal !important;\r\n\t\tfont-size: 1.125rem;\r\n\t\tline-height: 1.5625rem;\r\n\r\n\t\tsvg {\r\n\t\t\tvertical-align: middle;\r\n\t\t}\r\n\t}\r\n\r\n\t.ant-tabs-tab.ant-tabs-tab-active .ant-tabs-tab-btn,\r\n\t.ant-tabs-tab:hover,\r\n\t.ant-tabs-tab-btn:focus {\r\n\t\tcolor: ${colors.skyblue};\r\n\t}\r\n\r\n\t.ant-tabs-tab.ant-tabs-tab-disabled,\r\n\t.ant-tabs-tab.ant-tabs-tab-disabled .ant-tabs-tab-btn:active {\r\n\t\tcolor: ${({ theme }) => theme.secondaryColor};\r\n\t\topacity: 0.5;\r\n\t\tcursor: default;\r\n\t}\r\n\r\n\t.ant-tabs-ink-bar {\r\n\t\tbackground: ${colors.skyblue};\r\n\t}\r\n\r\n\t&.ant-tabs > .ant-tabs-nav .ant-tabs-nav-list {\r\n\t\tcolor: ${({ theme }) => theme.secondaryColor};\r\n\t}\r\n\r\n\t&.ant-tabs-top > .ant-tabs-nav::before,\r\n\t&.ant-tabs-bottom > .ant-tabs-nav::before,\r\n\t&.ant-tabs-top > div > .ant-tabs-nav::before,\r\n\t&.ant-tabs-bottom > div > .ant-tabs-nav::before {\r\n\t\tborder-bottom: 1px solid ${({ theme }) => theme.fieldBorder};\r\n\t}\r\n\r\n\t.ant-collapse-header {\r\n\t\t.separator {\r\n\t\t\t&::after {\r\n\t\t\t\tbackground-color: ${({ theme }) => theme.fieldBorder};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n","import Loading from '@outlier-spa/loading';\r\nimport { CalendarSimpleOutlined, CheckOutlined, ExportFilled, LocationFilled, LocationTone, ReportFilled } from '@outlier-spa/mine-icon';\r\nimport Button from '@outlier-spa/mine/dist/components/Button';\r\nimport Modal from '@outlier-spa/mine/dist/components/Modal';\r\nimport Popover from '@outlier-spa/mine/dist/components/Popover';\r\nimport { colors } from '@outlier-spa/mine/dist/config/themes';\r\nimport { Collapse, Tabs } from 'antd';\r\nimport { BaseLayout } from 'App';\r\nimport BoxNoSync from 'assets/BoxNoSync';\r\nimport BoxSync from 'assets/BoxSync';\r\nimport Geotec from 'assets/Geotec';\r\nimport Save from 'assets/Save';\r\nimport FixedHeader from 'components/Headers';\r\nimport NotFound from 'components/NotFound';\r\nimport Tag from 'components/Tag';\r\nimport _ from 'lodash';\r\nimport Hep from 'pages/Hep';\r\nimport PlatformDelivery from 'pages/PlatformDelivery';\r\nimport Rgo from 'pages/Rgo';\r\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { DescriptionText, Dot } from 'styled';\r\nimport { db } from 'utils/database';\r\nimport indexDB from 'utils/db';\r\nimport './collapse.scss';\r\nimport RequestExtensionForm from '../RequestExtension/RequestExtensionForm';\r\nimport RequestForm from './RequestForm';\r\nimport RequestReturnForm from '../RequestReturn/RequestReturnForm';\r\nimport { TabStyle } from './styles';\r\nimport './styles.scss';\r\nimport { MODE, REQUEST_STATE, TAB_INDEX } from './utils';\r\n\r\nconst syncProp = {\r\n\tsyncIcon: <BoxSync style={{ marginLeft: 10, fontSize: 20, verticalAlign: 'middle' }} />,\r\n\tnoSyncIcon: <BoxNoSync style={{ marginLeft: 10, fontSize: 20, verticalAlign: 'middle' }} />,\r\n\tsyncText: 'Datos descargados.',\r\n\tnoSyncText: `Antes de ir a una zona sin conexión a internet, \\ndescargue los datos de los  sondajes para completar esta sección.`,\r\n};\r\n\r\nconst stateDict = Object.freeze({\r\n\t1: { text: 'creada', step: 'Solicitud de área', bgColor: colors.skyblue, fontColor: colors.skyblue, opacity: 1 },\r\n\t2: { text: 'aprobada', step: 'Solicitud de área', bgColor: colors.skyblue, fontColor: colors.skyblue, opacity: 1 },\r\n\t3: { text: 'Faltan firmas', step: 'Solicitud de área', bgColor: colors.red, fontColor: colors.red, opacity: 1 },\r\n\t4: { text: 'creada', step: 'Extensión de solicitud', bgColor: colors.skyblue, fontColor: colors.skyblue, opacity: 1 },\r\n\t5: { text: 'aprobada', step: 'Extensión de solicitud', bgColor: colors.skyblue, fontColor: colors.skyblue, opacity: 1 },\r\n\t6: { text: 'Faltan firmas', step: 'Extensión de solicitud', bgColor: colors.red, fontColor: colors.red, opacity: 1 },\r\n\t7: { text: 'creada', step: 'Devolución de área', bgColor: colors.skyblue, fontColor: colors.skyblue, opacity: 1 },\r\n\t8: { text: 'Área devuelta', step: 'Devolución de área', bgColor: '', fontColor: '', opacity: 0.6 },\r\n\t9: { text: 'Faltan firmas', step: 'Devolución de área', bgColor: colors.red, fontColor: colors.red, opacity: 1 },\r\n});\r\n\r\nconst apiPath = `${process.env.REACT_APP_API_URL}RequestArea/download/files/`;\r\n\r\nconst { TabPane } = Tabs;\r\nconst { Panel } = Collapse;\r\n\r\nfunction getKeyByValue(object, value) {\r\n\treturn Object.keys(object).find((key) => object[key] === value);\r\n}\r\n\r\nexport function HeaderSeparator({ children }) {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<span className='separator'></span>\r\n\t\t\t<span className='content'>{children}</span>\r\n\t\t\t<span className='separator'></span>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nconst updateModal = (config) => ({ type: '@requestBase/updateModalConfig', payload: config });\r\n\r\nfunction RequestBase({ onChangeTheme, light, status = MODE.EDITING, ...rest }) {\r\n\tconst { id } = rest.match.params;\r\n\tconst modalRef = useRef();\r\n\tconst loadingRef = useRef();\r\n\tconst requestRef = useRef();\r\n\tconst rgoRef = useRef();\r\n\tconst requestExtensionRef = useRef();\r\n\tconst requestReturnRef = useRef();\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst baseState = useSelector((selector) => selector.baseReducer);\r\n\tconst state = useSelector((selector) => selector.requestReducer);\r\n\tconst offline = useSelector((selector) => selector.baseReducer.offline);\r\n\tconst dispatch = useDispatch();\r\n\tconst history = useHistory();\r\n\r\n\tconst handleOpenModal = (type) => {\r\n\t\tswitch (type) {\r\n\t\t\tcase 'saveRequest':\r\n\t\t\t\tmodalRef.current.open();\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tupdateModal({\r\n\t\t\t\t\t\ttitle: 'Guardar Solicitud',\r\n\t\t\t\t\t\tcontent: 'Realmente desea guardar la solicitud',\r\n\t\t\t\t\t\tsize: 'small',\r\n\t\t\t\t\t\tonSubmit: () => handleSave(type),\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'approvedRequest':\r\n\t\t\t\tmodalRef.current.open();\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tupdateModal({\r\n\t\t\t\t\t\ttitle: 'Aprobar Solicitud',\r\n\t\t\t\t\t\tcontent: 'Realmente desea aprobar las solicitud.',\r\n\t\t\t\t\t\tsize: 'small',\r\n\t\t\t\t\t\tokProps: { text: 'Aprobar' },\r\n\t\t\t\t\t\ttype: 'primary',\r\n\t\t\t\t\t\tonSubmit: () => handleSave(type),\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'newExtension':\r\n\t\t\t\thistory.push(`/extension-request/${state.requestId}`);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'newReturn':\r\n\t\t\t\thistory.push(`/return-request/${state.requestId}`);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'download':\r\n\t\t\t\thandleDownload();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'saveExtension':\r\n\t\t\t\tmodalRef.current.open();\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tupdateModal({\r\n\t\t\t\t\t\ttitle: 'Guardar Extensión',\r\n\t\t\t\t\t\tcontent: 'Realmente desea guardar la solicitud de extensión.',\r\n\t\t\t\t\t\tsize: 'small',\r\n\t\t\t\t\t\tonSubmit: () => handleSaveExtension(),\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'removeExtension':\r\n\t\t\t\tmodalRef.current.open();\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tupdateModal({\r\n\t\t\t\t\t\ttitle: 'Cancelar Extensión',\r\n\t\t\t\t\t\tcontent: 'Realmente desea cancelar la solicitud',\r\n\t\t\t\t\t\tsize: 'small',\r\n\t\t\t\t\t\tonSubmit: () => handleRemoveExtension(),\r\n\t\t\t\t\t\tokProps: { type: 'danger', text: 'Aceptar' },\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'saveReturn':\r\n\t\t\t\tmodalRef.current.open();\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tupdateModal({\r\n\t\t\t\t\t\ttitle: 'Guardar devolución',\r\n\t\t\t\t\t\tcontent: 'Realmente desea guardar la solicitud de devolución de área.',\r\n\t\t\t\t\t\tsize: 'small',\r\n\t\t\t\t\t\tonSubmit: () => handleSaveReturn(),\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleDownload = async () => {\r\n\t\tdb.get(`​RequestArea/getFiles/${state.requestId}`, { responseType: 'arraybuffer' }).then((response) => {\r\n\t\t\tif (response.data) {\r\n\t\t\t\tlet blob = new Blob([response.data], { type: 'application/pdf' });\r\n\t\t\t\tlet link = document.createElement('a');\r\n\t\t\t\tlink.href = window.URL.createObjectURL(blob);\r\n\t\t\t\tlink.download = `Solicitud-preview`;\r\n\t\t\t\tdocument.body.appendChild(link);\r\n\t\t\t\tlink.click();\r\n\t\t\t\tdocument.body.removeChild(link);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t// * Guarda firmas de solicitud de devolución de área\r\n\tconst handleSaveReturn = () => {\r\n\t\tconst { data, containError } = requestReturnRef.current.getState();\r\n\t\tconst signMeta = { current: 0, total: 0 };\r\n\r\n\t\tmodalRef.current.close();\r\n\t\tsetLoading(true);\r\n\r\n\t\tif (containError) {\r\n\t\t\tsetLoading(false);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (signMeta.current === signMeta.total) {\r\n\t\t\tdata.returnState = REQUEST_STATE.APPROVED;\r\n\t\t}\r\n\r\n\t\tdb.post(`RequestReturn/saveReturn`, data).then(async (response) => {\r\n\t\t\tif (response.data) {\r\n\t\t\t\tconst { state } = response.data;\r\n\t\t\t\tif (state === true) {\r\n\t\t\t\t\thistory.go();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t// * Guarda extensión (Actualiza las firmas)\r\n\tconst handleSaveExtension = () => {\r\n\t\tconst { data, containError } = requestExtensionRef.current.getState();\r\n\t\tconst signMeta = { current: 0, total: 0 };\r\n\t\tconst formData = new FormData();\r\n\r\n\t\tmodalRef.current.close();\r\n\t\tsetLoading(true);\r\n\r\n\t\tif (containError) {\r\n\t\t\tsetLoading(false);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdata.extensionSignatures.forEach((signature, index) => {\r\n\t\t\tsignMeta['total'] += signature.responsibles.length;\r\n\t\t\tsignMeta['current'] += signature.responsibles.filter((r) => r.signed).length;\r\n\t\t});\r\n\r\n\t\tdata.extensionState = REQUEST_STATE.CREATED;\r\n\r\n\t\tif (signMeta.current === signMeta.total) {\r\n\t\t\tdata.extensionState = REQUEST_STATE.APPROVED;\r\n\t\t}\r\n\r\n\t\tdb.post('RequestExtension/save', data)\r\n\t\t\t.then(async (response) => {\r\n\t\t\t\tif (response.data) {\r\n\t\t\t\t\thistory.push(`/request-area-view/${state.requestId}`);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t});\r\n\t};\r\n\r\n\t// * Elimina la solicitud\r\n\tconst handleRemoveExtension = () => {};\r\n\r\n\t// * Guarda la solicitud de área\r\n\tconst handleSave = async (type) => {\r\n\t\tvar { data, containError } = requestRef.current.getState();\r\n\t\tconst signMeta = { current: 0, total: 0 };\r\n\t\tconst formData = new FormData();\r\n\r\n\t\tmodalRef.current.close();\r\n\t\tsetLoading(true);\r\n\r\n\t\tif (containError) {\r\n\t\t\tsetLoading(false);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst dataClone = _.cloneDeep(data);\r\n\t\tdataClone.signatures = dataClone.signatures.map((sing) => {\r\n\t\t\tsing.responsibles = sing.responsibles.map((res) => {\r\n\t\t\t\tdelete res.signature;\r\n\t\t\t\treturn res;\r\n\t\t\t});\r\n\r\n\t\t\treturn sing;\r\n\t\t});\r\n\r\n\t\tdata.signatures.forEach((signature, index) => {\r\n\t\t\tsignMeta['total'] += signature.responsibles.length;\r\n\t\t\tsignMeta['current'] += signature.responsibles.filter((r) => r.signed).length;\r\n\t\t\tsignature.responsibles.forEach((responsible) => {\r\n\t\t\t\tvar file = responsible.signature;\r\n\t\t\t\tformData.append(`file-${signature.area}-${index}-${responsible.position}-${responsible.personaName}`, file);\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tif (signMeta.current === signMeta.total) {\r\n\t\t\tdataClone.requestState = REQUEST_STATE.APPROVED;\r\n\t\t}\r\n\r\n\t\tdb.post('RequestArea/SaveRequest', dataClone).then(async (response) => {\r\n\t\t\tif (response.data) {\r\n\t\t\t\tdb.post(`RequestArea/updateSignature/${state.requestId}`, formData, {\r\n\t\t\t\t\tprocessData: false,\r\n\t\t\t\t\theaders: { 'Content-Type': 'multipart/form-data' },\r\n\t\t\t\t\tresponseType: 'arraybuffer',\r\n\t\t\t\t}).then((responseSignature) => {\r\n\t\t\t\t\thistory.go();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t//* Habilita las secciones siguientes (HEP/ entrega de plataforma)\r\n\tconst handleRgoComplete = () => {\r\n\t\tfindAreaRequest(id);\r\n\t};\r\n\r\n\tconst findAreaRequest = useCallback(async (arearequestid) => {\r\n\t\tsetLoading(true);\r\n\t\tif (offline) {\r\n\t\t\tsetLoading(false);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst platformCache = await indexDB.table('platformCache').toArray();\r\n\t\tconst hepCache = await indexDB.table('hepCache').toArray();\r\n\r\n\t\tdb.get(`RequestArea/getById?arearequestid=${arearequestid}`).then((response) => {\r\n\t\t\tif (response.data) {\r\n\t\t\t\tconst { data } = response;\r\n\t\t\t\tlet sync = true;\r\n\t\t\t\tlet hepSync = true;\r\n\t\t\t\tdata.recommendedWells.forEach((r) => {\r\n\t\t\t\t\tsync = platformCache.length > 0 ? sync && !!platformCache.find((p) => p.recuperation === r.recommendation) : false;\r\n\t\t\t\t\thepSync = hepCache.length > 0 ? hepSync && !!hepCache.find((hc) => hc.Nombre_Propuesto === r.recommendation) : false;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: '@requestBase/updateAllData',\r\n\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\tplatformDeliverySync: sync,\r\n\t\t\t\t\t\thepSync: hepSync,\r\n\t\t\t\t\t\tstate: data.requestState,\r\n\t\t\t\t\t\trequestId: arearequestid,\r\n\t\t\t\t\t\tnameRequest: data.sector,\r\n\t\t\t\t\t\texistsExtension: data.existsExtension,\r\n\t\t\t\t\t\texistsReturn: data.existsReturn,\r\n\t\t\t\t\t\tall: data,\r\n\t\t\t\t\t\trgoExists: data.rgoExists,\r\n\t\t\t\t\t\textensionState: data.extensionState,\r\n\t\t\t\t\t\treturnState: data.returnState,\r\n\t\t\t\t\t\trequiredRgo: data.requiredRgo,\r\n\t\t\t\t\t\ttotalSigned: data.totalSigned,\r\n\t\t\t\t\t\ttotalSignature: data.totalSignature,\r\n\t\t\t\t\t\tcardState: data.cardState,\r\n\t\t\t\t\t\tfrom: !data.existsExtension\r\n\t\t\t\t\t\t\t? data.dateAuthorization.from\r\n\t\t\t\t\t\t\t: data.existsReturn\r\n\t\t\t\t\t\t\t? data.returnCreateAt\r\n\t\t\t\t\t\t\t: data.existsExtension && !data.existsReturn && (data.extensionState === REQUEST_STATE.APPROVED || REQUEST_STATE.CREATED)\r\n\t\t\t\t\t\t\t? data.dateExtensionAuthorization.from\r\n\t\t\t\t\t\t\t: '',\r\n\t\t\t\t\t\tto: !data.existsExtension\r\n\t\t\t\t\t\t\t? data.dateAuthorization.to\r\n\t\t\t\t\t\t\t: data.existsReturn\r\n\t\t\t\t\t\t\t? data.returnCreateAt\r\n\t\t\t\t\t\t\t: data.existsExtension && !data.existsReturn && (data.extensionState === REQUEST_STATE.APPROVED || REQUEST_STATE.CREATED)\r\n\t\t\t\t\t\t\t? data.dateExtensionAuthorization.to\r\n\t\t\t\t\t\t\t: '',\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdispatch({ type: '@base/updateAll', payload: { platformDeliverySync: sync, hepSync: hepSync } });\r\n\t\t\t\t// Actualiza el estado global para la solicitud de extension\r\n\t\t\t\tdispatch({ type: '@extensionForm/updateAll', payload: data });\r\n\t\t\t\t// Actualiza el estado global para la solicitud de devolución\r\n\t\t\t\tdispatch({ type: '@returnForm/updateAll', payload: data });\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t}\r\n\t\t});\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tfindAreaRequest(id);\r\n\r\n\t\treturn () => dispatch({ type: '@base/updateRootProp', payload: { prop: 'tab', value: TAB_INDEX.REQUEST } });\r\n\t}, [id]);\r\n\r\n\tconst hiddenExtension =\r\n\t\tstate.state === REQUEST_STATE.CREATED ||\r\n\t\tstate.extensionState === REQUEST_STATE.CREATED ||\r\n\t\tstate.returnState === REQUEST_STATE.CREATED ||\r\n\t\tstate.returnState === REQUEST_STATE.APPROVED ||\r\n\t\tstate.tab === TAB_INDEX.RGO ||\r\n\t\tstate.tab === TAB_INDEX.HEP ||\r\n\t\tstate.tab === TAB_INDEX.PLATFORM_DELIVERY ||\r\n\t\t(!state.rgoExists && state.requiredRgo);\r\n\r\n\tconst hiddenReturn =\r\n\t\tstate.state === REQUEST_STATE.CREATED ||\r\n\t\t(state.existsExtension && state.extensionState === REQUEST_STATE.CREATED) ||\r\n\t\tstate.returnState === REQUEST_STATE.CREATED ||\r\n\t\tstate.returnState === REQUEST_STATE.APPROVED ||\r\n\t\tstate.tab === TAB_INDEX.RGO ||\r\n\t\tstate.tab === TAB_INDEX.HEP ||\r\n\t\tstate.tab === TAB_INDEX.PLATFORM_DELIVERY ||\r\n\t\t(!state.rgoExists && state.requiredRgo);\r\n\r\n\tconst hepDisabled = state.state === REQUEST_STATE.CREATED || (state.requiredRgo && !state.rgoExists);\r\n\tconst platformDisabled = state.state === REQUEST_STATE.CREATED || (state.requiredRgo && !state.rgoExists);\r\n\r\n\tconst defaultAccordion =\r\n\t\tstate.returnState === REQUEST_STATE.CREATED || state.returnState === REQUEST_STATE.APPROVED\r\n\t\t\t? 'return'\r\n\t\t\t: state.extensionState === REQUEST_STATE.CREATED || state.extensionState === REQUEST_STATE.APPROVED\r\n\t\t\t? 'extension'\r\n\t\t\t: 'request';\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Loading ref={loadingRef} active={loading} />\r\n\t\t\t<Modal ref={modalRef} {...state?.modalConfig}>\r\n\t\t\t\t<div className='pd-14'>{state?.modalConfig?.content || null}</div>\r\n\t\t\t</Modal>\r\n\t\t\t<BaseLayout className='request-page especial-collapse' cleanInner onChangeTheme={onChangeTheme} light={light}>\r\n\t\t\t\t{state.state && !loading && (\r\n\t\t\t\t\t<FixedHeader\r\n\t\t\t\t\t\tclassName='sticky top0'\r\n\t\t\t\t\t\tshowSeparator={false}\r\n\t\t\t\t\t\tleft={<HeaderLeft {...state} />}\r\n\t\t\t\t\t\tright={\r\n\t\t\t\t\t\t\t<HeaderRight\r\n\t\t\t\t\t\t\t\tshowDownload={state.state === REQUEST_STATE.APPROVED}\r\n\t\t\t\t\t\t\t\tshowNewExtension={!hiddenExtension}\r\n\t\t\t\t\t\t\t\tshowNewReturn={!hiddenReturn}\r\n\t\t\t\t\t\t\t\tshowSave={state.state === REQUEST_STATE.CREATED && state.totalSignature !== state.totalSigned}\r\n\t\t\t\t\t\t\t\tshowExtensionSave={state.extensionState === REQUEST_STATE.CREATED}\r\n\t\t\t\t\t\t\t\tshowRemoveExtension={state.extensionState === REQUEST_STATE.CREATED}\r\n\t\t\t\t\t\t\t\t//Return\r\n\t\t\t\t\t\t\t\tshowReturnSave={state.returnState === REQUEST_STATE.CREATED}\r\n\t\t\t\t\t\t\t\tdownloadPath={`${apiPath}${state.requestId}`}\r\n\t\t\t\t\t\t\t\tonClick={handleOpenModal}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}></FixedHeader>\r\n\t\t\t\t)}\r\n\t\t\t\t{!state.state && (\r\n\t\t\t\t\t<div className='flex flex-middle flex-1'>\r\n\t\t\t\t\t\t<NotFound />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t{state.state && !loading && state.state === REQUEST_STATE.CREATED && <RequestForm ref={requestRef} {...rest} />}\r\n\t\t\t\t{state.state && !loading && state.state !== REQUEST_STATE.CREATED && (\r\n\t\t\t\t\t<TabStyle\r\n\t\t\t\t\t\tactiveKey={getKeyByValue(TAB_INDEX, baseState.tab)}\r\n\t\t\t\t\t\tonChange={(value) => {\r\n\t\t\t\t\t\t\thistory.push(rest.match.url);\r\n\t\t\t\t\t\t\tdispatch({ type: '@base/updateRootProp', payload: { prop: 'tab', value: TAB_INDEX[value] } });\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<TabPane\r\n\t\t\t\t\t\t\tdisabled={false}\r\n\t\t\t\t\t\t\ttab={\r\n\t\t\t\t\t\t\t\t<HeaderSeparator>\r\n\t\t\t\t\t\t\t\t\t<ReportFilled />\r\n\t\t\t\t\t\t\t\t\t<span style={{ marginLeft: 10 }}>Detalle Solicitud</span>\r\n\t\t\t\t\t\t\t\t</HeaderSeparator>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tkey='REQUEST'>\r\n\t\t\t\t\t\t\t<Collapse accordion defaultActiveKey={[defaultAccordion]}>\r\n\t\t\t\t\t\t\t\t<Panel\r\n\t\t\t\t\t\t\t\t\theader={\r\n\t\t\t\t\t\t\t\t\t\t<HeaderSeparator>\r\n\t\t\t\t\t\t\t\t\t\t\t<LocationFilled />\r\n\t\t\t\t\t\t\t\t\t\t\t<span style={{ marginLeft: 10 }}>Solicitud de área</span>\r\n\t\t\t\t\t\t\t\t\t\t</HeaderSeparator>\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tkey='request'>\r\n\t\t\t\t\t\t\t\t\t<RequestForm ref={requestRef} {...rest} />\r\n\t\t\t\t\t\t\t\t</Panel>\r\n\r\n\t\t\t\t\t\t\t\t{state.existsExtension && (\r\n\t\t\t\t\t\t\t\t\t<Panel\r\n\t\t\t\t\t\t\t\t\t\theader={\r\n\t\t\t\t\t\t\t\t\t\t\t<HeaderSeparator>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<CalendarSimpleOutlined />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span style={{ marginLeft: 10 }}>Extensión de solicitud</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</HeaderSeparator>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tkey='extension'>\r\n\t\t\t\t\t\t\t\t\t\t<RequestExtensionForm ref={requestExtensionRef} {...rest} />\r\n\t\t\t\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t{state.existsReturn && (\r\n\t\t\t\t\t\t\t\t\t<Panel\r\n\t\t\t\t\t\t\t\t\t\theader={\r\n\t\t\t\t\t\t\t\t\t\t\t<HeaderSeparator>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ExportFilled />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span style={{ marginLeft: 10 }}>Devolucion de área</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</HeaderSeparator>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tkey='return'>\r\n\t\t\t\t\t\t\t\t\t\t{state?.all && <RequestReturnForm ref={requestReturnRef} {...rest} initial={state?.all} />}\r\n\t\t\t\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Collapse>\r\n\t\t\t\t\t\t</TabPane>\r\n\t\t\t\t\t\t<TabPane\r\n\t\t\t\t\t\t\tdisabled={state.state === REQUEST_STATE.CREATED || !state.requiredRgo}\r\n\t\t\t\t\t\t\ttab={\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<Geotec /> <span style={{ marginLeft: 10 }}>R-GO</span>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tkey='RGO'>\r\n\t\t\t\t\t\t\t{id && <Rgo ref={rgoRef} requestId={id} sector={state.nameRequest} onComplete={handleRgoComplete} />}\r\n\t\t\t\t\t\t</TabPane>\r\n\t\t\t\t\t\t<TabPane\r\n\t\t\t\t\t\t\tstyle={{ height: 'max-content' }}\r\n\t\t\t\t\t\t\tdisabled={hepDisabled}\r\n\t\t\t\t\t\t\ttab={\r\n\t\t\t\t\t\t\t\t<TabTitle\r\n\t\t\t\t\t\t\t\t\tdisabled={hepDisabled}\r\n\t\t\t\t\t\t\t\t\tsync={baseState.hepSync}\r\n\t\t\t\t\t\t\t\t\tdisabledText='Para habilitar esta seccion debe agregar un RGO'\r\n\t\t\t\t\t\t\t\t\ttitle='HEP'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tkey='HEP'>\r\n\t\t\t\t\t\t\t<Hep areaRequestId={id} />\r\n\t\t\t\t\t\t</TabPane>\r\n\t\t\t\t\t\t<TabPane\r\n\t\t\t\t\t\t\tdisabled={platformDisabled}\r\n\t\t\t\t\t\t\ttab={\r\n\t\t\t\t\t\t\t\t<TabTitle\r\n\t\t\t\t\t\t\t\t\tdisabled={platformDisabled}\r\n\t\t\t\t\t\t\t\t\tsync={baseState.platformDeliverySync}\r\n\t\t\t\t\t\t\t\t\tdisabledText='Para habilitar esta seccion debe agregar un RGO'\r\n\t\t\t\t\t\t\t\t\ttitle='Formulario Entrega'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tkey='PLATFORM_DELIVERY'>\r\n\t\t\t\t\t\t\t<PlatformDelivery requestId={id} {...rest} />\r\n\t\t\t\t\t\t</TabPane>\r\n\t\t\t\t\t</TabStyle>\r\n\t\t\t\t)}\r\n\t\t\t</BaseLayout>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default RequestBase;\r\n\r\nfunction HeaderLeft({ nameRequest, totalSigned = 0, totalSignature = 0, from, to, cardState }) {\r\n\tconst { bgColor, fontColor, step } = stateDict[cardState] ?? { bgColor: '', fontColor: '' };\r\n\r\n\treturn (\r\n\t\t<div className='header-left'>\r\n\t\t\t<LocationTone />\r\n\t\t\t<div className='header-left-text-container'>\r\n\t\t\t\t<div className='header-left-principal-text'>\r\n\t\t\t\t\t<DescriptionText as='span'>{nameRequest}</DescriptionText>\r\n\t\t\t\t\t<Tag size='small' rounded colorTranslucence={bgColor} style={{ color: fontColor }}>\r\n\t\t\t\t\t\t{totalSignature - totalSigned !== 0 ? 'Faltan Firmas' : 'Firmado'}\r\n\t\t\t\t\t</Tag>\r\n\t\t\t\t</div>\r\n\t\t\t\t<span className='header-left-secondary-text'>\r\n\t\t\t\t\t<DescriptionText as='span'>{step}</DescriptionText>\r\n\t\t\t\t\t<Dot />\r\n\t\t\t\t\t<span style={{ color: fontColor, fontWeight: 600 }}>\r\n\t\t\t\t\t\t{totalSigned}/{totalSignature} Firmas necesarias\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<Dot />\r\n\t\t\t\t\t<DescriptionText as='span'>\r\n\t\t\t\t\t\t{from} a {to}\r\n\t\t\t\t\t</DescriptionText>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction HeaderRight({\r\n\tonRemove,\r\n\tshowSave,\r\n\tonClick,\r\n\tshowApproved,\r\n\tshowDownload,\r\n\tshowNewExtension,\r\n\tshowExtensionSave,\r\n\tshowRemoveExtension,\r\n\tshowReturnSave,\r\n\tshowNewReturn,\r\n\tdownloadPath,\r\n}) {\r\n\treturn (\r\n\t\t<div className='flex flex-gap-10 flex-middle'>\r\n\t\t\t{showDownload && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<a className='button green' href={downloadPath} target='_blank' rel='noreferrer'>\r\n\t\t\t\t\t\t<ReportFilled style={{ fontSize: 10, marginRight: 10 }} /> <span style={{ whiteSpace: 'nowrap' }}>Descargar Archivos</span>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t\t{onRemove && (\r\n\t\t\t\t<Button onClick={onRemove} style={{ marginLeft: 14 }}>\r\n\t\t\t\t\tCancelar Solicitud\r\n\t\t\t\t</Button>\r\n\t\t\t)}\r\n\r\n\t\t\t{showRemoveExtension && (\r\n\t\t\t\t<Button onClick={() => onClick('removeExtension')} style={{ marginLeft: 14 }}>\r\n\t\t\t\t\t<span style={{ whiteSpace: 'nowrap' }}>Cancelar Extensión</span>\r\n\t\t\t\t</Button>\r\n\t\t\t)}\r\n\t\t\t{showSave && (\r\n\t\t\t\t<Button type='green' prefix={<Save style={{ fontSize: 10 }} />} onClick={() => onClick('saveRequest')} style={{ marginLeft: 14 }}>\r\n\t\t\t\t\t<span style={{ whiteSpace: 'nowrap' }}>Guardar Cambios Solicitud</span>\r\n\t\t\t\t</Button>\r\n\t\t\t)}\r\n\t\t\t{showExtensionSave && (\r\n\t\t\t\t<Button type='green' prefix={<Save style={{ fontSize: 10 }} />} onClick={() => onClick('saveExtension')} style={{ marginLeft: 14 }}>\r\n\t\t\t\t\t<span style={{ whiteSpace: 'nowrap' }}>Guardar Cambios Extensión</span>\r\n\t\t\t\t</Button>\r\n\t\t\t)}\r\n\t\t\t{showReturnSave && (\r\n\t\t\t\t<Button type='green' prefix={<Save style={{ fontSize: 10 }} />} onClick={() => onClick('saveReturn')} style={{ marginLeft: 14 }}>\r\n\t\t\t\t\t<span style={{ whiteSpace: 'nowrap' }}>Guardar Cambios Devolución</span>\r\n\t\t\t\t</Button>\r\n\t\t\t)}\r\n\r\n\t\t\t{showApproved && (\r\n\t\t\t\t<Button\r\n\t\t\t\t\tprefix={<CheckOutlined style={{ fontSize: 10 }} />}\r\n\t\t\t\t\tonClick={() => onClick('approvedRequest')}\r\n\t\t\t\t\ttype='primary'\r\n\t\t\t\t\tstyle={{ marginLeft: 14 }}>\r\n\t\t\t\t\t<span style={{ whiteSpace: 'nowrap' }}>Finalizar aprobación</span>\r\n\t\t\t\t</Button>\r\n\t\t\t)}\r\n\r\n\t\t\t{showNewExtension && (\r\n\t\t\t\t<Button prefix={<CalendarSimpleOutlined style={{ fontSize: 10 }} />} onClick={() => onClick('newExtension')} style={{ marginLeft: 14 }}>\r\n\t\t\t\t\t<span style={{ whiteSpace: 'nowrap' }}>Solicitar Extensión</span>\r\n\t\t\t\t</Button>\r\n\t\t\t)}\r\n\t\t\t{showNewReturn && (\r\n\t\t\t\t<Button prefix={<ExportFilled style={{ fontSize: 10 }} />} onClick={() => onClick('newReturn')} style={{ marginLeft: 14 }}>\r\n\t\t\t\t\t<span style={{ whiteSpace: 'nowrap' }}>Devolución de área</span>\r\n\t\t\t\t</Button>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction TabTitle({ disabled, sync, disabledText, title }) {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{!disabled && <span style={{ marginLeft: 10 }}>{title}</span>}\r\n\t\t\t{disabled && (\r\n\t\t\t\t<Popover trigger='hover' content={<span>{disabledText}</span>}>\r\n\t\t\t\t\t{title}\r\n\t\t\t\t</Popover>\r\n\t\t\t)}\r\n\t\t\t{!disabled && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Popover trigger='hover' content={<span>{sync ? syncProp.syncText : syncProp.noSyncText}</span>}>\r\n\t\t\t\t\t\t{sync ? syncProp.syncIcon : syncProp.noSyncIcon}\r\n\t\t\t\t\t</Popover>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n}\r\n","export const INITIAL_STATE = {\r\n\tmodalConfig: {},\r\n\tloading: false,\r\n\tsector: '',\r\n\tstartDate: null,\r\n};\r\n\r\nexport function newRequestExtensionReducer(state = INITIAL_STATE, action) {\r\n\tswitch (action.type) {\r\n\t\tcase '@newExtension/setModalConfig':\r\n\t\t\treturn state.modalConfig\r\n\t\t\t\t? { ...state, modalConfig: { ...state.modalConfig, ...action.payload } }\r\n\t\t\t\t: { ...state, modalConfig: { ...action.payload } };\r\n\r\n\t\tcase '@newExtension/updateRootProp':\r\n\t\t\tconst { prop, value } = action.payload;\r\n\r\n\t\t\tstate[prop] = value;\r\n\t\t\treturn { ...state };\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import Loading from '@outlier-spa/loading';\r\nimport { InfoFilled, LocationTone } from '@outlier-spa/mine-icon';\r\nimport Banner from '@outlier-spa/mine/dist/components/Banner';\r\nimport Button from '@outlier-spa/mine/dist/components/Button';\r\nimport Modal from '@outlier-spa/mine/dist/components/Modal';\r\nimport { BaseLayout } from 'App';\r\nimport Save from 'assets/Save';\r\nimport FixedHeader from 'components/Headers';\r\nimport _ from 'lodash';\r\nimport moment from 'moment';\r\nimport { REQUEST_STATE } from 'pages/RequestArea/utils';\r\nimport React, { useCallback, useEffect, useReducer, useRef } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { INITIAL_STATE, newRequestExtensionReducer } from 'reducer/newRequestExtensionReducer';\r\nimport { db } from 'utils/database';\r\nimport '../RequestArea/styles.scss';\r\nimport RequestExtensionForm from './RequestExtensionForm';\r\n\r\nfunction NewExtensionRequest(props) {\r\n\tconst [state, dispatch] = useReducer(newRequestExtensionReducer, INITIAL_STATE);\r\n\tconst { id: areaRequestId } = props.match.params;\r\n\tconst extensionRef = useRef();\r\n\tconst loadingRef = useRef();\r\n\tconst modalRef = useRef();\r\n\tconst history = useHistory();\r\n\r\n\tconst updateRootProps = (prop, value) => {\r\n\t\tdispatch({ type: '@newExtension/updateRootProp', payload: { prop, value } });\r\n\t};\r\n\r\n\tconst handleOpenModal = (value) => {\r\n\t\tmodalRef.current.open();\r\n\t\tswitch (value) {\r\n\t\t\tcase 'save':\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: '@newExtension/setModalConfig',\r\n\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\ttitle: 'Crear solicitud de extensión',\r\n\t\t\t\t\t\tcontent: 'Realmente desea crear la solicitud de extensión.',\r\n\t\t\t\t\t\tsize: 'small',\r\n\t\t\t\t\t\tokProps: { text: 'Crear solicitud' },\r\n\t\t\t\t\t\tonSubmit: () => handelSave(),\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\tcase 'cancel':\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: '@newExtension/setModalConfig',\r\n\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\ttitle: 'Cancelar solicitud de extensión',\r\n\t\t\t\t\t\tcontent: 'Al presionar en \"Aceptar\" se descartará la solicitud de extensión',\r\n\t\t\t\t\t\tsize: 'small',\r\n\t\t\t\t\t\tokProps: { text: 'Aceptar', type: 'danger' },\r\n\t\t\t\t\t\tonSubmit: () => {\r\n\t\t\t\t\t\t\thistory.goBack();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\tdefault:\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tconst handelSave = async () => {\r\n\t\tconst { data, containError } = extensionRef.current.getState();\r\n\t\tconst signMeta = { current: 0, total: 0 };\r\n\r\n\t\tmodalRef.current.close();\r\n\t\tupdateRootProps('loading', true);\r\n\r\n\t\tif (containError) {\r\n\t\t\tupdateRootProps('loading', false);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdata.extensionSignatures.forEach((signature, index) => {\r\n\t\t\tsignMeta['total'] += signature.responsibles.length;\r\n\t\t\tsignMeta['current'] += signature.responsibles.filter((r) => r.signed).length;\r\n\t\t});\r\n\r\n\t\tdata.extensionState = REQUEST_STATE.CREATED;\r\n\r\n\t\tif (signMeta.current === signMeta.total) {\r\n\t\t\tdata.extensionState = REQUEST_STATE.APPROVED;\r\n\t\t}\r\n\r\n\t\tupdateRootProps('loading', false);\r\n\t\tdb.post('RequestExtension/save', data)\r\n\t\t\t.then(async (response) => {\r\n\t\t\t\tif (response.data) {\r\n\t\t\t\t\thistory.push(`/request-area-view/${areaRequestId}`);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tupdateRootProps('loading', false);\r\n\t\t\t});\r\n\t};\r\n\r\n\tconst findRequest = useCallback(() => {\r\n\t\tdb.get(`RequestArea/getById?arearequestid=${areaRequestId}&showExtension=false&showReturn=false`).then((response) => {\r\n\t\t\tconst { data } = response;\r\n\t\t\tupdateRootProps('requestId', areaRequestId);\r\n\t\t\tupdateRootProps('sector', data.sector);\r\n\t\t\tupdateRootProps('startDate', data.dateAuthorization.to);\r\n\t\t});\r\n\t}, [areaRequestId]);\r\n\r\n\tuseEffect(() => {\r\n\t\tfindRequest();\r\n\t}, [findRequest]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Loading ref={loadingRef} active={state.loading} />\r\n\t\t\t<Modal ref={modalRef} {...state.modalConfig}>\r\n\t\t\t\t<div className='pd-14 '>{state.modalConfig?.content}</div>\r\n\t\t\t</Modal>\r\n\t\t\t<BaseLayout cleanInner className='extension-request-page' style={{ padding: '0' }}>\r\n\t\t\t\t<FixedHeader\r\n\t\t\t\t\tclassName='sticky top0'\r\n\t\t\t\t\tleft={<HeaderLeft name={state.sector} />}\r\n\t\t\t\t\tright={<HeaderRight onCancel={() => handleOpenModal('cancel')} onSubmit={() => handleOpenModal('save')} />}></FixedHeader>\r\n\t\t\t\t<Banner>\r\n\t\t\t\t\t<InfoFilled style={{ marginRight: 8, fontSize: '0.875rem' }} />\r\n\t\t\t\t\tSolo puede firmar el documento luego de guardar los cambios con la información requerida.\r\n\t\t\t\t</Banner>\r\n\t\t\t\t{state.startDate && <RequestExtensionForm ref={extensionRef} mode='new' startDate={moment(state.startDate, 'DD/MM/YYYY')} {...props} />}\r\n\t\t\t</BaseLayout>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default NewExtensionRequest;\r\n\r\nfunction HeaderLeft({ name = '' }) {\r\n\treturn (\r\n\t\t<div className='header-left flex-gap-14' style={{ padding: '21px 0' }}>\r\n\t\t\t<LocationTone />\r\n\t\t\t<div>\r\n\t\t\t\t<h1>Extensión de solicitud</h1>\r\n\t\t\t\t<span>{name}</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction HeaderRight({ onCancel, onSubmit }) {\r\n\treturn (\r\n\t\t<div className='header-right flex flex-middle'>\r\n\t\t\t<Button onClick={onCancel}>Cancelar</Button>\r\n\t\t\t<Button type='green' prefix={<Save style={{ fontSize: 10 }} />} onClick={onSubmit} style={{ marginLeft: 14 }}>\r\n\t\t\t\tGuardar Cambios\r\n\t\t\t</Button>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { TAB_INDEX } from 'pages/RequestArea/utils';\r\nimport indexDB from 'utils/db';\r\n\r\nconst INITIAL_STATE = {\r\n\tcurrentAreaHoles: [],\r\n\tcurrentAreaRequest: { requestAreaId: -1, holes: [] },\r\n\ttab: TAB_INDEX.REQUEST,\r\n\tplatformDelivery: [],\r\n\theps: [],\r\n\thepSync: false,\r\n\tloading: true,\r\n\tplatformDeliverySync: false,\r\n\tplatformSelected: {},\r\n\tinstalled: false,\r\n\tareaRequests: [],\r\n\tareaRequest: {},\r\n\toffline: false,\r\n};\r\n\r\nexport function baseReducer(state = INITIAL_STATE, { type, payload }) {\r\n\tswitch (type) {\r\n\t\t// guarda los sondajes de la solicitud seleccionada.\r\n\t\tcase '@base/updateHoles':\r\n\t\t\tconst currentAreaRequest = state.currentAreaRequest;\r\n\t\t\tcurrentAreaRequest.holes = payload;\r\n\r\n\t\t\treturn { ...state, currentAreaRequest: currentAreaRequest };\r\n\r\n\t\t// Sobreescribe los datos de la solicitud\r\n\t\tcase '@base/updateCurrentAreaRequest':\r\n\t\t\treturn { ...state, currentAreaRequest: { ...state.currentAreaRequest, ...payload } };\r\n\r\n\t\tcase '@base/updateRootProp':\r\n\t\t\tconst { prop, value } = payload;\r\n\t\t\tstate[prop] = value;\r\n\t\t\treturn { ...state };\r\n\r\n\t\tcase '@base/addPlatform':\r\n\t\t\treturn { ...state, platformDelivery: [...state.platformDelivery, ...payload] };\r\n\r\n\t\tcase '@base/replacePlatform':\r\n\t\t\treturn { ...state, platformDelivery: payload };\r\n\r\n\t\tcase '@base/replaceHep':\r\n\t\t\treturn { ...state, heps: payload };\r\n\r\n\t\tcase '@base/updatePlatform':\r\n\t\t\tconst { holeid, arearequestid, prop: propPlatform, value: valuePlatform } = payload;\r\n\t\t\tconst platformDelivery = state.platformDelivery;\r\n\t\t\tconst find = platformDelivery.find((p) => p.holeid === holeid);\r\n\t\t\tfind[propPlatform] = valuePlatform;\r\n\t\t\tindexDB.baseReducer.add({ ...state, platformDelivery: platformDelivery });\r\n\t\t\treturn { ...state, platformDelivery: platformDelivery };\r\n\r\n\t\t// area request (listado de todas las solicitudes)\r\n\t\tcase '@base/cleanAreaRequests':\r\n\t\t\treturn { ...state, areaRequests: [] };\r\n\t\tcase '@base/addAreaRequests':\r\n\t\t\treturn { ...state, areaRequests: [...state.areaRequests, payload] };\r\n\t\tcase '@base/replaceAreaRequests':\r\n\t\t\treturn { ...state, areaRequests: payload };\r\n\r\n\t\t// Solicitud de área seleccionada\r\n\t\tcase '@base/addRequest':\r\n\t\t\treturn { ...state, areaRequest: payload };\r\n\r\n\t\t// Entrega plataforma seleccionada\r\n\t\tcase '@base/updatePlatformSelected':\r\n\t\t\treturn { ...state, platformSelected: payload };\r\n\r\n\t\tcase '@base/updateAll':\r\n\t\t\treturn { ...state, ...payload };\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","export const INITIAL_STATE = {\r\n\tmodalConfig: {},\r\n\tloading: false,\r\n\tsector: '',\r\n\tstartDate: null,\r\n};\r\n\r\nexport function newRequestReturnReducer(state = INITIAL_STATE, action) {\r\n\tswitch (action.type) {\r\n\t\tcase '@newReturn/setModalConfig':\r\n\t\t\treturn state.modalConfig\r\n\t\t\t\t? { ...state, modalConfig: { ...state.modalConfig, ...action.payload } }\r\n\t\t\t\t: { ...state, modalConfig: { ...action.payload } };\r\n\r\n\t\tcase '@newReturn/updateRootProp':\r\n\t\t\tconst { prop, value } = action.payload;\r\n\r\n\t\t\tstate[prop] = value;\r\n\t\t\treturn { ...state };\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","export const INITIAL_STATE = {\r\n\tmodalConfig: {},\r\n\tdateExtensionAuthorization: { from: null, to: null },\r\n\treasonExtension: '',\r\n\textensionSignatures: [\r\n\t\t{ area: 'Solicita', responsibles: [{ personaName: null, signed: false, position: 0, signature: null }] },\r\n\t\t{ area: 'Autoriza', responsibles: [{ personaName: null, signed: false, position: 0, signature: null }] },\r\n\t],\r\n};\r\n\r\nexport function requestExtensionFormReducer(state = INITIAL_STATE, action) {\r\n\tswitch (action.type) {\r\n\t\tcase '@extensionForm/addSignature':\r\n\t\t\tconst { areaIndex: addAreaIndex, position: positionSignature } = action.payload;\r\n\t\t\tlet extensionSignatures = state.extensionSignatures;\r\n\r\n\t\t\textensionSignatures[addAreaIndex].responsibles = [\r\n\t\t\t\t...extensionSignatures[addAreaIndex].responsibles,\r\n\t\t\t\t{ personaName: null, signed: false, position: positionSignature, signature: null },\r\n\t\t\t];\r\n\t\t\treturn { ...state, extensionSignatures };\r\n\t\tcase '@extensionForm/removeSignature':\r\n\t\t\tconst { areaIndex: airemove, responsibleIndex: riremove } = action.payload;\r\n\t\t\tlet signs = state.extensionSignatures;\r\n\t\t\tlet responsiblesFilter = signs[airemove].responsibles.filter((_, k) => k !== riremove);\r\n\r\n\t\t\tsigns[airemove].responsibles = responsiblesFilter;\r\n\t\t\treturn { ...state, extensionSignatures: signs };\r\n\r\n\t\tcase '@extensionForm/updateSignatureProps':\r\n\t\t\tconst { areaIndex: areaindexupd, responsibleIndex: responsibleindexupd, prop: propupd, value: valueupd } = action.payload;\r\n\t\t\tlet signArray = state.extensionSignatures;\r\n\r\n\t\t\tsignArray[areaindexupd].responsibles[responsibleindexupd][propupd] = valueupd;\r\n\t\t\treturn { ...state, extensionSignatures: signArray };\r\n\r\n\t\tcase '@extensionForm/setModalConfig':\r\n\t\t\treturn state.modalConfig\r\n\t\t\t\t? { ...state, modalConfig: { ...state.modalConfig, ...action.payload } }\r\n\t\t\t\t: { ...state, modalConfig: { ...action.payload } };\r\n\r\n\t\tcase '@extensionForm/updateRootProp':\r\n\t\t\tconst { prop, value } = action.payload;\r\n\r\n\t\t\tstate[prop] = value;\r\n\t\t\treturn { ...state };\r\n\r\n\t\tcase '@extensionForm/updateDateExtensionAuthorization':\r\n\t\t\tconst { prop: propdateauthorization, value: valuedateauthorization } = action.payload;\r\n\r\n\t\t\tlet dateExtensionAuthorization = state.dateExtensionAuthorization;\r\n\t\t\tdateExtensionAuthorization[propdateauthorization] = valuedateauthorization;\r\n\t\t\treturn { ...state, dateExtensionAuthorization };\r\n\r\n\t\tcase '@extensionForm/updateAll':\r\n\t\t\treturn { ...state, ...action.payload };\r\n\r\n\t\tcase '@extensionForm/clean':\r\n\t\t\treturn {\r\n\t\t\t\tmodalConfig: {},\r\n\t\t\t\tdateExtensionAuthorization: { from: null, to: null },\r\n\t\t\t\treasonExtension: '',\r\n\t\t\t\textensionSignatures: [\r\n\t\t\t\t\t{ area: 'Solicita', responsibles: [{ personaName: null, signed: false, position: 0, signature: null }] },\r\n\t\t\t\t\t{ area: 'Autoriza', responsibles: [{ personaName: null, signed: false, position: 0, signature: null }] },\r\n\t\t\t\t],\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import { REQUEST_STATE } from 'pages/RequestArea/utils';\r\n\r\nexport const INITIAL_STATE = { modalConfig: {}, loading: true, requestState: REQUEST_STATE.CREATED, tab: 0 };\r\n\r\nexport function requestReducer(state = INITIAL_STATE, action) {\r\n\tswitch (action.type) {\r\n\t\tcase '@requestBase/updateModalConfig':\r\n\t\t\treturn { ...state, modalConfig: { ...action.payload } };\r\n\t\tcase '@requestBase/updateLoading':\r\n\t\t\treturn { ...state, loading: action.payload };\r\n\t\tcase '@requestBase/updateRootProp':\r\n\t\t\tconst { prop, value } = action.payload;\r\n\r\n\t\t\tstate[prop] = value;\r\n\t\t\treturn { ...state };\r\n\t\tcase '@requestBase/updateAllData':\r\n\t\t\treturn { ...state, ...action.payload };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n}\r\n","import { REQUEST_STATE } from 'pages/RequestArea/utils';\r\n\r\nexport const INITIAL_STATE = {\r\n\tname: '',\r\n\trestriction: '',\r\n\tsector: '',\r\n\tsectors: [],\r\n\tdate: null,\r\n\trgoFile: null,\r\n\trgoId: -1,\r\n\trgoName: '',\r\n\terrors: {},\r\n\tfilePreview: null,\r\n\tmodalConfig: { content: null },\r\n\tloading: true,\r\n\tstate: REQUEST_STATE.NO_CREATED,\r\n};\r\n\r\nexport function rgoReducer(state = INITIAL_STATE, action) {\r\n\tswitch (action.type) {\r\n\t\tcase '@rgo/updateRootProps':\r\n\t\t\tconst { prop, value } = action.payload;\r\n\r\n\t\t\tstate[prop] = value;\r\n\r\n\t\t\treturn { ...state };\r\n\r\n\t\tcase '@rgo/addProps':\r\n\t\t\treturn { ...state, ...action.payload };\r\n\r\n\t\tcase '@rgo/updateLoading':\r\n\t\t\treturn { ...state, loading: action.payload };\r\n\r\n\t\tcase '@rgo/updateModalConfig':\r\n\t\t\treturn { ...state, modalConfig: { ...action.payload } };\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import { useState } from 'react';\r\nimport moment from 'moment';\r\n\r\nconst getInstallPromptLastSeenAt = (promptName) => localStorage.getItem(promptName);\r\n\r\nconst setInstallPromptSeenToday = (promptName) => {\r\n\tconst today = moment().toISOString();\r\n\tlocalStorage.setItem(promptName, today);\r\n};\r\n\r\nfunction getUserShouldBePromptedToInstall(promptName, daysToWaitBeforePromptingAgain) {\r\n\tconst lastPrompt = moment(getInstallPromptLastSeenAt(promptName));\r\n\tconst daysSinceLastPrompt = moment().diff(lastPrompt, 'days');\r\n\tconsole.log('lastPrompt', lastPrompt, isNaN(daysSinceLastPrompt) || daysSinceLastPrompt > daysToWaitBeforePromptingAgain);\r\n\treturn isNaN(daysSinceLastPrompt) || daysSinceLastPrompt > daysToWaitBeforePromptingAgain;\r\n}\r\n\r\nconst useShouldShowPrompt = (promptName, daysToWaitBeforePromptingAgain = 30) => {\r\n\tconst [userShouldBePromptedToInstall, setUserShouldBePromptedToInstall] = useState(\r\n\t\tgetUserShouldBePromptedToInstall(promptName, daysToWaitBeforePromptingAgain)\r\n\t);\r\n\r\n\tconst handleUserSeeingInstallPrompt = () => {\r\n\t\tsetUserShouldBePromptedToInstall(false);\r\n\t\tsetInstallPromptSeenToday(promptName);\r\n\t};\r\n\r\n\treturn [userShouldBePromptedToInstall, handleUserSeeingInstallPrompt];\r\n};\r\nexport default useShouldShowPrompt;\r\n","import { useState, useEffect } from 'react';\r\nimport useShouldShowPrompt from './useShouldShowPrompt';\r\n\r\nconst webInstallPromptedAt = 'webInstallPromptedAt';\r\n\r\nconst useWebInstallPrompt = () => {\r\n\tconst [installPromptEvent, setInstallPromptEvent] = useState();\r\n\tconst [userShouldBePromptedToInstall, handleUserSeeingInstallPrompt] = useShouldShowPrompt(webInstallPromptedAt);\r\n\r\n\twindow.addEventListener('beforeinstallprompt', function (e) {\r\n\t\t// log the platforms provided as options in an install prompt\r\n\t\tconsole.log('>>>>>>', e.platforms); // e.g., [\"web\", \"android\", \"windows\"]\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tconsole.log('userShouldBePromptedToInstall', userShouldBePromptedToInstall, 'window', window);\r\n\t\tconst beforeInstallPromptHandler = (event) => {\r\n\t\t\tconsole.log('beforeInstallPromptHandler', event);\r\n\t\t\t// event.preventDefault();\r\n\r\n\t\t\t// check if user has already been asked\r\n\t\t\tif (userShouldBePromptedToInstall) {\r\n\t\t\t\t// store the event for later use\r\n\t\t\t\tsetInstallPromptEvent(event);\r\n\t\t\t}\r\n\t\t};\r\n\t\twindow.addEventListener('beforeinstallprompt', beforeInstallPromptHandler);\r\n\t\t// return () => window.removeEventListener('beforeinstallprompt', beforeInstallPromptHandler);\r\n\t}, [userShouldBePromptedToInstall]);\r\n\r\n\tconst handleInstallDeclined = () => {\r\n\t\thandleUserSeeingInstallPrompt();\r\n\t\tsetInstallPromptEvent(null);\r\n\t};\r\n\r\n\tconst handleInstallAccepted = () => {\r\n\t\t// show native prompt\r\n\t\tinstallPromptEvent.prompt();\r\n\r\n\t\t// decide what to do after the user chooses\r\n\t\tinstallPromptEvent.userChoice.then((choice) => {\r\n\t\t\t// if the user declined, we don't want to show the prompt again\r\n\t\t\tif (choice.outcome !== 'accepted') {\r\n\t\t\t\thandleUserSeeingInstallPrompt();\r\n\t\t\t}\r\n\t\t\tsetInstallPromptEvent(null);\r\n\t\t});\r\n\t};\r\n\treturn [installPromptEvent, handleInstallDeclined, handleInstallAccepted];\r\n};\r\nexport default useWebInstallPrompt;\r\n","import { BurgerMenuOutlined, HelpTone } from '@outlier-spa/mine-icon';\nimport Popover from '@outlier-spa/mine/dist/components/Popover';\nimport { RootStyles } from '@outlier-spa/mine/dist/components/styled';\nimport themes from '@outlier-spa/mine/dist/config/themes';\nimport AuthLayout from 'components/AuthLayout';\nimport NotFound from 'components/NotFound';\nimport ProfileNav from 'components/ProfileNav';\nimport { useOfflineStatus } from 'hooks/useOfflineStatus';\nimport Hep from 'pages/Hep';\nimport AllHeps from 'pages/Hep/AllHeps';\nimport PlatformDelivery from 'pages/PlatformDelivery';\nimport RequestAreaIndex from 'pages/RequestArea';\nimport NewRequest from 'pages/RequestArea/NewRequest';\nimport NewReturnRequest from 'pages/RequestReturn/NewReturnRequest';\nimport RequestBase from 'pages/RequestArea/RequestBase';\nimport NewExtensionRequest from 'pages/RequestExtension/NewExtensionRequest';\nimport Rgo from 'pages/Rgo';\nimport { useEffect, useState } from 'react';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport { Provider, useSelector } from 'react-redux';\nimport { HashRouter, Redirect, Route, Switch, useHistory } from 'react-router-dom';\nimport { baseReducer } from 'reducer/baseReducer';\nimport { hepReducer } from 'reducer/hepReducer';\nimport { newRequestExtensionReducer } from 'reducer/newRequestExtensionReducer';\nimport { newRequestReturnReducer } from 'reducer/newRequestReturnReducer';\nimport { requestExtensionFormReducer } from 'reducer/requestExtensionFormReducer';\nimport { requestFormReducer } from 'reducer/requestFormReducer';\nimport { requestReducer } from 'reducer/requestReducer';\nimport { requestReturnFormReducer } from 'reducer/requestReturnFormReducer';\nimport { rgoReducer } from 'reducer/rgoReducer';\nimport { combineReducers, createStore } from 'redux';\nimport { FooterStyle, GlobalStyle, HeaderPage, MenuCustom, MenuItemSingle, SideNavStyle, Wrapper } from 'styled';\nimport { ThemeProvider } from 'styled-components';\nimport 'styles/common.scss';\nimport { theme } from 'theme';\nimport 'utils/database';\nimport { db } from 'utils/database';\nimport indexDB from 'utils/db';\nimport './App.css';\nimport useWebInstallPrompt from 'hooks/useWebInstallPrompt';\n\nexport const InstallPWA = () => {\n\tconst [webInstallPrompt, handleWebInstallDeclined, handleWebInstallAccepted] = useWebInstallPrompt();\n\n\tconsole.log('webInstallPrompt', webInstallPrompt);\n\n\treturn (\n\t\t<>\n\t\t\t<h2>install</h2>\n\t\t\t{/* {webInstallPrompt && ( */}\n\t\t\t<div className='d-flex justify-content-around'>\n\t\t\t\t<button color='primary' onClick={handleWebInstallAccepted}>\n\t\t\t\t\tInstall\n\t\t\t\t</button>\n\t\t\t\t<button onClick={handleWebInstallDeclined}>Close</button>\n\t\t\t</div>\n\t\t\t{/* )} */}\n\t\t</>\n\t);\n};\n\nconst store = createStore(\n\tcombineReducers({\n\t\tbaseReducer,\n\t\tnewRequestReturnReducer,\n\t\t// newRequestExtensionReducer,\n\t\trgoReducer,\n\t\trequestReducer,\n\t\trequestFormReducer,\n\t\trequestExtensionFormReducer,\n\t\trequestReturnFormReducer,\n\t\thepReducer,\n\t})\n);\n\nvar customTheme = { light: { ...themes.light, ...theme.light }, dark: { ...themes.dark, ...theme.dark } };\n\nconst showMenu = (show) => {\n\tvar sidenav = document.querySelector('#app-wrapper>.sidenav');\n\tif (sidenav) {\n\t\tif (show) sidenav.classList.add('active');\n\t\telse sidenav.classList.remove('active');\n\t}\n};\n\nexport const BaseLayout = ({ title, light, className, showHelp = false, onToggleTheme, onChangeTheme, cleanInner, children }) => {\n\tconst offline = useSelector((selector) => selector.baseReducer.offline);\n\n\treturn (\n\t\t<>\n\t\t\t<HeaderPage className='header'>\n\t\t\t\t<BurgerMenuOutlined onClick={() => showMenu(true)} />\n\t\t\t\t{title}\n\t\t\t\t{showHelp && (\n\t\t\t\t\t<a className='help-header' href='https://drillingworkflow.spence.aks.odev.cl/' rel='noreferrer' target='_blank'>\n\t\t\t\t\t\t<HelpTone></HelpTone> <span>Ayuda</span>\n\t\t\t\t\t</a>\n\t\t\t\t)}\n\t\t\t\t<Popover trigger={offline ? 'hover' : 'trigger'} content={offline && 'Algunas caracteristicas podrian no estar disponibles'}>\n\t\t\t\t\t<span style={{ cursor: offline ? 'pointer' : 'normal' }}>{offline ? 'Offline' : ''} </span>\n\t\t\t\t</Popover>\n\t\t\t\t<ProfileNav onToggleTheme={onToggleTheme} light={light} onChangeTheme={onChangeTheme} />\n\t\t\t</HeaderPage>\n\t\t\t<div className='content'>\n\t\t\t\t<div className={`inner-content ${cleanInner ? 'clean-inner' : ''} ${className ? className : ''}`}>{children}</div>\n\t\t\t\t<FooterStyle className='footer sticky bottom0'></FooterStyle>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nasync function sendPlatformToApi(platforms) {\n\treturn await db.post('PlatformDelivery/save/offline', platforms, { contentType: 'application/json' });\n}\n\nasync function sendHepToApi(heps) {\n\treturn await db.post(`Hep/save/offline`, heps, { contentType: 'application/json' });\n}\n\nconst AppLayout = (props) => {\n\tuseOfflineStatus();\n\tconst offline = useSelector((selector) => selector.baseReducer.offline);\n\tconst history = useHistory();\n\tconst redirect = (value) => {\n\t\thistory.push(value);\n\t\tshowMenu(false);\n\t};\n\n\tuseEffect(() => {\n\t\tif (!offline) {\n\t\t\tasync function SendToApi() {\n\t\t\t\tvar platforms = await indexDB.table('platformDeliveryQueue').toArray();\n\t\t\t\tvar heps = await indexDB.table('hepQueue').toArray();\n\n\t\t\t\t// SI existen entrega de plataforma en cola\n\t\t\t\tif (platforms.length > 0) {\n\t\t\t\t\tsendPlatformToApi(platforms).then(({ status, data }) => {\n\t\t\t\t\t\tif (status === 200 && data?.state === true) {\n\t\t\t\t\t\t\tindexDB.table('platformDeliveryQueue').clear();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (heps.length > 0) {\n\t\t\t\t\tsendHepToApi(heps).then(({ status, data }) => {\n\t\t\t\t\t\tif (status === 200 && data?.state === true) {\n\t\t\t\t\t\t\tindexDB\n\t\t\t\t\t\t\t\t.table('hepCache')\n\t\t\t\t\t\t\t\t.toArray()\n\t\t\t\t\t\t\t\t.then((resp) => {\n\t\t\t\t\t\t\t\t\theps.forEach((val) => {\n\t\t\t\t\t\t\t\t\t\tconst find = resp.find((h) => h.holeId === val.holeId);\n\t\t\t\t\t\t\t\t\t\tif (find !== undefined) {\n\t\t\t\t\t\t\t\t\t\t\tindexDB.table('hepCache').delete(find.id);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\t\t\t\tindexDB.table('hepQueue').clear();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tSendToApi();\n\t\t}\n\n\t\treturn offline;\n\t}, [offline]);\n\n\treturn (\n\t\t<AuthLayout>\n\t\t\t<Wrapper id='app-wrapper' className='app-wrapper'>\n\t\t\t\t<RootStyles />\n\t\t\t\t<GlobalStyle />\n\t\t\t\t<SideNavStyle className='sidenav'>\n\t\t\t\t\t<InstallPWA />\n\t\t\t\t\t<div className='header'>\n\t\t\t\t\t\t<span>Drilling Workflow</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='content'>\n\t\t\t\t\t\t<MenuCustom defaultSelectedKeys={['request']}>\n\t\t\t\t\t\t\t<MenuItemSingle key='request' onClick={() => redirect('/request-area')}>\n\t\t\t\t\t\t\t\tSolicitud de área\n\t\t\t\t\t\t\t</MenuItemSingle>\n\t\t\t\t\t\t\t<MenuItemSingle key='hep' onClick={() => redirect('/hep')}>\n\t\t\t\t\t\t\t\tHEP\n\t\t\t\t\t\t\t</MenuItemSingle>\n\t\t\t\t\t\t</MenuCustom>\n\t\t\t\t\t</div>\n\t\t\t\t</SideNavStyle>\n\t\t\t\t<div className='overlay' onClick={(_) => showMenu(false)}></div>\n\t\t\t\t<div className='dynamic-container'>{props.children}</div>\n\t\t\t</Wrapper>\n\t\t</AuthLayout>\n\t);\n};\n\nconst queryClient = new QueryClient();\n\nfunction App() {\n\tconst [isLight, setIsLight] = useState(false);\n\tconst themeProps = { light: isLight, onChangeTheme: setIsLight };\n\n\treturn (\n\t\t<>\n\t\t\t<HashRouter>\n\t\t\t\t<Provider store={store}>\n\t\t\t\t\t<QueryClientProvider client={queryClient}>\n\t\t\t\t\t\t<ThemeProvider theme={isLight ? customTheme.light : customTheme.dark}>\n\t\t\t\t\t\t\t<div id='app-preload' className='app-preload'>\n\t\t\t\t\t\t\t\t<span className='preload-animation'></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<AppLayout>\n\t\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t\t<Route path='/request-area' render={(props) => <RequestAreaIndex {...props} {...themeProps} />}></Route>\n\t\t\t\t\t\t\t\t\t<Route path='/hep' render={(props) => <AllHeps {...props} {...themeProps} />}></Route>\n\t\t\t\t\t\t\t\t\t<Route path='/request-area-view/:id' render={(props) => <RequestBase {...props} {...themeProps} />}></Route>\n\t\t\t\t\t\t\t\t\t<Route path='/new-request-area' render={(props) => <NewRequest {...props} {...themeProps} />}></Route>\n\t\t\t\t\t\t\t\t\t<Route path='/extension-request/:id' render={(props) => <NewExtensionRequest {...props} {...themeProps} />}></Route>\n\t\t\t\t\t\t\t\t\t<Route path='/return-request/:id' render={(props) => <NewReturnRequest {...props} {...themeProps} mode='new' />}></Route>\n\t\t\t\t\t\t\t\t\t<Route path='/hep' render={(props) => <Hep {...props} {...themeProps} />}></Route>\n\n\t\t\t\t\t\t\t\t\t<Route path='/no-item' render={(props) => <NotFound {...props} {...themeProps} />}></Route>\n\n\t\t\t\t\t\t\t\t\t<Route path='/rgo' render={(props) => <Rgo {...props} {...themeProps} />}></Route>\n\t\t\t\t\t\t\t\t\t<Route path='/platform-delivery' render={(props) => <PlatformDelivery {...props} {...themeProps} />}></Route>\n\t\t\t\t\t\t\t\t\t{/* <Route path='/test' component={Test}></Route> */}\n\t\t\t\t\t\t\t\t\t<Route path='/' exact render={(_) => <Redirect to='/request-area' />} />\n\t\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t\t</AppLayout>\n\t\t\t\t\t\t</ThemeProvider>\n\t\t\t\t\t</QueryClientProvider>\n\t\t\t\t</Provider>\n\t\t\t</HashRouter>\n\t\t</>\n\t);\n}\n\nexport default App;\n","import { useEffect, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nexport function useOfflineStatus() {\r\n\tconst [offline, setOffline] = useState(!navigator.onLine);\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst setOfflineStatus = () => {\r\n\t\tdispatch({ type: '@base/updateRootProp', payload: { prop: 'offline', value: !navigator.onLine } });\r\n\t\tsetOffline(!navigator.onLine);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\twindow.addEventListener('online', setOfflineStatus);\r\n\t\twindow.addEventListener('offline', setOfflineStatus);\r\n\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener('online', setOfflineStatus);\r\n\t\t\twindow.removeEventListener('offline', setOfflineStatus);\r\n\t\t};\r\n\t}, []);\r\n\r\n\treturn offline;\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n\twindow.location.hostname === 'localhost' ||\r\n\t\t// [::1] is the IPv6 localhost address.\r\n\t\twindow.location.hostname === '[::1]' ||\r\n\t\t// 127.0.0.1/8 is considered localhost for IPv4.\r\n\t\twindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\nexport function register(config) {\r\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n\t\t// The URL constructor is available in all browsers that support SW.\r\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n\t\tif (publicUrl.origin !== window.location.origin) {\r\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\r\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\r\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('load', () => {\r\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\tconsole.log('localhost', swUrl);\r\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\r\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\r\n\r\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\r\n\t\t\t\t// service worker/PWA documentation.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\r\n\t\t\t\t\tconsole.log('This web app is being served cache-first by a service ' + 'worker. To learn more, visit http://bit.ly/CRA-PWA');\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Is not localhost. Just register service worker\r\n\t\t\t\tconsole.log('no local', swUrl);\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n\tnavigator.serviceWorker\r\n\t\t.register(swUrl)\r\n\t\t.then((registration) => {\r\n\t\t\tregistration.onupdatefound = () => {\r\n\t\t\t\tconst installingWorker = registration.installing;\r\n\t\t\t\tif (installingWorker == null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tinstallingWorker.onstatechange = () => {\r\n\t\t\t\t\tif (installingWorker.state === 'installed') {\r\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\r\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\r\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\r\n\t\t\t\t\t\t\t// content until all client tabs are closed.\r\n\t\t\t\t\t\t\tconsole.log('New content is available and will be used when all ' + 'tabs for this page are closed. See http://bit.ly/CRA-PWA.');\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\r\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// At this point, everything has been precached.\r\n\t\t\t\t\t\t\t// It's the perfect time to display a\r\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\r\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\r\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t\tconsole.error('Error during service worker registration:', error);\r\n\t\t});\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n\t// Check if the service worker can be found. If it can't reload the page.\r\n\tfetch(swUrl)\r\n\t\t.then((response) => {\r\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\r\n\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\tif (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\r\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\r\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => {\r\n\t\t\t\t\tregistration.unregister().then(() => {\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Service worker found. Proceed as normal.\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log('No internet connection found. App is running in offline mode.');\r\n\t\t});\r\n}\r\n\r\nexport function unregister() {\r\n\tif ('serviceWorker' in navigator) {\r\n\t\tnavigator.serviceWorker.ready.then((registration) => {\r\n\t\t\tregistration.unregister();\r\n\t\t});\r\n\t}\r\n}\r\n","import '@outlier-spa/mine/dist/styles/base/_reset.scss';\nimport '@outlier-spa/mine/dist/styles/globals.scss';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'styles/main.scss';\nimport App from './App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\n\nReactDOM.render(\n\t// <React.StrictMode>\n\t<App />, // </React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\n\nserviceWorkerRegistration.register();\n"],"sourceRoot":""}