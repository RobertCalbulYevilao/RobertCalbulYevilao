(this.webpackJsonpDrillingWorkflow=this.webpackJsonpDrillingWorkflow||[]).push([[0],{1027:function(e,t,n){},1049:function(e,t,n){},1054:function(e,t,n){},1055:function(e,t,n){},1056:function(e,t,n){},1057:function(e,t,n){},1058:function(e,t,n){},1061:function(e,t,n){},1062:function(e,t,n){},1063:function(e,t,n){},1064:function(e,t,n){},1065:function(e,t,n){"use strict";n.r(t);n(430),n(431);var r,a=n(0),o=n.n(a),i=n(44),c=n.n(i),s=(n(436),n(22)),l=n.n(s),d=n(47),u=n(6),b=n(45),p=n(24),j=n(142),f=n.n(j),h=n(369),m=n(14),g=n.n(m),O=Object(a.createContext)({user:{},hasDatabaseAccess:!1,isAuthenticated:!1,message:"Error auth",login:function(){return null},logout:function(){return null}}),x=Object.freeze({status:!1,user:null,hasDatabaseAccess:!1,isAuthenticated:!1,message:null,role:null,roles:[]}),v=(Object.freeze({supervisor:"supervisor",laboratoryanalysis:"laboratoryanalysis",support:"support",admin:"admin"}),Object.freeze({laboratoryanalysis:"Laboratorista",supervisor:"Supervisor",admin:"Administrador",support:"Soporte"})),y="".concat("DrillingWorkflow","-").concat("V1"),C=sessionStorage.getItem(y),w=n(1),R=function(e){var t=Object(a.useState)((C?JSON.parse(C):null)||x),n=Object(b.a)(t,2),r=n[0],o=n[1];return Object(w.jsx)(O.Provider,{value:{auth:r,setAuth:o},children:e.children})},S=n(61),k=n(49),E=n(46),N=n.n(E),F=n(38),A=(n(965),["icon","primaryText","secondaryText","buttonProps","onClick"]),D=F.default.div(r||(r=Object(k.a)(["\n\t.not-found {\n\t\t&-secondary-text {\n\t\t\tcolor: ",";\n\t\t}\n\t}\n"])),(function(e){return e.theme.secondaryColor}));var P,q,z,I,T,M,B,L,H,_,W,V,G,Y,U,Q,J,K,Z,$=function(e){var t=e.icon,n=e.primaryText,r=e.secondaryText,o=e.buttonProps,i=e.onClick,c=Object(S.a)(e,A),s=Object(a.useContext)(F.ThemeContext),l=Object(w.jsx)(p.NoItemsTone,{type:s.dark?"dark":"light",style:{width:80,height:80}});return Object(w.jsxs)(D,Object(u.a)(Object(u.a)({className:"not-found-container"},c),{},{children:[t&&Object(w.jsx)(t,{style:{width:80,height:80}})||l,Object(w.jsx)("p",{className:"not-found-principal-text",children:n||"No existe contenido para mostrar"}),Object(w.jsx)("p",{className:"not-found-secondary-text",children:r||"Para crear un formulario de entrega, presione el bot\xf3n \u201cNuevo Formulario\u201d"}),i&&Object(w.jsx)(N.a,Object(u.a)(Object(u.a)({className:"not-found-button-container",type:"green",onClick:i},o),{},{children:o.text||"Nuevo Formulario"}))]}))},X=n(191),ee=n.n(X),te=n(370),ne=n(100),re=n.n(ne),ae=n(268),oe=n.n(ae),ie=n(211),ce=n(58),se=n.n(ce),le=["as","children","className"],de=(Object(u.a)({},g.a.dark),Object(u.a)({},g.a.light),Object(F.createGlobalStyle)(P||(P=Object(k.a)(["\n\t.data-grid-container .data-grid {\n\t\tth, td {\n\t\t\tborder-color: ",";\n\t\t}\n\t\t.cell{\n\t\t\tbackground: ",";\n\t\t\t& > input{\n\t\t\t\tcolor: ",";\n\t\t\t}\n\n\t\t\t&.read-only,&.header-cell{\n\t\t\t\tbackground: ",";\n\t\t\t}\n\t\t}\n\t}\n\n\ttable.summary-small__table {\n\t\ttr {\n\t\t\tth,\n\t\t\ttd {\n\t\t\t\t&:not(:first-child):not(:only-child) {\n\t\t\t\t\tborder-left: 1px solid ",";\n\t\t\t\t}\n\t\t\t}\n\t\t\tth {\n\n\t\t\t\tborder-bottom: 1px solid ",";\n\t\t\t}\n\t\t}\n\t}\n\n    .chart-item {\n        .chart-header {\n            border-bottom: 1px solid ",";\n        }\n    }\n    .table-tabs {\n        border-bottom: 1px solid ",";\n    }\n\n","\n    .ant-pagination-next button,\n    .ant-pagination-prev button,\n    .ant-pagination-item{\n        color: ",";\n    }\n\n    .ant-table {\n        color: ",";\n        background: ",";\n    }\n\n    .ant-table-thead {\n        > tr {\n            > th {\n                color: ",";\n                border-bottom: 1px solid ",";\n                background-color: ",";\n            }\n        }\n    }\n\n    .ant-table-thead th.ant-table-column-has-sorters:hover {\n        background-color: "," ;\n    }\n\n    .ant-table-footer {\n        background: none;\n        .total {\n                color: ",";\n                border-right: 1px solid ",";\n            }\n    }\n    .ant-table-tbody {\n        > tr {\n            > td {\n                background-color: ",";\n                border: 1px solid transparent;\n\n                &:not(:first-child):not(:only-child) {\n                    border-left: 1px solid ",";\n                }\n            }\n            &:nth-child(odd) > td {\n                background: ","\n            }\n        }\n    }\n\n    .ant-empty-normal{\n        color: ",";\n    }\n\n    .ant-checkbox-indeterminate .ant-checkbox-inner::after {\n        background-color: ",";\n    }\n    \n    .ant-checkbox-checked .ant-checkbox-inner::after{\n        border-color: ",";\n    }\n\n    .rounded-check__field > i{\n        ","\n        background: ",";\n    }\n\n    \n\n    .export__section {\n        border-top: 1px solid ",";\n    }\n\n\tbutton.button {\n\t\tjustify-content: center;\n\t}\n\n\tbutton.button-red-bg {\n\t\tbackground: ",";\n\t}\n\n\tbutton.button-green-bg {\n\t\tbackground: ",";\n\t}\n\n\t.description-text{\n\t\tcolor: ",";\n\t\t&.warning {\n\t\t\tcolor: #ffb116;\n\t\t}\n\t\t&.info {\n\t\t\t.icon {\n\t\t\t\tfont-size: 12px;\n\t\t\t}\n\t\t}\n\t\n\t\t> svg {\n\t\t\tmargin-right: 6px;\n\t\t}\n\t\n\t\t> svg,\n\t\t> span {\n\t\t\tdisplay: inline-block;\n\t\t\tvertical-align: middle;\n\t\t}\n\t}\n"])),(function(e){return e.theme.gridBorderColor}),(function(e){return e.theme.cellBackground}),(function(e){return e.theme.fontColor}),(function(e){return e.theme.cellDisabledBackground}),(function(e){return e.theme.fieldBorder}),(function(e){return e.theme.fieldBorder}),(function(e){return e.theme.fieldBorder}),(function(e){return e.theme.fieldBorder}),"",(function(e){return e.theme.secondaryColor}),(function(e){return e.theme.fontColor}),(function(e){return e.theme.dark?m.colors.gray3:m.colors.white}),(function(e){return e.theme.fontColor}),(function(e){return e.theme.fieldBorder}),(function(e){return e.theme.dark?m.colors.gray3:m.colors.white}),(function(e){return e.theme.dark?m.colors.gray2:m.colors.softgray1}),(function(e){return e.theme.fontColor}),(function(e){return e.theme.fieldBorder}),(function(e){return e.theme.dark?m.colors.gray3:m.colors.backgroundgray}),(function(e){return e.theme.fieldBorder}),(function(e){return e.theme.dark?m.colors.bluishgray:m.colors.white}),(function(e){return e.theme.fontColor}),(function(e){return m.colors.skyblue}),(function(e){return e.theme.dark?m.colors.white:m.colors.skyblue}),"",(function(e){return e.theme.dark?"none":m.colors.white}),(function(e){return e.theme.fieldBorder}),m.colors.red,m.colors.green,(function(e){return e.theme.secondaryColor})),F.default.div(q||(q=Object(k.a)(["\n\tbackground: ",";\n"])),(function(e){return e.theme.headerPage})),F.default.p(z||(z=Object(k.a)(["\n\tfont-family: Open Sans;\n\tfont-style: normal;\n\tfont-weight: 600;\n\tfont-size: 14px;\n\tline-height: 19px;\n\tmargin-bottom: 20px;\n\n\t> span {\n\t\tfont-weight: 600;\n\t\tcolor: ",";\n\t}\n"])),m.colors.skyblue),Object(F.default)(se.a)(I||(I=Object(k.a)(["\n\t.modal__content {\n\t\tpadding-left: 14px;\n\t\tpadding-right: 14px;\n\t\tmax-height: 550px;\n\t\toverflow-y: auto;\n\t}\n\n\t.modal-large {\n\t\tmax-width: 1200px;\n\t}\n"]))),Object(F.default)(E.BigIconButton)(T||(T=Object(k.a)(["\n\t.button-bigicon .button {\n\t\tpadding: 0 !important;\n\t\ta,\n\t\tspan {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t}\n\n\t\ta {\n\t\t\tline-height: 32px;\n\t\t}\n\t}\n"]))),Object(F.default)(N.a)(M||(M=Object(k.a)(["\n\t&.button {\n\t\tpadding: 0 !important;\n\t\ta {\n\t\t\tpadding: 0 20px;\n\t\t}\n\t}\n"]))),F.default.i(B||(B=Object(k.a)(["\n\theight: 5px;\n\twidth: 5px;\n\tborder-radius: 50%;\n\tbackground-color: ",";\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tmargin: 0 10px;\n"])),(function(e){return e.theme.fieldBorder}))),ue=F.default.div(L||(L=Object(k.a)(["\n\tbackground-color: ",";\n\tcolor: ",";\n\n\t> p {\n\t\t&:last-child {\n\t\t\ttext-align: right;\n\t\t\tcolor: ",";\n\t\t}\n\t}\n"])),(function(e){return e.theme.dark?m.colors.bluishgray:m.colors.white}),(function(e){return e.theme.secondaryColor}),(function(e){return e.theme.fontColor})),be=(Object(F.default)(ue)(H||(H=Object(k.a)(["\n\tbackground-color: ",";\n"])),(function(e){return e.theme.dark?m.colors.gray1:m.colors.backgroundgray})),Object(F.default)(oe.a)(_||(_=Object(k.a)(["\n\t&:not(.border-less) {\n\t\tborder-color: ",";\n\t}\n\t.ant-menu {\n\t\tbackground-color: ",";\n\t\tcolor: ",";\n\t}\n\n\t.ant-menu-submenu-title {\n\t\tborder-color: none;\n\t}\n"])),(function(e){return e.theme.sideNavSecondary}),(function(e){return e.theme.sideNavSecondary}),m.colors.white)),pe=Object(F.default)(ae.MenuItem)(W||(W=Object(k.a)(["\n\tbackground-color: none;\n\tcolor: ",";\n\tborder-bottom-color: "," !important;\n\tmargin: 0px !important;\n\t&.ant-menu-item-selected {\n\t\tbackground-color: "," !important;\n\t}\n"])),(function(e){return m.colors.white}),m.colors.gray3,m.colors.gray3),je=Object(F.default)(pe)(V||(V=Object(k.a)(["\n\tpadding-left: 10px !important;\n"]))),fe=function(e){return Object(w.jsx)("div",{className:"role-navigation-menu-item",children:Object(w.jsx)(X.NavigationMenuItem,Object(u.a)({},e))})},he=F.default.div(G||(G=Object(k.a)(["\n\tbackground-color: ",";\n"])),(function(e){return e.theme.header})),me=F.default.div(Y||(Y=Object(k.a)(["\n\tbackground: ",";\n\tcolor: ",";\n"])),(function(e){return e.theme.backgroundMain}),(function(e){return e.theme.main})),ge=Object(F.createGlobalStyle)(U||(U=Object(k.a)(["\n\t.inner-content{\n\t\tbackground: ","\n\t}\n\t.data-grid-container .data-grid {\n\t\tth, td {\n\t\t\tborder-color: ",";\n\t\t}\n\t\t.cell{\n\t\t\tbackground: ",";\n\t\t\t& > input{\n\t\t\t\tcolor: ",";\n\t\t\t}\n\n\t\t\t&.read-only,&.header-cell{\n\t\t\t\tbackground: ",";\n\t\t\t}\n\t\t}\n\t}\n\n\ttable.summary-small__table {\n\t\ttr {\n\t\t\tth,\n\t\t\ttd {\n\t\t\t\t&:not(:first-child):not(:only-child) {\n\t\t\t\t\tborder-left: 1px solid ",";\n\t\t\t\t}\n\t\t\t}\n\t\t\tth {\n\n\t\t\t\tborder-bottom: 1px solid ",";\n\t\t\t}\n\t\t}\n\t}\n\n    .chart-item {\n        .chart-header {\n            border-bottom: 1px solid ",";\n        }\n    }\n    .table-tabs {\n        border-bottom: 1px solid ",";\n    }\n\n","\n    .ant-pagination-next button,\n    .ant-pagination-prev button,\n    .ant-pagination-item{\n        color: ",";\n    }\n\n    .ant-table {\n        color: ",";\n        background: ",";\n    }\n\n    .ant-table-thead {\n        > tr {\n            > th {\n                color: ",";\n                border-bottom: 1px solid ",";\n                background-color: ",";\n            }\n        }\n    }\n\n    .ant-table-thead th.ant-table-column-has-sorters:hover {\n        background-color: "," ;\n    }\n\n    .ant-table-footer {\n        background: none;\n        .total {\n                color: ",";\n                border-right: 1px solid ",";\n            }\n    }\n    .ant-table-tbody {\n        > tr {\n            > td {\n                background-color: ",";\n                border: 1px solid transparent;\n\n                &:not(:first-child):not(:only-child) {\n                    border-left: 1px solid ",";\n                }\n            }\n            &:nth-child(odd) > td {\n                background: ","\n            }\n        }\n    }\n\n    .ant-empty-normal{\n        color: ",";\n    }\n\n    .ant-checkbox-indeterminate .ant-checkbox-inner::after {\n        background-color: ",";\n    }\n    \n    .ant-checkbox-checked .ant-checkbox-inner::after{\n        border-color: ",";\n    }\n\n    .rounded-check__field > i{\n        ","\n        background: ",";\n    }\n\n    \n\n    .export__section {\n        border-top: 1px solid ",";\n    }\n\n\n\tbutton.button {\n\t\tjustify-content: center;\n\t}\n\n\n\tbutton.button-red-bg {\n\t\tbackground: ",";\n\t}\n\n\tbutton.button-green-bg {\n\t\tbackground: ",";\n\t}\n\n\t.description-text{\n\t\tcolor: ",";\n\t\t&.warning {\n\t\t\tcolor: #ffb116;\n\t\t}\n\t\t&.info {\n\t\t\t.icon {\n\t\t\t\tfont-size: 12px;\n\t\t\t}\n\t\t}\n\t\n\t\t> svg {\n\t\t\tmargin-right: 6px;\n\t\t}\n\t\n\t\t> svg,\n\t\t> span {\n\t\t\tdisplay: inline-block;\n\t\t\tvertical-align: middle;\n\t\t}\n\t}\n\n\t.role-navigation-menu-item .navigation-menu-item {\n\t\t.navigation-menu-item-roles{\n\t\t\tborder:1px solid  ",";\n\t\t\t&.active {\n\t\t\t\tborder-color: ",";\n\t\t\t\tbackground: ",";\n\t\t\t}\n\t\t}\n\t}\n\n\t.role-menu-item {\n\t\tcolor: ",";\n\t\t.line:after {\n\t\t\tbackground: ",";\n\t\t}\n\t}\n\n\t.description-text{\n\t\tcolor: ",";\n\t\t&.warning {\n\t\t\tcolor: #ffb116;\n\t\t}\n\t\t&.info {\n\t\t\t.icon {\n\t\t\t\tfont-size: 14px;\n\t\t\t\tmargin-right:8px;\n\t\t\t}\n\t\t}\n\n\t\t> svg {\n\t\t\tmargin-right: 6px;\n\t\t}\n\n\t\t> svg,\n\t\t> span {\n\t\t\tdisplay: inline-block;\n\t\t\tvertical-align: middle;\n\t\t}\n\t}\n\n\t&.radius-3 {\n\t\t&.border {\n\t\t\tborder: 1px solid ",";\n\t\t}\n\t}\n\t.summary-wrapper {\n\t\ttable {\n\t\t\tborder-radius:3px;\n\t\t\tborder: 1px solid ",";\n\t\t\tbox-shadow: 0px 2px 4px rgba(0, 0, 0, 0.1);\n\t\t\ttd\n\t\t\t{\n\t\t\t\tborder: 1px double ",";\n\t\t\t\tbackground-color: ",";\n\t\t\t\t\n\t\t\t}\n\t\t\tth{\n\t\t\t\tborder: none;\n\t\t\t\tbackground-color: ",";\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t}\n"])),(function(e){return e.theme.backgroundMain}),(function(e){return e.theme.gridBorderColor}),(function(e){return e.theme.cellBackground}),(function(e){return e.theme.fontColor}),(function(e){return e.theme.cellDisabledBackground}),(function(e){return e.theme.fieldBorder}),(function(e){return e.theme.fieldBorder}),(function(e){return e.theme.fieldBorder}),(function(e){return e.theme.fieldBorder}),"",(function(e){return e.theme.secondaryColor}),(function(e){return e.theme.fontColor}),(function(e){return e.theme.dark?m.colors.gray3:m.colors.white}),(function(e){return e.theme.fontColor}),(function(e){return e.theme.fieldBorder}),(function(e){return e.theme.dark?m.colors.gray3:m.colors.white}),(function(e){return e.theme.dark?m.colors.gray2:m.colors.softgray1}),(function(e){return e.theme.fontColor}),(function(e){return e.theme.fieldBorder}),(function(e){return e.theme.dark?m.colors.gray3:m.colors.backgroundgray}),(function(e){return e.theme.fieldBorder}),(function(e){return e.theme.dark?m.colors.bluishgray:m.colors.white}),(function(e){return e.theme.fontColor}),(function(e){return m.colors.skyblue}),(function(e){return e.theme.dark?m.colors.white:m.colors.skyblue}),"",(function(e){return e.theme.dark?"none":m.colors.white}),(function(e){return e.theme.fieldBorder}),m.colors.red,m.colors.green,(function(e){return e.theme.secondaryColor}),(function(e){return e.theme.fieldBorder}),m.colors.skyblue,(function(e){return e.theme.dark?m.colors.gray1:m.colors.backgroundgray}),(function(e){return e.theme.secondaryColor}),(function(e){return e.theme.dark?m.colors.gray1:m.colors.softgray2}),(function(e){return e.theme.secondaryColor}),(function(e){var t=e.theme;return t.dark?"none":t.fieldBorder}),(function(e){return e.theme.fieldBorder}),(function(e){var t=e.theme;return Object(ie.rgba)(t.fieldBorder,.1)}),(function(e){return e.theme.dark?m.colors.bluishgray:m.colors.white}),(function(e){return e.theme.dark?m.colors.bluishgray:m.colors.white})),Oe=(F.default.div(Q||(Q=Object(k.a)(["\n\tcontent: '';\n\twidth: 100%;\n\theight: 1px;\n\tbackground: ",";\n"])),(function(e){return e.theme.fieldBorder})),function(e){var t=e.as,n=void 0===t?"p":t,r=e.children,a=e.className,o=Object(S.a)(e,le);return Object(w.jsx)(n,Object(u.a)(Object(u.a)({className:"description-text ".concat(a)},o),{},{children:r}))}),xe=(F.default.div(J||(J=Object(k.a)(["\n\tbackground: ",";\n\twidth: 22px;\n\theight: 22px;\n\tcolor: ",";\n\tborder-radius: 50%;\n\tfont-size: 14px;\n\tfont-family: Open Sans;\n\tfont-style: normal;\n\ttext-align: center;\n\tposition: relative;\n\tspan {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tmargin: auto;\n\t\tfont-weight: bold;\n\t\tfont-size: 14px;\n\t\tline-height: 19px;\n\t}\n"])),(function(e){return m.colors[e.color]||e.color||m.colors.blue}),m.colors.white),F.default.div(K||(K=Object(k.a)(["\n\tbackground-color: ",";\n"])),(function(e){return e.theme.footer}))),ve=F.default.div(Z||(Z=Object(k.a)(["\n\tbackground: ",";\n\t&.sidenav {\n\t\tbackground-color: ",";\n\t}\n\n\t.content {\n\t\tbackground-color: ",";\n\t}\n"])),(function(e){return e.theme.sideNavMain}),(function(e){return e.theme.sideNavMain}),(function(e){return e.theme.sideNavSecondary})),ye=(n(971),function(e){var t=Object(a.useContext)(O),n=t.auth,r=t.setAuth,o=n.user||{},i=o.username,c=o.role,s=o.roles,l=Object(w.jsx)(te.SwitchTheme,{checked:e.light,onChange:function(t){var n=t.target;return e.onChangeTheme(n.checked)}}),d=e.light?"Tema claro":"Tema oscuro";return Object(w.jsx)("div",{className:"profile-nav",children:Object(w.jsxs)(ee.a,{title:i,subtitle:c&&v[c.toLowerCase()]?v[c.toLowerCase()]:c,trigger:"click",image:Object(w.jsx)(p.UserAdminAltTone,{type:"dark",style:{width:"100%",height:"100%"}}),children:[Object(w.jsx)(Ce,{message:"Roles"}),null===s||void 0===s?void 0:s.map((function(e,t){return Object(w.jsx)(fe,{className:"navigation-menu-item-roles ".concat(c.toLowerCase()===e?"active":""," "),content:"".concat(v[e]),onClick:function(t){return function(e){var t=re.a.cloneDeep(n);t.user.role=e,r(Object(u.a)({},t)),sessionStorage.setItem(y,JSON.stringify(t))}(e)}},t)})),Object(w.jsx)(X.NavigationMenuItem,{prefix:l,content:d,onClick:function(t){return e.onChangeTheme(!e.light)}})]})})}),Ce=function(e){var t=e.message;return Object(w.jsxs)("li",{className:"role-menu-item",children:[Object(w.jsx)("div",{children:t}),Object(w.jsx)("div",{className:"line"})]})},we=n(42);var Re=n(64),Se=n.n(Re),ke=n(35),Ee=new(n(371).a)("spence.drillingWorkflow");Ee.version(3).stores({holes:"++id",hepQueue:"++id",platformDeliveryQueue:"++id",holeRequest:"holeid",baseReducer:"baseRID",newRequestReturnReducer:"newRequestReturnRID",newRequestExtensionReducer:"newRequestExtensionRID",rgoReducer:"++id",requestReducer:"requestRID",requestFormReducer:"++id",requestExtensionFormReducer:"requestExtensionFormRID",requestReturnFormReducer:"requestReturnFormRID",hepReducer:"++id",hepCache:"++id",platformCache:"++id",platformSelectedCache:"++id",areaRequests:"++id",areaRequest:"++id"});var Ne=Ee,Fe="areaRequests";function Ae(){return Ne.table(Fe).toArray().then((function(e){return{type:"@base/replaceAreaRequests",payload:e}}))}function De(){return Ne.table(Fe).clear().then((function(e){return{type:"@base/cleanAreaRequests"}}))}function Pe(e){return Ne.table(Fe).add(e).then((function(t){return{type:"@base/addAreaRequests",payload:e}}))}function qe(e,t){return Ne.table("hepCache").toArray().then((function(n){var r=n.filter((function(n){return n.Nombre_Propuesto===e.Nombre_Propuesto&&n.arearequestid===t}));if(0===r.length)return Ne.table("hepCache").add(e);var a=r[0];Ne.table("hepCache").update(a.id,e)}))}function ze(e){return Ne.table("hepCache").toArray().then((function(t){return{type:"@base/replaceHep",payload:t.filter((function(t){return t.arearequestid===e}))}}))}function Ie(e){return Ne.table("hepCache").toArray().then((function(t){var n=t.find((function(t){return t.holeId===e}));return null!==n&&void 0!==n?n:{}}))}var Te,Me=n(326),Be=(n(1027),n(2)),Le=n.n(Be),He=["className","left","center","right","bottom","separatorPosition","showSeparator"],_e=["children"],We=F.default.div(Te||(Te=Object(k.a)(["\n\tbackground-color: ",";\n\t.fixed-header-bottom-separator {\n\t\tbackground-color: ",";\n\t}\n\t.fixed-header-top-separator {\n\t\tbackground-color: ",";\n\t}\n"])),(function(e){return e.theme.backgroundMain}),(function(e){return e.theme.fieldBorder}),(function(e){return e.theme.fieldBorder}));var Ve=function(e){var t=e.className,n=e.left,r=e.center,a=e.right,o=(e.bottom,e.separatorPosition),i=void 0===o?"bottom":o,c=e.showSeparator,s=Object(S.a)(e,He),l=Le()("fixed-header",t),d=Le()("fixed-header-".concat(i,"-separator"));return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(We,Object(u.a)(Object(u.a)({className:l},s),{},{children:[c&&Object(w.jsx)("div",{className:d}),Object(w.jsx)("div",{className:"header-fixed-left",children:n}),Object(w.jsx)("div",{className:"header-fixed-center",children:r}),Object(w.jsx)("div",{className:"header-fixed-right",children:a})]})),s.children]})};function Ge(e){var t=e.icon,n=e.text;return Object(w.jsxs)("div",{className:"header-details-small",children:[t,Object(w.jsx)("span",{children:n})]})}function Ye(e){var t=e.children,n=Object(S.a)(e,_e);return Object(w.jsx)("div",Object(u.a)(Object(u.a)({style:{padding:"8px 0"}},n),{},{children:Object(w.jsx)("span",{style:{fontStyle:"normal",fontWeight:600,fontSize:20,lineHeight:"34px"},children:t})}))}var Ue=n(152),Qe=n.n(Ue),Je="http://smig.spence.outlier.cl/drillingWorkflow/api/",Ke=Qe.a.create({baseURL:Je});Qe.a.defaults.baseURL="http://smig.spence.outlier.cl/drillingWorkflow/api/",Qe.a.defaults.withCredentials=!0,Qe.a.defaults.credentials="include";var Ze,$e,Xe,et=n(51),tt=n.n(et),nt=function(e,t,n){var r=Object(a.useCallback)(e,n);Object(a.useEffect)((function(){var e=setTimeout((function(){r()}),t);return function(){clearTimeout(e)}}),[r,t])},rt={fontSmall:"0.86 rem",fontMedium:"1em",fontLarge:"1.15 rem",warning:"#FFB116",danger:"#FF6060",assertive:"#46BD8D",activeBorder:"#05ABE8",sideNavMain:"#24262D",sideNavSecondary:"#272A30"},at=Object(u.a)(Object(u.a)({},rt),{},{backgroundMain:"#2D2F35",backgroundSecondary:"#272A30",borderMain:"#424851",borderSecondary:"#4E545F",main:"#FFFFFF",secondary:"#BECFE7",terciary:"rgba(255, 255, 255, 0.6)",placeholder:"#rgba(190, 207, 231, 0.5)",emphasisMain:"#05ABE8",emphasisSecondary:"#4980AC",badgeInactive:"#424851",header:"#24262D",footer:"#272A30",fieldMain:"#343941",fieldMainAlt:"#343941",fieldSecondary:"#2D2F35",fieldTerciary:"#424851",fieldTerciarytAlt:"#424851",fieldDisabled:"rgba(52, 57, 65, 0.5)",fieldNotEditable:"none",tableCellMain:"#343941",dockMain:"#272A30",switchMain:"#424851",switchMainAlt:"#424851"}),ot=Object(u.a)(Object(u.a)({},rt),{},{backgroundMain:"#F6F8FA",backgroundSecondary:"#FFFFFF",borderMain:"#D5DCE3",borderSecondary:"#D5DCE3",main:"#343941",secondary:"#85919C",terciary:"rgba(133, 145, 156, 0.6)",placeholder:"rgba(133, 145, 156, 0.8)",emphasisMain:"#0596E8",emphasisSecondary:"#4980AC",badgeInactive:"#D5DCE3",header:"#FFFFFF",footer:"#343941",fieldMain:"#F6F8FA",fieldMainAlt:"#FFFFFF",fieldSecondary:"#F6F8FA",fieldTerciary:"#FFFFFF",fieldTerciarytAlt:"#F6F8FA",fieldDisabled:"rgba(246, 248, 250, 0.5)",fieldNotEditable:"none",tableCellMain:"#FFFFFF",dockMain:"#FFFFFF",switchMain:"#FFFFFF",switchMainAlt:"#F6F8FA"}),it=Object(u.a)(Object(u.a)({},rt),{},{light:ot,dark:at}),ct=(Object(u.a)(Object(u.a)({},{fontSmall:"0.86 rem",fontMedium:"1em",fontLarge:"1.15 rem",warning:"#",danger:"#",assertive:"#",activeBorder:"#",sideNavMain:"#",sideNavSecondary:"#"}),{},{backgroundMain:"#",backgroundSecondary:"#",borderMain:"#",borderSecondary:"#",main:"#",secondary:"#",terciary:"#",placeholder:"#",emphasisMain:"#",emphasisSecondary:"#",badgeInactive:"#",header:"#",footer:"#",fieldMain:"#",fieldMainAlt:"#",fieldSecondary:"#",fieldTerciary:"#",fieldTerciarytAlt:"#",fieldDisabled:"#",fieldNotEditable:"",buttonLabel:"#",buttonMain:"#",buttonSecondary:"#",buttonTerciary:"#",checkMain:"#",checkMainAlt:"#",tagMain:"#",tagSecondary:"#",sectionMain:"#",sectionSecondary:"#",sectionTerciary:"#",sectionChartMain:"#",cardMain:"#",cardSecondary:"#",cardTerciary:"#",tableCellMain:"#",tableCellSecondary:"#",dropDownMain:"#",pageIndicator:"#",menuMain:"#",menuSecondary:"#",menuTerciary:"#",menuQuaternary:"#",dockMain:"#",switchMain:"#",switchMainAlt:"#"}),F.default.div(Ze||(Ze=Object(k.a)(["\n\theight: 100%;\n\toverflow: hidden;\n\t.ant-table {\n\t\tbackground: ",";\n\t\tcolor: ",";\n\t}\n\t.ant-table-thead > tr > th {\n\t\tbackground: ",";\n\t\tcolor: ",";\n\t\tborder-color: ",";\n\t}\n\n\t.ant-table-tbody > tr > td {\n\t\tbackground: ",";\n\t\tcolor: ",";\n\n\t\t&.ant-table-column-sort {\n\t\t\tbackground: ",";\n\t\t}\n\t}\n\n\t.ant-table-thead th.ant-table-column-has-sorters:hover,\n\t.ant-table-thead th.ant-table-column-sort {\n\t\tbackground: ",";\n\t}\n\n\t.ant-table-tbody > tr.ant-table-row:hover > td {\n\t\tbackground: ",";\n\t}\n\n\t.ant-table-pagination.ant-pagination {\n\t\tborder-color: ",";\n\t}\n\n\t.ant-table-column-sorter {\n\t\tcolor: ",";\n\t}\n\n\t.ant-table-column-sorter-up.active,\n\t.ant-table-column-sorter-down.active {\n\t\tcolor: ",";\n\t}\n\n\t.ant-pagination-item {\n\t\tborder-color: ",";\n\t\tcolor: ",";\n\t\tbackground-color: ",";\n\t}\n\n\t.ant-pagination-item:not(.ant-pagination-item-active) a {\n\t\tcolor: ",";\n\t}\n\n\t.ant-pagination-prev .ant-pagination-item-link,\n\t.ant-pagination-next .ant-pagination-item-link {\n\t\tborder-color: ",";\n\t\tbackground-color: ",";\n\t}\n\n\t.ant-pagination-prev,\n\t.ant-pagination-next,\n\t.ant-pagination-jump-prev,\n\t.ant-pagination-jump-next {\n\t\tcolor: ",";\n\t}\n\n\t.ant-pagination-prev button,\n\t.ant-pagination-next button {\n\t\tcolor: ",";\n\t}\n\n\t.ant-table-body {\n\t\tscrollbar-color: transparent transparent;\n\t\ttransition: scrollbar-color 1s cubic-bezier(0.19, 1, 0.22, 1);\n\t\tscrollbar-arrow-color: ",";\n\t\tscrollbar-track-color: ",";\n\t\t-ms-overflow-style: -ms-autohiding-scrollbar;\n\t\theight: ",";\n\t}\n\t.ant-table-body:hover {\n\t\tscrollbar-color: "," transparent;\n\t\ttransition: scrollbar-color 1s cubic-bezier(0.19, 1, 0.22, 1);\n\t}\n\n\t.ant-table-tbody > tr.ant-table-placeholder {\n\t\t.ant-empty-description {\n\t\t\tcolor: ",";\n\t\t}\n\n\t\t.ant-empty-img-simple-g {\n\t\t\tstroke: ",";\n\t\t}\n\n\t\t.ant-empty-img-simple-ellipse {\n\t\t\tfill: ",";\n\t\t}\n\n\t\t.ant-empty-img-simple-path {\n\t\t\tfill: ",";\n\t\t}\n\n\t\t&:hover > td {\n\t\t\tbackground: ",";\n\t\t}\n\t}\n\n\t.ant-table-cell-scrollbar {\n\t\t-webkit-box-shadow: 0 1px 0 1px ",";\n\t\tbox-shadow: 0 1px 0 1px ",";\n\t}\n\n\t.ant-table-tbody > tr > td:not(:first-child):not(:only-child) {\n\t\tborder-left: none;\n\t}\n\n\t.ant-table-tbody > tr:first-child > td:not(:first-child):not(:only-child) {\n\t\t/* :after {\n        content: '';\n        position: absolute;\n        left: 0;\n        top: 0;\n        height: 100vh;\n        width: 0;\n        border-left: 1px solid ",";\n        z-index: 2;\n    } */\n\t}\n"])),(function(e){return e.theme.sectionBackground}),(function(e){return e.theme.fontColor}),(function(e){return e.theme.sectionBackground}),(function(e){return e.theme.fontColor}),(function(e){return e.theme.fieldBorder}),(function(e){return e.theme.sectionBackground}),(function(e){return e.theme.fontColor}),(function(e){return e.theme.fieldDarkenBackground}),(function(e){return e.theme.fieldDarkenBackground}),(function(e){return e.theme.tableRowHover}),(function(e){return e.theme.fieldBorder}),(function(e){return e.theme.fontColor}),(function(e){return e.theme.activeBorder}),(function(e){return e.theme.fieldBorder}),(function(e){return e.theme.fontColor}),(function(e){return e.theme.sectionBackground}),(function(e){return e.theme.fontColor}),(function(e){return e.theme.fieldBorder}),(function(e){return e.theme.sectionBackground}),(function(e){return e.theme.fontColor}),(function(e){return e.theme.fontColor}),(function(e){return e.theme.sectionBackground}),(function(e){return e.theme.sectionBackground}),(function(e){return e.tbodyHeight||"auto"}),(function(e){return e.theme.activeBorder}),m.colors.softgray3,m.colors.softgray3,m.colors.softgray3,m.colors.softgray2,(function(e){return e.theme.tableRowHover}),(function(e){return e.theme.fieldBorder}),(function(e){return e.theme.fieldBorder}),(function(e){return e.theme.fieldBorder}))),st=F.default.div($e||($e=Object(k.a)(["\n\t.header-configuration-section,\n\t.header-details-section {\n\t\t.section-header {\n\t\t\t&::after {\n\t\t\t\tbackground-color: ",";\n\t\t\t}\n\t\t}\n\t}\n"])),(function(e){return e.theme.fieldBorder})),lt=F.default.div(Xe||(Xe=Object(k.a)(["\n\tpointer-events: none;\n\tcolor: ",";\n\tfont-weight: 400;\n\tfont-size: 14px;\n"])),(function(e){return e.theme.secondaryColor})),dt={Nombre_Propuesto:"Propuesto",Prioridad_Sondaje:"Prioridad",Norte_Propuesto:"Norte",Este_Propuesto:"Este",Elev_Propuesto:"Cota",Prof_Propuesto:"Largo",SR_Propuesto:"SR",Azimut_Propuesto:"Azimuth",Inclin_Propuesto:"DIP",DDH_Propuesto:"DDH",RC_Propuesto:"RC",Objetivo_Diametro:"Di\xe1metro"};function ut(e){var t=e.data,n=Object(a.useMemo)((function(){return function(e){var t=[];return Object.keys(dt).forEach((function(e,n){var r=12*dt[e].length+14;t.push({title:dt[e],dataIndex:e,key:e,width:0===n?190:r<86?86:r,fixed:0===n?"left":void 0,ellipsis:!0})})),t}()}),[]);return Object(w.jsxs)("div",{className:"header-details-section",children:[Object(w.jsx)(ke.SectionHeader,{left:"Detalles"}),Object(w.jsx)("div",{className:"table-hep",children:Object(w.jsx)(Me.a,{columns:n,dataSource:t,pagination:!1,locale:{emptyText:Object(w.jsx)(lt,{children:"No existe informaci\xf3n para mostrar"})},scroll:{x:"100%"}})})]})}var bt=n(118),pt=n.n(bt),jt=n(116),ft=n.n(jt),ht=(n(1049),function(e){var t=e.children;return Object(w.jsx)("p",{className:"title",children:t})}),mt=n(63),gt=n(130),Ot=n(74),xt=function(e,t){return e.reduce((function(e,n){return Object(u.a)(Object(u.a)({},e),{},Object(gt.a)({},n[t],[].concat(Object(Ot.a)(e[n[t]]||[]),[n])))}),{})},vt=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.readAsDataURL(t),r.onload=function(){return e(r.result)},r.onerror=function(e){return n(e)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function yt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{w:640,h:480},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=new FileReader;a.onload=function(e){Ct(e.target.result,t,n,r)},a.readAsDataURL(e)}function Ct(e,t,n,r){var a=new Image;a.onload=function(e){var o=document.createElement("canvas"),i=a.width,c=a.height;i>c?i>t.w&&(c*=t.w/i,i=t.w):c>t.h&&(i*=t.h/c,c=t.h),o.width=i,o.height=c,o.getContext("2d").drawImage(a,0,0,i,c),function(e,t,n){switch(t){case"file":e.toBlob((function(e){n(e)}),"image/jpeg",.7);break;case"dataURL":n(e.toDataURL("image/png",.7))}}(o,n,r)},a.src=e}var wt=function(e){return e.type?[!0]:[!1,"type","Seleccione tipo de perforaci\xf3n"]},Rt="".concat("http://smig.spence.outlier.cl/drillingWorkflow/api/","hep/pdf/");function St(e){return{type:"@hep/updateModalConfig",payload:e}}var kt=[{label:"SPRC",value:"SPRC"},{label:"SPD",value:"SPD"},{label:"SPSD",value:"SPSD"},{label:"SPRD",value:"SPRD"},{label:"SPAD",value:"SPAD"}];function Et(e){var t,n,r,o,i,c,s=e.onSave,p=(e.data,Object(we.c)((function(e){return e.hepReducer}))),j=p.hepData,f=p.modalConfig,h=j.holeId,m=j.finalName,g=j.type,O=j.requiredGeophysics,x=j.observation,v=Object(a.useState)(!1),y=Object(b.a)(v,2),C=y[0],R=y[1],S=Object(we.c)((function(e){return e.baseReducer.offline})),k=(Object(mt.g)(),Object(we.b)()),E=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(It("type",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){!g||m&&m===h||(R(!0),Ke.get("Hep/getFinalName/".concat(g)).then((function(e){if(e.data){var t=e.data;k(It("finalName",t))}})).finally((function(){return R(!1)})))}),[j,g,h]);var F=!h||!!j.Fecha_HEP&&m===h||!!j.inQueue;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Se.a,{active:C}),Object(w.jsx)(se.a,Object(u.a)(Object(u.a)({onCancel:function(){return k(St({active:!1}))},onSubmit:function(){!function(){if(R(!0),S){var e=JSON.parse(JSON.stringify(Object(u.a)(Object(u.a)({},j),{},{inQueue:!0})));Ne.table("hepQueue").add(e).then((function(t){k({type:"@hep/updateRootProps",payload:{prop:"hepData",value:e}}),qe(e,e.arearequestid).then((function(e){k({type:"@base/updateRootProp",payload:{prop:"hepSync",value:!0}})})).catch((function(e){k({type:"@base/updateRootProp",payload:{prop:"hepSync",value:!1}})}))})).finally((function(){R(!1)}))}else Qe.a.post("Hep/".concat(h),j).then((function(e){var t=e.data;if(200===e.status&&!0===(null===t||void 0===t?void 0:t.status)){var n=t.emails;console.log("emails",n,t),k(St({active:!0,title:"Hep Generada",content:"Se ha generado una nueva HEP para el sondaje ".concat(h," con HoleId = ").concat(m),cancelProps:{visible:!1},onSubmit:function(){k(St({active:!1})),s&&s()}})),n&&n.length>0&&n.forEach((function(e){var t=document.createElement("a");t.href="mailto:".concat(e.to,"?Subject=").concat(e.subject,"&body=<strong>").concat(e.body,"</strong>"),document.body.appendChild(t),t.click(),document.body.removeChild(t);var n=document.createElement("a");n.href="".concat(Rt).concat(e.finalHoleId),n.download=e.filename,n.setAttribute("target","_blank"),document.body.appendChild(n),n.click(),document.body.removeChild(n)}))}else k(St({active:!0,title:"Error de ingreso",content:"Error al intentar generar la HEP para el sondaje ".concat(h," ").concat(t.message?": ".concat(t.message):""),okProps:{visible:!1}}))})).finally((function(){return R(!1)}))}(),k(St({active:!1}))},okProps:{text:"Aceptar"}},f),{},{children:Object(w.jsx)("div",{className:"pd-14",children:null===f||void 0===f?void 0:f.content})})),Object(w.jsxs)("div",{className:"header-configuration-section",children:[Object(w.jsx)(ke.SectionHeader,{left:"HEP"}),Object(w.jsxs)("div",{className:"pd-14 flex flex-vgap-20",style:{flexDirection:"column",justifyContent:"space-between",height:"calc(100% - 50px)"},children:[Object(w.jsxs)("div",{className:"flex-vgap-20",style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"Tipo"}),Object(w.jsx)(pt.a,{isError:"type"===(null===j||void 0===j||null===(t=j.error)||void 0===t?void 0:t.prop),message:"type"===(null===j||void 0===j||null===(n=j.error)||void 0===n?void 0:n.prop)&&(null===j||void 0===j||null===(r=j.error)||void 0===r?void 0:r.message),disabled:F,darken:!0,size:"large",value:g,options:kt,onChange:E})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"\xbfRequiere Geof\xedsica?"}),Object(w.jsx)(ft.a,{disabled:F,size:"large",index:O?0:1,onChange:function(e){return k(It("requiredGeophysics","Si"===e.content))}})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"Nombre Final"}),Object(w.jsx)(tt.a,{isError:"finalName"===(null===j||void 0===j||null===(o=j.error)||void 0===o?void 0:o.prop),message:"finalName"===(null===j||void 0===j||null===(i=j.error)||void 0===i?void 0:i.prop)&&(null===j||void 0===j||null===(c=j.error)||void 0===c?void 0:c.message),darken:!0,size:"large",value:m,disabled:F,onChange:function(e){k(It("finalName",e))}})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"Observaci\xf3n"}),Object(w.jsx)(et.TextArea,{darken:!0,placeholder:"(Opcional)",size:"large",value:h&&x,disabled:F,onChange:function(e){k(It("observation",e))}})]})]}),Object(w.jsx)("div",{children:Object(w.jsx)(N.a,{disabledOpacity:F,type:"green",size:"large",style:{width:258,fontWeight:"bold"},onClick:function(){var e=wt(j),t=Object(b.a)(e,3),n=t[0],r=t[1],a=t[2];k(n?St({active:!0,size:"small",title:"Generar HEP",content:"Esta seguro que desea generar la HEP ".concat(m," para el sondaje ").concat(h)}):It("error",{prop:r,message:a}))},children:"Generar HEP"})})]})]})]})}var Nt={holeId:null,holes:[],hepData:{finalName:null,type:null,observation:null,holeId:null,requiredGeophysics:!0},modalConfig:{}};n(322);function Ft(e,t){return{type:"@hep/updateRootProps",payload:{prop:e,value:t}}}var At=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return!!(n||"object"!==typeof e&&"object"!==typeof t)&&(e[n]||e).toString().localeCompare((t[n]||e).toString())},Dt=[{key:"holeId",title:"HOLEID",dataIndex:"holeId",sorter:function(e,t){return At(e,t,"holeId")},width:180,fixed:"left"},{key:"Nombre_Propuesto",title:"Propuesto",dataIndex:"Nombre_Propuesto",sorter:function(e,t){return At(e,t,"Nombre_Propuesto")},width:180,fixed:"left"},{key:"Prioridad_Sondaje",title:"Prioridad",dataIndex:"Prioridad_Sondaje",width:110,sorter:function(e,t){return At(e,t,"Prioridad_Sondaje")}},{key:"Nombre_Diseno",title:"Dise\xf1o",dataIndex:"Nombre_Diseno",width:180,sorter:function(e,t){return At(e,t,"Nombre_Diseno")}},{key:"FiscalYear_Propuesto",title:"FY",dataIndex:"FiscalYear_Propuesto",width:70,sorter:function(e,t){return At(e,t,"FiscalYear_Propuesto")}},{key:"Campana",title:"Campa\xf1a",dataIndex:"Campana",width:220,sorter:function(e,t){return At(e,t,"Campana")}},{key:"hep",title:"HEP",dataIndex:"hep",width:240,render:function(e,t){return function(e){var t=e.fileName,n=e.holeId;return t?Object(w.jsxs)("p",{style:{paddingLeft:30,position:"relative"},children:[Object(w.jsx)(p.PdfTone,{style:{width:18,height:18,position:"absolute",left:0,top:"50%",transform:"translateY(-50%)"}}),Object(w.jsxs)("a",{href:"".concat(Je,"hep/pdf/").concat(n),target:"_blank",rel:"noreferrer",children:[t,Object(w.jsx)(p.DownloadFilled,{style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)"}})]})]}):Object(w.jsx)("span",{style:{opacity:.5},children:"No existe documento"})}(t)}}],Pt={RC:"SPRC",DDH:"SPD"};var qt=function(e){var t=Object(we.c)((function(e){return e.hepReducer})),n=t.holes,r=t.hepData,o=Object(we.b)(),i=Object(a.useState)(!1),c=Object(b.a)(i,2),s=c[0],l=c[1],d=Object(a.useState)(null),p=Object(b.a)(d,2),j=p[0],f=p[1],h=Object(a.useCallback)((function(e,t){o(Ft(e,t))}),[o]),m=Object(a.useCallback)((function(e){if(!e)return h("holes",[]),void h("hepData",{});l(!0),Ke.get("Hep/BySearch/".concat(e)).then((function(e){if(e.data){var t=e.data;h("holes",t.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{key:e.Nombre_Propuesto})})))}})).finally((function(){return l(!1)}))}),[h]);return Object(a.useEffect)((function(){o({type:"clean"})}),[]),nt((function(){null!==j&&m(j)}),500,[j]),Object(w.jsxs)(ga,{className:"all-heps_page",onChangeTheme:e.onChangeTheme,light:e.light,children:[Object(w.jsx)(Se.a,{active:s}),Object(w.jsx)(Ye,{style:{padding:"19px 0"},children:"HEP"}),Object(w.jsx)(st,{className:"hep-page flex flex-column flex-1",children:Object(w.jsxs)("div",{className:"flex flex-gap-14 flex-1",style:{height:"100%",maxWidth:"100%",maxHeight:"calc(100vh - 220px)"},children:[Object(w.jsxs)("div",{className:"flex-vgap-14 hep-page_holes",children:[Object(w.jsxs)("div",{style:{minHeight:500},className:"flex flex-vgap-14 hep-page_list",children:[Object(w.jsx)(tt.a,{value:j,onChange:f,placeholder:"Escriba el nombre del sondaje para buscar..."}),Object(w.jsx)(ke.Section,{style:{height:"calc(100% - 44px)"},children:Object(w.jsx)(ct,{className:"table-hep",children:Object(w.jsx)(Me.a,{columns:Dt,dataSource:n,pagination:!1,scroll:{x:"100%",y:450},locale:{triggerDesc:"Descendente",triggerAsc:"Ascendente",cancelSort:"Cancelar orden"},onRow:function(e,t){return{onClick:function(){var t;(t=e)&&t.holeId&&Ke.get("Hep/hole/".concat(t.holeId)).then((function(e){if(e.data){var n=e.data,r=re.a.merge(t,n);!r.type&&r.Objetivo_Tipo&&(r.type=Pt[r.Objetivo_Tipo]||null),o(Ft("hepData",r))}}))}}}})})})]}),Object(w.jsx)(ke.Section,{className:"hep-page_details",children:Object(w.jsx)(ct,{children:Object(w.jsx)(ut,{data:r.holeId?[Object(u.a)(Object(u.a)({},r),{},{key:1})]:[]})})})]}),Object(w.jsx)(ke.Section,{className:"flex-gap-14 inline-fields",style:{width:288},children:Object(w.jsx)(Et,{onSave:function(){h("hepData",{}),m(j)}})})]})})]})};function zt(e,t){return{type:"@hep/updateRootProps",payload:{prop:e,value:t}}}function It(e,t){return{type:"@hep/updateHepData",payload:{prop:e,value:t}}}var Tt=function(e){var t=e.areaRequestId,n=Object(we.c)((function(e){return e.hepReducer})),r=n.holes,o=n.hepData,i=Object(we.b)(),c=Object(a.useState)(!1),s=Object(b.a)(c,2),l=s[0],d=s[1],j=Object(we.c)((function(e){return e.baseReducer.offline})),f=function(e){e&&e.holeId&&(d(!0),function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Ie(e.holeId).then((function(t){var n=re.a.merge(e,t);return!n.type&&n.Objetivo_Tipo&&(n.type=Pt[n.Objetivo_Tipo]||null),n})):Ke.get("Hep/hole/".concat(e.holeId)).then((function(t){if(t.data){var n=t.data,r=re.a.merge(e,n);return!r.type&&r.Objetivo_Tipo&&(r.type=Pt[r.Objetivo_Tipo]||null),r}}))}(e,j).then((function(e){i(zt("hepData",e))})).finally((function(){return d(!1)})))},h=Object(a.useCallback)((function(e,t){i(zt(e,t))}),[i]),m=Object(a.useCallback)((function(){d(!0),function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?ze(e).then((function(e){return t(e),t({type:"@base/updateRootProp",payload:{prop:"hepSync",value:!0}}),e.payload.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{key:e.Nombre_Propuesto})}))})):Ke.get("Hep/getByAreaRequest/".concat(e)).then((function(n){if(n.data){var r=n.data;return r.forEach((function(n){qe(Object(u.a)(Object(u.a)({},n),{},{arearequestid:e,inQueue:!1}),e).then((function(e){t({type:"@base/updateRootProp",payload:{prop:"hepSync",value:!0}})})).catch((function(e){t({type:"@base/updateRootProp",payload:{prop:"hepSync",value:!1}})}))})),r.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{key:e.Nombre_Propuesto})}))}}))}(t,i,j).then((function(e){h("holes",e)})).finally((function(){d(!1)}))}),[h,i]);return Object(a.useEffect)((function(){i({type:"clean"})}),[]),Object(a.useEffect)((function(){null!==t&&m(t)}),[t,m]),Object(w.jsxs)(st,{className:"hep-page flex flex-column flex-1",children:[Object(w.jsx)(Se.a,{active:l}),Object(w.jsx)(Ge,{icon:Object(w.jsx)(p.DillFilled,{style:{transform:"rotateZ(45deg)"}}),text:"Pozos propuestos"}),Object(w.jsxs)("div",{className:"flex flex-gap-14 flex-1",style:{marginBottom:14,height:"calc(100% - 50px)",maxWidth:"100%"},children:[Object(w.jsxs)("div",{className:"flex-vgap-14 hep-page_holes",children:[Object(w.jsx)(ke.Section,{className:"hep-page_list",children:Object(w.jsx)(ct,{className:"table-hep",children:Object(w.jsx)(Me.a,{columns:Dt,dataSource:r,pagination:!1,scroll:{x:"100%",y:400},locale:{triggerDesc:"Descendente",triggerAsc:"Ascendente",cancelSort:"Cancelar orden"},onRow:function(e,t){return{onClick:function(){return f(e)}}}})})}),Object(w.jsx)(ke.Section,{className:"hep-page_details",children:Object(w.jsx)(ct,{children:Object(w.jsx)(ut,{data:o.holeId?[Object(u.a)(Object(u.a)({},o),{},{key:1})]:[]})})})]}),Object(w.jsx)(ke.Section,{className:"flex-gap-14 inline-fields",style:{width:288},children:Object(w.jsx)(Et,{onSave:function(){return m(t)}})})]})]})},Mt=n(186),Bt=n.n(Mt);var Lt=function(e){return Object(w.jsxs)("svg",Object(u.a)(Object(u.a)({width:80,height:80,viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:[Object(w.jsx)("circle",{cx:40,cy:40,r:40,fill:"#616E82"}),Object(w.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28.47 63.705a2.672 2.672 0 00-2.673-2.672h-.746a2.673 2.673 0 00-2.467 1.644H21.35a2.673 2.673 0 00-2.468 1.643h-.42a2.252 2.252 0 000 4.505h10.685a2.252 2.252 0 000-4.505h-.748c.046-.197.07-.403.07-.615zM65.65 18.008a2.158 2.158 0 00-2.158-2.158h-3.584c-.909 0-1.686.562-2.004 1.356h-2.796c-.908 0-1.686.562-2.004 1.357h-1.535a1.819 1.819 0 100 3.637h16.063a1.819 1.819 0 100-3.637h-2.054a2.16 2.16 0 00.072-.555z",fill:"#738095"}),Object(w.jsx)("path",{d:"M25.862 41.018l14.209 3.11v18.097l-14.209-4.524V41.018z",fill:"#D7D7D7"}),Object(w.jsx)("path",{d:"M25.862 41.018l14.209 3.11v18.097l-14.209-4.524V41.018z",fill:"#78889D"}),Object(w.jsx)("path",{d:"M38.88 57.675l-4.4-1.287v2.662l4.4 1.425v-2.8z",fill:"#9BA9BB"}),Object(w.jsx)("path",{d:"M54.138 41.018l-14.067 3.11v18.097l14.067-4.524V41.018z",fill:"#D7D7D7"}),Object(w.jsx)("path",{d:"M54.138 41.018l-14.067 3.11v18.097l14.067-4.524V41.018z",fill:"#8693A4"}),Object(w.jsx)("path",{d:"M40.09 44.133l-14.228-3.115 14.229-3.393 14.047 3.393-14.047 3.115z",fill:"#C8BDBD"}),Object(w.jsx)("path",{d:"M40.09 44.133l-14.228-3.115 14.229-3.393 14.047 3.393-14.047 3.115z",fill:"#9BA9BB"}),Object(w.jsx)("path",{d:"M59.6 23.2L40 40 20.4 23.2M40 24.4V40",stroke:"#2A313B",strokeWidth:.8}),Object(w.jsx)("path",{d:"M19.06 24.91C21.684 15.518 30.247 9 39.998 9a21.73 21.73 0 0120.802 15.448l.14.462a68.52 68.52 0 00-20.748 1.249L40 26.2l-.192-.041a68.52 68.52 0 00-20.747-1.249z",fill:"#38414E"}),Object(w.jsx)("path",{d:"M39.187 38.479h1.625l.963 2.4L40 41.5l-1.775-.621.962-2.4z",fill:"#5C6D83"}),Object(w.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.5 31.879a3.5 3.5 0 013.5-3.5h.9c1.296 0 2.427.704 3.032 1.75H15.7a3.502 3.502 0 013.34 2.45h.41a2.95 2.95 0 010 5.9H5.65a2.95 2.95 0 110-5.9h.92a3.515 3.515 0 01-.07-.7zM72.95 47.633a3.5 3.5 0 00-3.5-3.5h-.9c-1.474 0-2.734.91-3.25 2.2h-1.55c-1.474 0-2.734.91-3.25 2.2H60a2.95 2.95 0 100 5.9h13.8a2.95 2.95 0 000-5.9h-.967c.076-.287.117-.589.117-.9z",fill:"#738095"})]}))};var Ht=function(e){var t=e.url;return Object(w.jsx)("div",{className:"pd-14",style:{height:"80vh",width:"100%"},children:Object(w.jsx)("object",{data:t,type:"application/pdf",style:{height:"100%",width:"100%"},children:Object(w.jsx)("iframe",{src:"https://docs.google.com/viewer?url=".concat(t,"&embedded=true"),title:"view"})})})},_t=n(133),Wt=n.n(_t);var Vt=function(e){return Object(w.jsx)("svg",Object(u.a)(Object(u.a)({width:"1em",height:"1em",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:Object(w.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.889 0H1.556C.7 0 0 .7 0 1.556v10.888C0 13.3.7 14 1.556 14h10.888C13.3 14 14 13.3 14 12.444V3.111L10.889 0zM7 12.444c-1.322 0-2.333-1.01-2.333-2.333 0-1.322 1.01-2.333 2.333-2.333 1.322 0 2.333 1.01 2.333 2.333 0 1.322-1.01 2.333-2.333 2.333zm2.333-7.777H1.556V1.556h7.777v3.11z",fill:"currentColor"})}))};var Gt=function(e){return Object(w.jsxs)("svg",Object(u.a)(Object(u.a)({width:"1em",height:"1em",viewBox:"0 0 19 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:[Object(w.jsx)("path",{d:"M1.033 3.025l1.775 3.807a.3.3 0 11-.544.253L.362 3.007a.3.3 0 01.145-.399l.544-.253a.3.3 0 01.254.543l-.272.127z",fill:"#05ABE8"}),Object(w.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.356.897A.908.908 0 00.926 2.1L6.91 14.862l2.692-1.286L3.618.814A.892.892 0 002.424.387l-1.068.51zm8.227 12.696l-2.7 1.289 2.07 1.612a.36.36 0 00.58-.278l.05-2.623z",fill:"currentColor"}),Object(w.jsx)("path",{d:"M9.6 17.4s5.4.3 5.4-1.2-5.4-3.3-4.8-5.1c.682-2.047 7.029-.28 7.5-2.4C18.3 6 9 5.4 9 5.4",stroke:"currentColor",strokeWidth:.9,strokeLinecap:"round"})]}))},Yt=n(374),Ut=n(375),Qt=["identifier"],Jt={lazyRadius:1,brushRadius:2,brushColor:"#0B22BD",catenaryColor:"#0B22BD",backgroundColor:"#2D2F35",canvasWidth:665,canvasHeight:338,hideGrid:!0},Kt=o.a.forwardRef((function(e,t){var n=e.identifier,r=Object(S.a)(e,Qt),o=Object(a.useRef)(),i=Object(a.useContext)(F.ThemeContext);return t&&(t.current={getSvg:function(){},getBase64Data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=o.current.canvas.drawing.toDataURL("image/png",.7);t&&t(n),e&&o.current.canvas.drawing.toBlob(function(){var t=Object(d.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}),Object(w.jsxs)("div",{style:{position:"relative"},children:[Object(w.jsx)(Ut.a,Object(u.a)(Object(u.a)({ref:o,onChange:function(e){var t=Yt.a(),a=[];JSON.parse(o.current.getSaveData()).lines.forEach((function(e){var t=e.points,n=[];t.forEach((function(e){n.push([e.x,e.y])})),a.push(n)}));var i="";a.forEach((function(e){var n=t(e);i+="<path d='".concat(n,"' stroke='black'> </path>")}));var c="<svg width='150px' height='45px' viewBox='0 0 ".concat(r.canvasWidth," ").concat(r.canvasHeight,"' fill='none' xmlns='http://www.w3.org/2000/svg'>#PATHS</svg>");c=c.replace("#PATHS",i),sessionStorage.setItem(n,c)}},r),{},{backgroundColor:i.dark?"#2D2F35":"#fff"})),Object(w.jsxs)("div",{className:"signature-options-container",children:[Object(w.jsx)(p.VersionOutlined,{onClick:function(){o.current.undo()}}),Object(w.jsx)(p.ClearFilled,{style:{marginLeft:10},onClick:function(){sessionStorage.removeItem(n),o.current.clear()}})]})]})})),Zt=(n(1054),"Firmado por el participante"),$t={color:m.colors.skyblue,width:"auto",height:"auto"};var Xt,en=function(e){var t=e.disabled,n=e.svg,r=e.signed,a=void 0!==r&&r,o=e.signedText,i=void 0===o?Zt:o,c=e.noSignedText,s=void 0===c?"Seleccione para firmar":c,l=e.onClick;return Object(w.jsx)(ke.Section,{className:"signature-viewer",style:{height:150,maxWidth:560,pointerEvents:t?"none":"auto"},children:Object(w.jsx)("div",{onClick:l,children:n||Object(w.jsxs)("label",{style:{textAlign:"center",cursor:"pointer"},children:[!a&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Gt,{style:Object(u.a)(Object(u.a)({},$t),{},{fontSize:22})}),Object(w.jsx)(Oe,{as:"p",style:{opacity:.5},children:s})]}),a&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(p.CheckOutlined,{style:Object(u.a)(Object(u.a)({},$t),{},{verticalAlign:"middle",marginRight:9,fontSize:"1rem"})}),Object(w.jsx)(Oe,{as:"span",style:{opacity:.5},children:i})]})]})})})},tn=(n(1055),Object(F.default)(ke.Section)(Xt||(Xt=Object(k.a)(["\n\t&.table-dual-item-container {\n\t\tborder-bottom: 1px solid ",";\n\t\t.table-dual-item {\n\t\t\tborder-bottom: 1px solid ",";\n\t\t}\n\t}\n"])),(function(e){return e.theme.fieldBorder}),(function(e){return e.theme.fieldBorder})));var nn=function(e){var t=e.data,n=e.headerProp,r=void 0===n?{label:"Item",secondaryLabel:"Cumple"}:n,a=e.options,o=e.onChange,i=e.disabled,c=void 0!==i&&i;return Object(w.jsxs)(tn,{className:"table-dual-item-container",children:[Object(w.jsxs)("div",{className:"table-dual-item flex flex-space pd-14",children:[Object(w.jsx)("span",{className:"flex flex-middle",children:r.label}),Object(w.jsx)("div",{style:{width:138},children:Object(w.jsx)("span",{className:"flex flex-left",children:r.secondaryLabel})})]}),null===t||void 0===t?void 0:t.map((function(e,t){var n=0;return void 0===a?n="No"===e.answer?1:0:a.forEach((function(t,r){t.content===e.answer&&(n=r)})),Object(w.jsxs)("div",{className:"table-dual-item flex flex-space pd-14",children:[Object(w.jsx)("span",{className:"flex flex-middle",children:e.label}),Object(w.jsx)("span",{className:"flex flex-middle",children:Object(w.jsx)(ft.a,{disabled:c,size:"large",secondary:!0,index:n,defaultIndex:1,options:a,onChange:function(e,n){return o&&o(Object(u.a)(Object(u.a)({},e),{},{contentIndex:n,elementPosition:t}))}})})]},t)}))]})},rn=Object.freeze({NO_CREATED:"no creada",CREATED:"creada",APPROVED:"aprobada",DELETED:"eliminada"}),an=Object.freeze({CREATING:1,EDITING:2}),on=Object.freeze({REQUEST:1,RGO:2,HEP:3,PLATFORM_DELIVERY:4}),cn={errors:{revision:"Requerido"},loading:!1,modalConfig:{},recuperation:"",dip:"",azimuth:"",depth:"",sector:"",revisions:[{key:1,label:"Aplitud 30x30",answer:"No"},{key:2,label:"Pretiles Aljibe",answer:"No"},{key:3,label:"Bermas (tr\xe1nsito peatonal)",answer:"No"},{key:4,label:"Pretiles contorno caseta",answer:"No"},{key:5,label:"Accesos veh\xedculos y personal",answer:"No"},{key:6,label:"Pretiles contorno",answer:"No"},{key:7,label:"Nivelaci\xf3n plataforma",answer:"No"},{key:8,label:"Estacionamientos",answer:"No"},{key:9,label:"Pretil contorno y tope ba\xf1o",answer:"No"}],controlMeasures:[{missingFeature:"Aplitud 30x30",controlMeasure:"",observation:""},{missingFeature:"Pretiles Aljibe",controlMeasure:"",observation:""},{missingFeature:"Bermas (tr\xe1nsito peatonal)",controlMeasure:"",observation:""},{missingFeature:"Pretiles contorno caseta",controlMeasure:"",observation:""},{missingFeature:"Accesos veh\xedculos y personal",controlMeasure:"",observation:""},{missingFeature:"Pretiles contorno",controlMeasure:"",observation:""},{missingFeature:"Nivelaci\xf3n plataforma",controlMeasure:"",observation:""},{missingFeature:"Estacionamientos",controlMeasure:"",observation:""},{missingFeature:"Pretil contorno y tope ba\xf1o",controlMeasure:"",observation:""}],requiresGeotechnicalEvaluation:"",materialRisk:"Accidente a personas por falla de terreno",criticalControl:[{key:1,label:"Sistema Control de Terreno",answer:"No"},{key:2,label:"Ejecuci\xf3n / Operaci\xf3n y Cumplimiento del Dise\xf1o Geot\xe9cnico",answer:"No"},{key:3,label:"Segregaci\xf3n de \xc1reas",answer:"No"}],platformSignatures:[{area:"Entrega",responsibles:[{personaName:"",signed:!1,position:0,signature:""}]},{area:"Recibe",responsibles:[{personaName:"",signed:!1,position:0,signature:""}]}]};function sn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cn,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"@platform/updateLoading":return Object(u.a)(Object(u.a)({},e),{},{loading:r});case"@platform/updateRootProps":var a=r.prop,o=r.value;return e[a]=o,Object(u.a)({},e);case"@platform/setControlMeasure":return Object(u.a)(Object(u.a)({},e),{},{controlMeasures:r});case"@platform/updateRevisionProp":var i=r.value,c=r.index,s=e.revisions;return s[c].answer=i,Object(u.a)(Object(u.a)({},e),{},{revisions:s});case"@platform/addControlMeasure":return Object(u.a)(Object(u.a)({},e),{},{controlMeasures:[].concat(Object(Ot.a)(e.controlMeasures),[{missingFeature:"",controlMeasure:"",observation:""}])});case"@platform/updateControlMeasureProp":var l=r.prop,d=r.value,b=r.index,p=e.controlMeasures;return p[b][l]=d,Object(u.a)(Object(u.a)({},e),{},{controlMeasures:p});case"@platform/updateCriticalControlProp":var j=r.value,f=r.index,h=e.criticalControl;return h[f].answer=j,Object(u.a)(Object(u.a)({},e),{},{criticalControl:h});case"@platform/updateSignatureProps":var m=r.areaIndex,g=r.responsibleIndex,O=r.prop,x=r.value,v=e.platformSignatures;return v[m].responsibles[g][O]=x,Object(u.a)(Object(u.a)({},e),{},{platformSignatures:v});case"@platform/setModalConfig":return Object(u.a)(Object(u.a)({},e),{},{modalConfig:Object(u.a)(Object(u.a)({},e.modalConfig),r)});default:return e}}var ln=function(e){var t={},n=[],r=!1;return e.revisions.forEach((function(a){if("No"===a.answer){var o,i,c=e.controlMeasures.find((function(e){return e.missingFeature===a.label}));t.revision="Requerido",n.push({missingFeature:a.label,controlMeasure:null!==(o=null===c||void 0===c?void 0:c.controlMeasure)&&void 0!==o?o:"",observation:null!==(i=null===c||void 0===c?void 0:c.observation)&&void 0!==i?i:""}),"No"===a.answer&&(r=!0)}})),r&&(t.failExists="Existen revisiones que no cumplen."),{data:e,errors:t,controlMeasures:n}},dn=function(e){var t={};(!e.recuperation||""===e.recuperation.trim())&&(t.recuperation="Requerido"),(!e.dip||""===e.dip.trim())&&(t.dip="Requerido"),(!e.azimuth||""===e.azimuth.trim())&&(t.azimuth="Requerido"),(!e.depth||""===e.depth.trim())&&(t.depth="Requerido"),(!e.sector||""===e.sector.trim())&&(t.sector="Requerido");var n=!1;e.revisions.forEach((function(e){"No"===e.answer&&(t.revision="Requerido"),"No"===e.answer&&(n=!0)})),n&&(t.failExists="Existen revisiones que no cumplen."),t.revision&&e.controlMeasures.forEach((function(e,n){""===e.missingFeature.trim()&&(t["missingFeature".concat(n)]="Caracteristica faltante requerida"),""===e.controlMeasure.trim()&&(t["controlMeasure".concat(n)]="Medida de control es requerido")})),e.platformSignatures&&e.platformSignatures.forEach((function(e){e.responsibles.forEach((function(n,r){(!n.personaName||""===n.personaName.trim())&&(t["personaName-".concat(e.area,"-").concat(r)]="Nombre responsable es requerido")}))})),e.materialRisk&&""!==e.materialRisk.trim()||(t.materialRisk="Requerido"),t.missingFeature0&&t.controlMeasure0||delete t.revision;var r=Object.keys(t).length,a=!!r;return t&&t.failExists&&1===r&&(a=!1),{data:e,containError:a,errors:t}},un=["sector","requestId"],bn=[{content:"Si"},{content:"No"},{content:"N/A"}];function pn(e){return{type:"@platform/setModalConfig",payload:Object(u.a)({},e)}}function jn(e){return{type:"@platform/updateSignatureProps",payload:{areaIndex:e.areaIndex,responsibleIndex:e.responsibleIndex,prop:e.prop,value:e.value}}}function fn(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{type:"@platform/loading",payload:e}}var hn=o.a.forwardRef((function(e,t){e.sector;var n,r,o=e.requestId,i=(Object(S.a)(e,un),Object(a.useRef)()),c=Object(a.useRef)(),s=Object(a.useRef)(),j=Object(we.c)((function(e){return e.baseReducer})),f=Object(we.c)((function(e){return e.baseReducer.offline})),h=Object(a.useReducer)(sn,Object(u.a)(Object(u.a)({},cn),j.platformSelected)),m=Object(b.a)(h,2),g=m[0],O=m[1],x=Object(mt.g)(),v=function(e){switch(e){case"savePlatform":i.current.open();O(pn({title:"Guardar entrega de plataforma",size:"small",content:"".concat("Realmente desea guardar la entrega de plataforma.","  ").concat(f?"Actualmente no esta conectado a internet, cuando se encuentre se\xf1al se sincronizara automaticamente":""),onSubmit:function(){return k()}}))}},y=function(e,t,n){c.current.getBase64Data(function(){var r=Object(d.a)(l.a.mark((function r(a){return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=O,r.t1=jn,r.t2=e,r.t3=t,r.t4=n,r.next=7,vt(a);case 7:r.t5=r.sent,r.t6={areaIndex:r.t2,responsibleIndex:r.t3,prop:r.t4,value:r.t5},r.t7=(0,r.t1)(r.t6),(0,r.t0)(r.t7);case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()),O(jn({areaIndex:e,responsibleIndex:t,prop:"signed",value:!0})),i.current.close()},C=function(e,t,n){O({type:"@platform/updateControlMeasureProp",payload:{prop:e,value:t,index:n}})},R=function(e,t){O({type:"@platform/updateRootProps",payload:{prop:e,value:t}})},k=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,r,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=F(),n=t.data,r=t.containError,a={current:0,total:0},o=new FormData,i.current.close(),fn(),!r){e.next=8;break}return fn(!1),e.abrupt("return");case 8:if(!f){e.next=11;break}return Ne.table("platformDeliveryQueue").add(JSON.parse(JSON.stringify(n))).then((function(e){x.goBack()})).finally((function(){fn(!1)})),e.abrupt("return");case 11:n.platformSignatures.forEach((function(e,t){a.total+=e.responsibles.length,a.current+=e.responsibles.filter((function(e){return e.signed})).length,e.responsibles.forEach((function(n){var r=n.signature;o.append("file-".concat(e.area,"-").concat(t,"-").concat(n.position,"-").concat(n.personaName),r)}))})),n.state=a.current===a.total?rn.APPROVED:rn.CREATED,Ke.post("PlatformDelivery/save",n,{contentType:"application/json"}).then((function(e){})).finally((function(){fn(!1),x.goBack()}));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(e){var t=ln(g);O({type:"@platform/setControlMeasure",payload:t.controlMeasures}),R("errors",t.errors)},F=function(){var e=dn(g);return R("errors",e.errors),e};return Object(a.useEffect)((function(){return fn(),o&&fn(!1),function(){return fn(!1)}}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Se.a,{ref:s,active:g.loading}),Object(w.jsx)(se.a,Object(u.a)(Object(u.a)({ref:i,size:"large"},g.modalConfig),{},{children:Object(w.jsx)("div",{className:"pd-14 ",children:g.modalConfig.content})})),Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{className:"platform-delivery-container",children:[Object(w.jsx)(Ve,{left:Object(w.jsx)(mn,{data:g}),right:Object(w.jsx)(gn,{onClick:v,showSave:!(g.state===rn.APPROVED)})}),Object(w.jsxs)("div",{children:[Object(w.jsx)(Ge,{icon:Object(w.jsx)(p.DetailsOutlined,{}),text:"Encabezado"}),Object(w.jsxs)("div",{className:"flex-vgap-20",style:{marginBottom:30},children:[Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"Recomendaci\xf3n"}),Object(w.jsx)(tt.a,{disabled:!0,isError:g.errors&&g.errors.recuperation,message:g.errors&&g.errors.recuperation,size:"large",placeholder:"Ingrese recuperaci\xf3n",value:g.recuperation,style:{width:340},onChange:function(e){g.errors&&""!==e.trim()&&delete g.errors.recuperation,R("recuperation",e)}})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"DIP"}),Object(w.jsx)(tt.a,{disabled:!0,isError:g.errors&&g.errors.dip,message:g.errors&&g.errors.dip,size:"large",placeholder:"Ingrese DIP",value:g.dip,style:{width:340},onChange:function(e){g.errors&&""!==e.trim()&&delete g.errors.dip,R("dip",e)}})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"Azimuth"}),Object(w.jsx)(tt.a,{disabled:!0,isError:g.errors&&g.errors.azimuth,message:g.errors&&g.errors.azimuth,size:"large",placeholder:"Ingrese azimuth",value:g.azimuth,style:{width:340},onChange:function(e){g.errors&&""!==e.trim()&&delete g.errors.azimuth,R("azimuth",e)}})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"Profundidad programada"}),Object(w.jsx)(tt.a,{disabled:!0,isError:g.errors&&g.errors.depth,message:g.errors&&g.errors.depth,size:"large",placeholder:"Ingrese profundidad programada",value:g.depth,style:{width:340},onChange:function(e){g.errors&&""!==e.trim()&&delete g.errors.depth,R("depth",e)}})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"Sector"}),Object(w.jsx)(tt.a,{disabled:!0,isError:g.errors&&g.errors.sector,message:g.errors&&g.errors.sector,size:"large",placeholder:"Ingrese sector",value:g.sector,style:{width:340},onChange:function(e){g.errors&&""!==e.trim()&&delete g.errors.sector,R("sector",e)}})]})]}),Object(w.jsx)(Ge,{icon:Object(w.jsx)(p.DetailsOutlined,{}),text:"Revisi\xf3n de plataforma de sondajes"}),Object(w.jsx)("div",{style:{marginBottom:30},children:Object(w.jsx)(nn,{disabled:g.state===rn.APPROVED,data:g.revisions,onChange:function(e){var t,n;t=e.content,n=e.elementPosition,O({type:"@platform/updateRevisionProp",payload:{value:t,index:n}}),N()}})}),g.controlMeasures&&g.controlMeasures.length>0&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(Wt.a,{type:"danger",style:{marginBottom:10},children:[Object(w.jsx)("strong",{children:"Nota:"})," Si alguna de las condiciones de las caracter\xedsticas de la plataforma NO CUMPLE se debe APLICAR las medidas de control para definirla como PLATAFORMA EXCEPCIONAL"]}),Object(w.jsx)(Ge,{icon:Object(w.jsx)(p.DetailsOutlined,{}),text:"Medidas de control"}),Object(w.jsxs)(ke.Section,{style:{marginBottom:30},children:[Object(w.jsx)(ke.SectionHeader,{left:"\xcdtems"}),Object(w.jsx)("div",{className:"pd-14 flex-vgap-14",children:null===(n=g.controlMeasures)||void 0===n?void 0:n.map((function(e,t){return Object(w.jsxs)(ke.Section,{type:"inner",children:[Object(w.jsx)(ke.SectionHeader,{left:"Item ".concat(t+1)}),Object(w.jsxs)("div",{className:"pd-14 flex-vgap-20",children:[Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"Caracter\xedstica plataforma faltante"}),Object(w.jsx)(et.TextArea,{isError:g.errors&&g.errors["missingFeature".concat(t)],message:g.errors&&g.errors["missingFeature".concat(t)],size:"large",disabled:!0,darken:!0,placeholder:"Ingrese una caracteristica de plataforma faltante",value:e.missingFeature,style:{maxWidth:860},onChange:function(e){g.errors&&""!==e.trim()&&delete g.errors["missingFeature".concat(t)],C("missingFeature",e,t)}})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"Medidas de control"}),Object(w.jsx)(et.TextArea,{disabled:g.state===rn.APPROVED,isError:g.errors&&g.errors["controlMeasure".concat(t)],message:g.errors&&g.errors["controlMeasure".concat(t)],size:"large",darken:!0,placeholder:"Ingrese una medida de control",value:e.controlMeasure,style:{maxWidth:860},onChange:function(e){g.errors&&""!==e.trim()&&delete g.errors["controlMeasure".concat(t)],C("controlMeasure",e,t)}})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"Observaciones"}),Object(w.jsx)(et.TextArea,{disabled:g.state===rn.APPROVED,isError:g.errors&&g.errors["observation".concat(t)],message:g.errors&&g.errors["observation".concat(t)],size:"large",darken:!0,placeholder:"Ingrese una observaci\xf3n",value:e.observation,style:{maxWidth:860},onChange:function(e){g.errors&&""!==e.trim()&&delete g.errors["observation".concat(t)],C("observation",e,t)}})]})]})]},t)}))})]})]}),Object(w.jsx)(Ge,{icon:Object(w.jsx)(p.DetailsOutlined,{}),text:"Controles Cr\xedticos"}),Object(w.jsxs)("div",{className:"flex-vgap-20",style:{marginBottom:30},children:[Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"Requiere evaluaci\xf3n geot\xe9cnica"}),Object(w.jsx)(ft.a,{disabled:g.state===rn.APPROVED,size:"large",index:g.requiresGeotechnicalEvaluation?0:1,onChange:function(e){R("requiresGeotechnicalEvaluation","Si"===e.content)}})]}),g.requiredRgo&&Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"R-GO"}),Object(w.jsx)(tt.a,{disabled:g.state===rn.APPROVED,value:g.rgoName,size:"large",placeholder:"Ingrese RGO",style:{width:340}})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"Riesgo Material"}),Object(w.jsx)(tt.a,{disabled:g.state===rn.APPROVED,isError:g.errors&&g.errors.materialRisk,message:g.errors&&g.errors.materialRisk,size:"large",value:g.materialRisk,placeholder:"Accidente a personas por falla de terreno",style:{width:340},onChange:function(e){g.errors&&""!==e.trim()&&delete g.errors.materialRisk,R("materialRisk",e)}})]}),Object(w.jsx)("div",{style:{marginBottom:30},children:Object(w.jsx)(nn,{disabled:g.state===rn.APPROVED,data:g.criticalControl,options:bn,headerProp:{label:"Control critico",secondaryLabel:"Si / No / No Aplica"},onChange:function(e){return t=e.content,n=e.elementPosition,void O({type:"@platform/updateCriticalControlProp",payload:{value:t,index:n}});var t,n}})})]}),Object(w.jsx)(Ge,{icon:Object(w.jsx)(Gt,{}),text:"Firmas Responsables"}),Object(w.jsx)("div",{className:"flex-vgap-20",children:null===(r=g.platformSignatures)||void 0===r?void 0:r.map((function(e,t){var n=e.area,r=e.responsibles;return Object(w.jsxs)(ke.Section,{style:{marginBottom:20},children:[Object(w.jsx)(ke.SectionHeader,{left:"".concat(n," plataforma de perforaci\xf3n")}),Object(w.jsx)("div",{className:"pd-14",children:r.map((function(e,r){var a=e.personaName,o=e.signed;return Object(w.jsx)(ke.Section,{type:"inner",style:{marginBottom:14},children:Object(w.jsxs)("div",{className:"pd-14 signature-section",children:[Object(w.jsx)(ht,{children:"Nombres"}),Object(w.jsx)(tt.a,{disabled:g.state===rn.APPROVED||g.state===rn.CREATED,isError:g.errors&&g.errors["personaName-".concat(n,"-").concat(r)],message:g.errors&&g.errors["personaName-".concat(n,"-").concat(r)],size:"large",value:a,style:{maxWidth:560,marginBottom:20},placeholder:"Escriba nombres y apellidos",onChange:function(e){g.errors&&""!==e.trim()&&delete g.errors["personaName-".concat(n,"-").concat(r)],function(e,t,n,r){O(jn({areaIndex:e,responsibleIndex:t,prop:n,value:r}))}(t,r,"personaName",e)}}),Object(w.jsx)(ht,{children:"Firma"}),Object(w.jsx)(en,{disabled:o&&(g.state===rn.APPROVED||g.state===rn.CREATED),signed:o,onClick:function(){return function(e,t,n){O(pn({title:"Firma",size:"large",onSubmit:function(){return y(e,t,n)},content:Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:"signature-draw-container",children:Object(w.jsx)(Kt,Object(u.a)(Object(u.a)({ref:c},Jt),{},{canvasWidth:"100%",canvasHeight:"80vh"}))}),Object(w.jsx)(Oe,{style:{marginTop:20},children:"La firma realizada en este recuadro, ser\xe1 utilizada \xfanicamente en este documento, y no ser\xe1 guardada o manipulada fuera de este."})]})})),i.current.open()}(t,r,"signature")}})]})},r)}))})]},t)}))})]})]})}),Object(w.jsx)("div",{style:{marginTop:30,marginBottom:60},children:g.state!==rn.APPROVED&&Object(w.jsx)(E.BigIconButton,{type:"green",icon:Object(w.jsx)(p.SaveTone,{}),onClick:function(){return v("savePlatform")},children:"Guardar Cambios"})})]})}));function mn(e){var t=e.data,n={current:0,total:0};t.platformSignatures.forEach((function(e){var t=e.responsibles;n.total+=t.length,n.current+=t.filter((function(e){return e.signed})).length}));var r=n.current<n.total?m.colors.red:m.colors.skyblue;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("p",{children:"Formulario entrega de plataformas"}),Object(w.jsxs)("span",{style:{color:r},children:[n.current,"/",n.total," Firmas necesarias"]})]})}function gn(e){var t=e.onClick,n=e.showSave,r=void 0===n||n;return Object(w.jsx)("div",{className:"flex flex-center",children:r&&Object(w.jsx)(N.a,{type:"green",prefix:Object(w.jsx)(Vt,{style:{width:14,height:14}}),onClick:function(){return t&&t("savePlatform")},children:"Guardar Cambios"})})}n(1056);var On="".concat("http://smig.spence.outlier.cl/drillingWorkflow/api/","PlatformDelivery/getDocument/");function xn(e,t,n){var r;(r=e,Ne.table("platformCache").toArray().then((function(e){return{type:"@base/replacePlatform",payload:e.filter((function(e){return e.areaRequestId===Number(r)}))}}))).then((function(e){t(e),t({type:"@base/updateRootProp",payload:{prop:"platformDeliverySync",value:!0}})})).catch((function(e){t({type:"@base/updateRootProp",payload:{prop:"platformDeliverySync",value:!1}})})).finally((function(){n(!1)}))}var vn=function(e){var t=e.requestId,n=Object(a.useRef)(),r=Object(mt.g)(),o=Object(we.b)(),i=Object(we.c)((function(e){return e.baseReducer.offline})),c=Object(a.useState)(!1),s=Object(b.a)(c,2),l=s[0],d=s[1],p=Object(we.c)((function(e){return e.baseReducer.platformDelivery})),j=Object(a.useState)({active:!1}),f=Object(b.a)(j,2),h=f[0],m=f[1],g=function(){d(!0),i?xn(t,o,d):Ke.get("PlatformDelivery/getByAreaRequest/".concat(t)).then((function(e){if(e.data){var t=e.data;t.forEach((function(e){(function(e){return Ne.table("platformCache").toArray().then((function(t){var n=t.filter((function(t){return t.recuperation===e.recuperation&&t.areaRequestId===e.areaRequestId}));if(0===n.length)return Ne.table("platformCache").add(e);var r=n[0];Ne.table("platformCache").update(r.id,e)}))})(e).then((function(e){o({type:"@base/updateRootProp",payload:{prop:"platformDeliverySync",value:!0}})})).catch((function(e){o({type:"@base/updateRootProp",payload:{prop:"platformDeliverySync",value:!1}})}))})),o({type:"@base/replacePlatform",payload:t}),m(Object(u.a)({},h))}})).finally((function(){d(!1)}))},O=function(t){o({type:"@base/updateRootProp",payload:{prop:"platformSelected",value:t}}),r.push({pathname:"".concat(e.match.url,"/platform/").concat(t.holeId),state:t})},x=function(e){m(Object(u.a)(Object(u.a)({},h),{},{cancelProps:{visible:!1},okProps:{text:"Aceptar"},size:"large",active:!0,holeid:e,url:"".concat(On).concat(e),onCancel:function(){m(Object(u.a)(Object(u.a)({},h),{},{active:!1}))},onSubmit:function(){m(Object(u.a)(Object(u.a)({},h),{},{active:!1}))}}))};return nt((function(){g()}),300,[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Se.a,{active:l}),Object(w.jsx)(se.a,Object(u.a)(Object(u.a)({href:n},h),{},{children:Object(w.jsx)("div",{className:"pd-14",children:Object(w.jsx)(Ht,{url:h.url,id:h.holeid})})})),Object(w.jsxs)(mt.d,{children:[Object(w.jsx)(mt.b,{path:"".concat(e.match.path,"/platform/:holeid"),render:function(e){return Object(w.jsx)(hn,Object(u.a)({},e))}}),Object(w.jsx)(mt.b,{path:"".concat(e.match.path),render:function(e){return Object(w.jsx)(yn,Object(u.a)(Object(u.a)({},e),{},{data:p,onClick:O,onDownload:x}))}})]})]})};function yn(e){var t=e.data,n=e.onClick,r=e.onDownload;return Object(w.jsxs)(w.Fragment,{children:[t&&t.length>0&&Object(w.jsx)(Ge,{icon:Object(w.jsx)(p.DillFilled,{style:{transform:"rotateZ(45deg)"}}),text:"Pozos propuestos"}),Object(w.jsx)("div",{className:"flex flex-vgap-14 flex-1 flex-column",children:t&&t.length>0?null===t||void 0===t?void 0:t.map((function(e){var t={current:0,total:0};return e.platformSignatures.forEach((function(e){var n=e.responsibles;t.total+=n.length,t.current+=n.filter((function(e){return e.signed})).length})),Object(w.jsx)(Cn,{state:e.state,documentName:e.documentName,currentSignatures:t.current,totalSignature:t.total,holeid:e.holeId,onClick:function(){return n&&n(e)},onClickDocument:r},e.holeId)})):Object(w.jsx)("div",{className:"flex flex-middle flex-1",children:Object(w.jsx)($,{icon:function(e){return Object(w.jsx)(Lt,Object(u.a)({},e))},primaryText:"Descarga de datos",secondaryText:"Debido a las limitaciones de acceso a internet, debe descargar los datos de los sondajes antes de dirigirse a una zona sin cobertura.",buttonProps:{text:"Descargar datos"},onClick:r})})})]})}function Cn(e){var t=e.onClick,n=e.holeid,r=e.currentSignatures,a=void 0===r?0:r,o=e.totalSignature,i=void 0===o?2:o,c=e.documentName,s=e.onClickDocument,l=a<i?m.colors.red:m.colors.skyblue;return Object(w.jsxs)(ke.Section,{onClick:t,style:{fontSize:"1rem",cursor:"pointer"},className:"platform-card translation-y-hover",children:[Object(w.jsx)(ke.SectionHeader,{left:Object(w.jsxs)("div",{style:{},children:[Object(w.jsx)("div",{style:{display:"inline-block"},children:Object(w.jsx)(p.ProbingTone,{style:{fontSize:26,verticalAlign:"middle"}})}),Object(w.jsx)("span",{style:{marginLeft:10},children:n})]})}),Object(w.jsx)(ke.SectionHeader,{left:Object(w.jsxs)("div",{children:[Object(w.jsxs)("span",{style:{color:l},children:[Object(w.jsx)("span",{children:a}),"/",Object(w.jsx)("span",{children:i})," necesarias"]}),Object(w.jsx)(de,{}),Object(w.jsx)(Oe,{as:"span",onClick:function(e){"Sin documento"!==c&&s&&s(n),e.stopPropagation()},style:{opacity:"Sin documento"!==c?1:.5},children:c})]}),right:Object(w.jsx)(Bt.a,{colorTranslucence:l,style:{color:l},children:a<i?"Faltan firmas":"Autorizada"})})]})}var wn=n(327),Rn=(n(1057),["children","colorTranslucence"]);var Sn,kn,En=function(e){var t=e.children,n=e.colorTranslucence,r=Object(S.a)(e,Rn);return Object(w.jsx)(Bt.a,Object(u.a)(Object(u.a)({size:"small",rounded:!0,colorTranslucence:n},r),{},{children:t}))},Nn=(n(1058),n(210),wn.a.Panel),Fn=F.default.span(Sn||(Sn=Object(k.a)(["\n\tcolor: ",";\n"])),(function(e){return e.theme.fontColor})),An=Object.freeze({1:{text:"creada",step:"Solicitud de \xe1rea",bgColor:m.colors.skyblue,fontColor:m.colors.skyblue,opacity:1},2:{text:"aprobada",step:"Solicitud de \xe1rea",bgColor:m.colors.skyblue,fontColor:m.colors.skyblue,opacity:1},3:{text:"Faltan firmas",step:"Solicitud de \xe1rea",bgColor:m.colors.red,fontColor:m.colors.red,opacity:1},4:{text:"creada",step:"Extensi\xf3n de solicitud",bgColor:m.colors.skyblue,fontColor:m.colors.skyblue,opacity:1},5:{text:"aprobada",step:"Extensi\xf3n de solicitud",bgColor:m.colors.skyblue,fontColor:m.colors.skyblue,opacity:1},6:{text:"Faltan firmas",step:"Extensi\xf3n de solicitud",bgColor:m.colors.red,fontColor:m.colors.red,opacity:1},7:{text:"creada",step:"Devoluci\xf3n de \xe1rea",bgColor:m.colors.skyblue,fontColor:m.colors.skyblue,opacity:1},8:{text:"\xc1rea devuelta",step:"Devoluci\xf3n de \xe1rea",bgColor:"",fontColor:"",opacity:.6},9:{text:"Faltan firmas",step:"Devoluci\xf3n de \xe1rea",bgColor:m.colors.red,fontColor:m.colors.red,opacity:1}}),Dn="DD/MM/YYYY";var Pn=function(e){var t=Object(we.c)((function(e){return e.baseReducer.offline})),n=Object(we.c)((function(e){return e.baseReducer})),r=Object(a.useState)(!1),o=Object(b.a)(r,2),i=o[0],c=o[1],s=Object(we.b)(),u=Object(mt.g)(),j=Object(a.useState)(null),f=Object(b.a)(j,2),h=f[0],m=f[1],g=Object(a.useState)(""),O=Object(b.a)(g,2),x=O[0],v=O[1],y=Object(we.c)((function(e){return e.baseReducer.areaRequests})),C=function(){var e=Object(d.a)(l.a.mark((function e(){var n,r,a=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>0&&void 0!==a[0]?a[0]:"",c(!0),!t){e.next=5;break}return Ae().then((function(e){s(e),console.log(e);var t=[];e.payload.forEach(function(){var e=Object(d.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.push(n.createAt),e.next=3,Pe(n);case 3:r=e.sent,s(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m(t)})).finally((function(){c(!1)})),e.abrupt("return");case 5:De().then((function(e){s(e)})),r=[],Ke.get("RequestArea/getByHole?hole=".concat(n)).then((function(e){if(e.data&&e.data.length>0){var t=xt(e.data,"requestCreateAt");Object.keys(t).map((function(e){return r.push(e),{createAt:e,areaRequest:t[e]}})).reverse().forEach(function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe(t);case 2:n=e.sent,s(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}})).finally((function(){c(!1)})),m(r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return nt((function(){C(x)}),300,[x]),Object(w.jsxs)(ga,{className:"request-page ",showHelp:!0,onChangeTheme:e.onChangeTheme,light:e.light,children:[Object(w.jsx)(Se.a,{active:i}),Object(w.jsx)(Ye,{style:{padding:"19px 0"},children:"Solicitudes de \xe1rea"}),Object(w.jsxs)("div",{className:"flex flex-gap-10",children:[Object(w.jsx)("div",{className:"flex-1",children:Object(w.jsx)(tt.a,{prefix:Object(w.jsx)(p.SearchOutlined,{}),size:"large",placeholder:"Escriba alg\xfan par\xe1metro para filtrar...",onChange:v})}),Object(w.jsx)("div",{children:Object(w.jsx)(N.a,{type:"green",size:"large",onClick:function(){u.push("/new-request-area")},children:"Nueva Solicitud"})})]}),Object(w.jsx)("div",{className:"request-cards-container",style:{marginTop:10},children:y&&!i&&Object(w.jsx)(wn.a,{collapsible:"header",expandIconPosition:"right",activeKey:h,onChange:m,ghost:!0,children:y.map((function(e){var t=e.createAt,n=e.areaRequest;return Object(w.jsx)(Nn,{header:t,children:null===n||void 0===n?void 0:n.map((function(e){var t=e.recommendedWells.map((function(e){return Object(w.jsxs)(En,{children:[Object(w.jsx)(Fn,{children:e.recommendation}),",",Object(w.jsxs)(Oe,{as:"span",style:{marginLeft:4},children:["Prioridad: ",e.details.Prioridad_Perforacio]})]},e.recommendation)}));return Object(w.jsx)(qn,{id:e.requestId,beginDate:e.dateAuthorization.from,endDate:e.dateAuthorization.to,state:e.cardState,sector:e.sector,holes:t,rgoName:e.rgoName,rgoExists:e.rgoExists,signatureProps:{total:e.totalSignature,signed:e.totalSigned},onClick:function(){return function(e){u.push("/request-area-view/".concat(e.requestId))}(e)}},e.requestId)}))},t)}))})}),n.areaRequests&&0===n.areaRequests.length&&Object(w.jsx)("div",{className:"flex flex-column flex-1 flex-middle",children:Object(w.jsx)($,{secondaryText:"Para crear una solicitud de \xe1rea presione el bot\xf3n \u201cNueva Solicitud\u201d"})})]})};function qn(e){var t=e.id,n=e.beginDate,r=void 0===n?Dn:n,a=e.endDate,o=void 0===a?Dn:a,i=e.holes,c=e.state,s=e.sector,l=e.rgoName,d=e.rgoExists,u=e.signatureProps,b=e.onClick,j=An[c],f=j.text,h=j.step,m=j.bgColor,g=j.fontColor,O=j.opacity;return Object(w.jsxs)(ke.Section,{className:"request-card translation-y-hover",onClick:b,style:{opacity:O},children:[Object(w.jsx)(ke.SectionHeader,{className:"request-card-header",left:Object(w.jsxs)("div",{style:{},children:[Object(w.jsx)("div",{style:{display:"inline-block"},children:Object(w.jsx)(p.LocationTone,{style:{fontSize:26,verticalAlign:"middle"}})}),Object(w.jsx)("span",{style:{marginLeft:10},children:s})]}),right:Object(w.jsxs)(Oe,{as:"span",children:[r," a ",o]})}),Object(w.jsx)("div",{className:"pd-14 flex flex-gap-10",children:i}),Object(w.jsx)(ke.SectionHeader,{className:"request-card-footer",left:Object(w.jsxs)("div",{children:[Object(w.jsx)(Oe,{as:"span",children:h}),Object(w.jsx)(de,{}),Object(w.jsxs)("label",{style:{color:g,fontWeight:"bold"},children:[u.signed,"/",u.total," firmas"]}),Object(w.jsx)(de,{}),d&&Object(w.jsx)(In,{children:Object(w.jsx)(Oe,{as:"a",href:"".concat("http://smig.spence.outlier.cl/drillingWorkflow/api/","Rgo/download/").concat(t),target:"_blank",rel:"noreferred",style:{textDecoration:"underline"},onClick:function(e){e.stopPropagation()},children:l})}),!d&&Object(w.jsx)(Oe,{as:"span",style:{opacity:.5},children:l})]}),right:Object(w.jsx)(En,{colorTranslucence:m,style:{textTransform:"capitalize",color:g},children:f})})]})}var zn,In=Object(F.default)(Oe)(kn||(kn=Object(k.a)(["\n\tdisplay: inline-block;\n\t&:hover {\n\t\tfont-weight: 600;\n\t}\n"]))),Tn=n(119),Mn=n.n(Tn),Bn=n(177),Ln=n.n(Bn),Hn=F.default.div(zn||(zn=Object(k.a)([""])));var _n=function(e){var t=e.children,n=e.isError,r=e.message;return Object(w.jsx)(Hn,{className:"wp-field ".concat(n?"error":""),"data-msg":r,style:{border:n?"1px solid #ff6060":"none"},children:t})};var Wn=n(36),Vn=n.n(Wn),Gn="DD/MM/YYYY",Yn={requestId:-1,areas:["Mina","Drilling"],requiredRgo:!0,modalConfig:{},sector:void 0,description:null,requestNote:null,file:void 0,recommendedWells:[{recommendation:null,north:null,east:null,elevation:null}],activities:[{activityName:null,responsible:null,from:Vn()().format(Gn),to:Vn()().format(Gn),observation:""}],dateAuthorization:{from:Vn()().format(Gn),to:Vn()().add(1,"days").format(Gn)},signatures:[{area:"Mina",responsibles:[{personaName:"",signature:null,position:0,signed:!1}]},{area:"Drilling",responsibles:[{personaName:"",signature:null,position:0,signed:!1}]}],rgo:{},platforms:[]};var Un=n(1071);File.prototype.blobFileStruct=function(){var e=this.name,t=Object(Un.a)(),n=new File([this],"".concat(t,".").concat(/(?:\.([^.]+))?$/.exec(this.name)[1]),{type:this.type});return{file:n,oldName:e,publicPath:"/public/".concat(n.name)}};var Qn,Jn=["mode"],Kn="DD/MM/YYYY",Zn="".concat("http://smig.spence.outlier.cl/drillingWorkflow/api/","RequestArea/getImage/"),$n="".concat("http://smig.spence.outlier.cl/drillingWorkflow/api/","RequestArea/getDocument/"),Xn=F.default.div(Qn||(Qn=Object(k.a)(["\n\t.rounded-tag-large {\n\t\theight: 40px !important;\n\t}\n"]))),er=o.a.forwardRef((function(e,t){var n,r,o,i,c,s=e.mode,j=void 0===s?"edit":s,f=Object(S.a)(e,Jn),h=Object(a.useRef)(),m=Object(a.useRef)(),g=Object(a.useRef)(),O=Object(a.useRef)(),x=(Object(a.useRef)(),Object(a.useState)(!1)),v=Object(b.a)(x,2),y=(v[0],v[1]),C=Object(a.useState)(null),R=Object(b.a)(C,2),k=R[0],E=R[1],F=Object(a.useState)(null),A=Object(b.a)(F,2),D=A[0],P=A[1],q=Object(a.useState)(null),z=Object(b.a)(q,2),I=z[0],T=z[1],M=Object(we.c)((function(e){return e.requestFormReducer})),B=Object(we.b)(),L=function(e,t,n){m.current.getBase64Data((function(r){B({type:"@requestForm/updateSignatureProps",payload:{areaIndex:e,responsibleIndex:t,prop:n,value:r}})})),B({type:"@requestForm/updateSignatureProps",payload:{areaIndex:e,responsibleIndex:t,prop:"signed",value:!0}}),h.current.close()},H=function(e,t){B({type:"@requestForm/updateRootProp",payload:{prop:e,value:t}})},_=function(e,t){B({type:"@requestForm/updateDateAuthorization",payload:{prop:e,value:t}}),Vn()(M.dateAuthorization.from,Kn)>Vn()(M.dateAuthorization.to,Kn)&&B({type:"@requestForm/updateDateAuthorization",payload:{prop:"to",value:Vn()(M.dateAuthorization.from,Kn).add(1,"days").format(Kn)}})},W=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.files[0].blobFileStruct(),yt(r=n.file,{w:640,h:480},"dataURL",(function(e){T(e)})),B({type:"@requestForm/updateRootProp",payload:{prop:"file",value:r}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e){Ke.get("RequestArea/getById?arearequestid=".concat(e)).then((function(e){var t;e.data&&(B({type:"@requestForm/updateAllData",payload:e.data}),(t=e.data,Ne.table("areaRequest").clear().then((function(e){return Ne.table("areaRequest").add(t).then((function(e){return{type:"@base/addRequest",payload:t}}))}))).then((function(e){B(e)})))}))};Object(a.useEffect)((function(){var e,t;(null===(e=M.areas)||void 0===e?void 0:e.length)>0&&((null===(t=M.signatures)||void 0===t?void 0:t.length)!==M.areas.length&&B({type:"@requestForm/updateLogisticsArea",payload:M.areas}))}),[M.areas,M.signatures]),Object(a.useEffect)((function(){Ke.get("Area").then((function(e){if(e.data&&e.data.length>0){var t=[];e.data.forEach((function(e){var n=Object.values(e)[0],r=Object.keys(e)[0];t.push({value:n,label:n,key:r})})),E(t)}})).catch((function(e){return console.debug(e)}))}),[]),Object(a.useEffect)((function(){if("edit"!==j)B({type:"@requestForm/updateAllData",payload:Yn}),H("requestState",rn.CREATED);else{var e=f.match.params.id;V(e)}!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Ke.get("Sector/getAll?sector=".concat(e)).then((function(e){if(e.data&&e.data.length>0){var t=e.data.map((function(e){return{label:e,value:e}}));P(Object.values(t))}})).catch((function(e){return console.debug(e)}))}()}),[]);return t&&(t.current={state:M,getState:function(){var e={};(!M.areas||0===M.areas.length)&&(e.areas="Requerido"),(!M.description||""===M.description.trim())&&(e.description="Requerido"),(!M.sector||0===M.sector.length)&&(e.sector="Requerido"),!M.file&&"edit"!==j&&(e.file="Requerido");var t=[];M.recommendedWells&&M.recommendedWells.forEach((function(n,r){""===n.recommendation.trim()&&(e["well-".concat(r)]="Requerido"),t.includes(n.recommendation.trim())&&(e["well-".concat(r)]="Pozo repetido."),t.push(n.recommendation.trim())})),M.activities&&M.activities.forEach((function(t,n){!t.activityName&&(e["activity-".concat(n)]="Requerido"),!t.responsible&&(e["activity-responsible-".concat(n)]="Requerido")})),"edit"===j&&!M.signatures&&M.signatures.forEach((function(e){})),B({type:"@requestForm/updateRootProp",payload:{prop:"errors",value:e}});var n=!!Object.keys(e).length;return{data:M,containError:n,errors:e}}}),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(se.a,Object(u.a)(Object(u.a)({ref:h,size:"large",title:"Autorizaci\xf3n y Firma - Planificaci\xf3n corto plazo"},M.modalConfig),{},{children:Object(w.jsxs)("div",{className:"pd-14 ",children:[Object(w.jsx)("div",{className:"signature-draw-container",children:Object(w.jsx)(Kt,Object(u.a)(Object(u.a)({ref:m},Jt),{},{identifier:null===(n=M.modalConfig)||void 0===n?void 0:n.identifier,canvasWidth:"100%",canvasHeight:"80vh"}))}),Object(w.jsx)(Oe,{style:{marginTop:20},children:"La firma realizada en este recuadro, ser\xe1 utilizada \xfanicamente en este documento, y no ser\xe1 guardada o manipulada fuera de este."})]})})),Object(w.jsx)(se.a,{ref:g,size:"large",cancelProps:{text:"Cerrar"},okProps:{visible:!1},children:Object(w.jsx)("div",{className:"pd-14",children:Object(w.jsx)("img",{src:"".concat(Zn).concat(M.requestId),style:{height:"100%",width:"100%"},alt:""})})}),M.requestId&&"edit"===j&&Object(w.jsx)(se.a,{ref:O,cancelProps:{text:"Cerrar"},size:"large",okProps:{visible:!1},children:Object(w.jsx)(Ht,{url:"".concat($n).concat(M.requestId),id:M.requestId})}),Object(w.jsxs)(w.Fragment,{children:["edit"===j&&Object(w.jsx)(N.a,{prefix:Object(w.jsx)(p.PdfTone,{}),onClick:function(){O.current.open()},style:{width:150},children:"Ver Solicitud"}),Object(w.jsxs)("div",{className:"request-container",children:[Object(w.jsx)(Ge,{icon:Object(w.jsx)(p.DetailsOutlined,{}),text:"Detalles"}),Object(w.jsxs)("div",{className:"flex-vgap-20",children:[Object(w.jsxs)("div",{className:"flex flex-gap-14",children:[Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"Fecha inicial"}),Object(w.jsx)(Mn.a,{disabled:"edit"===j,size:"large",disabledDate:function(e){return e&&e<=Vn()().subtract(1,"days").endOf("day")},value:(null===(r=M.dateAuthorization)||void 0===r?void 0:r.from)?Vn()(null===(o=M.dateAuthorization)||void 0===o?void 0:o.from,Kn):Vn()(Kn),placeholder:Kn,format:Kn,onChange:function(e){return e&&_("from",e.format(Kn))}})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"Fecha final"}),Object(w.jsx)(Mn.a,{disabled:"edit"===j,size:"large",disabledDate:function(e){var t;return e&&e<=Vn()(null===(t=M.dateAuthorization)||void 0===t?void 0:t.from,Kn).endOf("day")},value:Vn()(null===(i=M.dateAuthorization)||void 0===i?void 0:i.to,Kn)||Vn()(Kn),placeholder:Kn,format:Kn,onChange:function(e){return e&&_("to",e.format(Kn))}})]})]}),Object(w.jsxs)(Xn,{children:[Object(w.jsx)(ht,{children:"\xc1reas log\xedsticas."}),Object(w.jsx)(pt.a,{isError:M.errors&&M.errors.areas,message:"Requerido",disabled:"edit"===j,mode:"tags",size:"large",maxTagCount:0,value:M.areas,options:k||[],fieldStyle:{width:374},onChange:function(e){return function(e){B({type:"@requestForm/updateLogisticsArea",payload:e})}(e)}})]}),Object(w.jsxs)("div",{className:"tags-non-resize",children:[Object(w.jsx)(ht,{children:"\xc1rea f\xedsica (a solicitar)"}),Object(w.jsx)(pt.a,{isError:M.errors&&M.errors.sector,message:"Requerido",mode:"tags",onSearch:function(){},maxTagCount:0,disabled:"edit"===j,fieldStyle:{width:374},size:"large",options:D,value:void 0!==M.sector?[M.sector]:void 0,placeholder:"Escriba \xe1rea a solicitar",onChange:function(e){M.errors&&e.length>0&&delete M.errors.sector,H("sector",e.length>0?e[e.length-1]:void 0)}})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"\xbfRequiere R-GO?"}),Object(w.jsx)(ft.a,{disabled:"edit"===j,index:M.requiredRgo?0:1,size:"large",onChange:function(e,t){return H("requiredRgo",0===t)}})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"Descripci\xf3n"}),Object(w.jsx)(et.TextArea,{isError:M.errors&&M.errors.description,message:"Requerido",value:M.description,disabled:"edit"===j,size:"large",placeholder:"Escriba una descripci\xf3n para la solicitud",style:{width:720},onChange:function(e){M.errors&&delete M.errors.description,H("description",e)}})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"Notas"}),Object(w.jsx)(et.TextArea,{disabled:"edit"===j,size:"large",placeholder:"Escriba una nota (Opcional)",style:{width:720},onChange:function(e){return H("requestNote",e)}})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"Fotograf\xeda o Plano de \xe1rea solicitada"}),"edit"!==j&&Object(w.jsxs)(_n,{isError:M.errors&&M.errors.file,message:"Requerido",children:[!M.file&&Object(w.jsx)(Ln.a,{disabled:"edit"===j,multiple:!0,accept:".png, .jpg, .jpge",icon:Object(w.jsx)(p.ImageOutlined,{style:{fontSize:40}}),onChange:function(e){M.errors&&delete M.errors.file,W(e)}}),M.file&&Object(w.jsxs)(ke.Section,{className:"flex flex-middle",style:{height:380,position:"relative"},children:[Object(w.jsx)(p.TrashcanFilled,{style:{position:"absolute",right:14,top:14,cursor:"pointer"},onClick:function(){return B({type:"@requestForm/updateRootProp",payload:{prop:"file",value:null}})}}),Object(w.jsx)("img",{src:I,style:{height:380},alt:""})]})]}),"new"!==j&&Object(w.jsx)(ke.Section,{className:"image-preview",style:{height:380},children:Object(w.jsx)("div",{className:"flex flex-middle",style:{height:"100%",cursor:"pointer"},onClick:function(){g.current.open()},children:Object(w.jsx)("img",{src:"".concat(Zn).concat(M.requestId),loading:"lazy",style:{height:"100%"},alt:""})})})]}),Object(w.jsx)(nr,{mode:j,state:M,dispatch:B,setLoading:y}),Object(w.jsx)(rr,{mode:j,areaOptions:k,state:M,dispatch:B}),Object(w.jsx)("div",{children:Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Ge,{icon:Object(w.jsx)(Gt,{}),text:"Firmas Responsables"}),null===(c=M.signatures)||void 0===c?void 0:c.map((function(e,t){var n;return Object(w.jsxs)(ke.Section,{style:{marginBottom:20},children:[Object(w.jsx)(ke.SectionHeader,{left:e.area}),Object(w.jsxs)("div",{className:"pd-14",children:[null===e||void 0===e||null===(n=e.responsibles)||void 0===n?void 0:n.map((function(n,r){return Object(w.jsxs)(ke.Section,{type:"inner",style:{marginBottom:14},children:[Object(w.jsx)(ke.SectionHeader,{left:"Firma ".concat(r+1),right:(null===e||void 0===e?void 0:e.responsibles.length)>1&&"edit"!==j&&Object(w.jsx)("div",{className:"section-trashcan-container",onClick:function(){return function(e,t){B({type:"@requestForm/removeSignature",payload:{areaIndex:e,responsibleIndex:t}})}(t,r)},children:Object(w.jsx)(p.TrashcanFilled,{})})}),Object(w.jsxs)("div",{className:"pd-14 signature-section",children:[Object(w.jsx)(ht,{children:"Nombres"}),Object(w.jsx)(tt.a,{disabled:"edit"===j,size:"large",value:null===n||void 0===n?void 0:n.personaName,style:{maxWidth:560,marginBottom:20},placeholder:"Escriba nombres y apellidos",onChange:function(e){return function(e,t,n,r){B({type:"@requestForm/updateSignatureProps",payload:{areaIndex:e,responsibleIndex:t,prop:n,value:r}})}(t,r,"personaName",e)}}),"new"!==j&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(ht,{children:"Firma"}),Object(w.jsx)(en,{disabled:n.signed,signed:n.signed,onClick:function(){return function(e,t,n){B({type:"@requestForm/setModalConfig",payload:{title:"Firma",onSubmit:function(){return L(e,t,n)}}}),h.current.open()}(t,r,"signature")}})]})]})]},r)})),"new"===j&&Object(w.jsx)(N.a,{type:"green",size:"large",onClick:function(){var e;B({type:"@requestForm/addSignature",payload:{areaIndex:e=t,position:M.signatures[e].responsibles.length}})},children:"A\xf1adir integrante"})]})]},e.area)}))]})})]})]})]})]})}));function tr(e,t,n){return{type:"@requestForm/updateRecommendedWells",payload:{prop:e,value:t,index:n}}}function nr(e){var t,n=e.mode,r=e.state,o=e.dispatch,i=e.setLoading,c=Object(we.c)((function(e){return e.baseReducer.offline})),s=Object(a.useState)(null),l=Object(b.a)(s,2),d=l[0],j=l[1],f=Object(a.useState)(""),h=Object(b.a)(f,2),m=h[0],g=h[1],O=function(e,t,n,r){var a=d.find((function(e){return e.value===t}));o(tr(e,t,n)),o(tr("east",a.Este_Propuesto,n)),o(tr("north",a.Norte_Propuesto,n)),o(tr("elevation",a.Elev_Propuesto,n)),o(tr("campana",a.campana,n))};return nt((function(){c||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";i(!0),Ke.get("HoleLocation/getProposedWell?holeid=".concat(e)).then((function(e){if(e.data&&e.data.length>0){var t=e.data.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{label:e.Nombre_Propuesto,value:e.Nombre_Propuesto})}));j(Object(Ot.a)(t))}})).catch((function(e){return console.debug(e)})).finally((function(){i(!1)}))}(m)}),300,[m]),Object(w.jsxs)(ke.Section,{children:[Object(w.jsx)(ke.SectionHeader,{left:"Recomendaciones a perforar"}),Object(w.jsxs)("div",{className:"pd-14 txt-left",children:[null===r||void 0===r||null===(t=r.recommendedWells)||void 0===t?void 0:t.map((function(e,t){return Object(w.jsxs)(ke.Section,{type:"inner",style:{marginBottom:20},children:[Object(w.jsx)(ke.SectionHeader,{left:"Pozo recomentado ".concat(t+1),right:(null===r||void 0===r?void 0:r.recommendedWells.length)>1&&"edit"!==n&&Object(w.jsx)(p.TrashcanFilled,{onClick:function(){o({type:"@requestForm/removeWell",payload:{index:t}})}})}),Object(w.jsxs)("div",{className:"pd-14",children:[Object(w.jsxs)("div",{className:"inline-fields",style:{width:440,marginTop:10},children:[Object(w.jsx)(ht,{children:"Pozo propuesto"}),Object(w.jsx)(pt.a,{disabled:"edit"===n,isError:r.errors&&r.errors["well-".concat(t)],message:(null===r||void 0===r?void 0:r.errors)&&(null===r||void 0===r?void 0:r.errors["well-".concat(t)]),size:"large",options:d,value:e.recommendation,placeholder:"Seleccione pozo propuesto",onChange:function(e,n){r.errors&&delete r.errors["well-".concat(t)],O("recommendation",e,t)},onSearch:g})]}),Object(w.jsxs)("div",{className:"inline-fields",style:{width:180,marginTop:10},children:[Object(w.jsx)(ht,{children:"Campa\xf1a"}),Object(w.jsx)(et.InputNumber,{value:null===e||void 0===e?void 0:e.campana,disabled:!0,size:"large",onChange:function(e){return O("campana",e,t)}})]}),Object(w.jsxs)("div",{className:"inline-fields",style:{width:180,marginTop:10},children:[Object(w.jsx)(ht,{children:"Norte"}),Object(w.jsx)(et.InputNumber,{value:null===e||void 0===e?void 0:e.north,disabled:!0,size:"large",onChange:function(e){return O("north",e,t)}})]}),Object(w.jsxs)("div",{className:"inline-fields",style:{width:180,marginTop:10},children:[Object(w.jsx)(ht,{children:"Este"}),Object(w.jsx)(et.InputNumber,{disabled:!0,value:null===e||void 0===e?void 0:e.east,size:"large",onChange:function(e){return O("east",e,t)}})]}),Object(w.jsxs)("div",{className:"inline-fields",style:{width:180,marginTop:10},children:[Object(w.jsx)(ht,{children:"Elevaci\xf3n"}),Object(w.jsx)(et.InputNumber,{disabled:!0,value:null===e||void 0===e?void 0:e.elevation,size:"large",onChange:function(e){return O("elevation",e,t)}})]})]})]},t)})),"edit"!==n&&Object(w.jsx)(N.a,{type:"green",size:"large",onClick:function(){o({type:"@requestForm/setWell",payload:{recommendation:"",north:"",east:"",elevation:""}})},children:"A\xf1adir recomendaci\xf3n"})]})]})}function rr(e){var t,n=e.mode,r=e.areaOptions,o=e.state,i=e.dispatch,c=Object(a.useState)(null),s=Object(b.a)(c,2),l=s[0],d=s[1],u=function(e,t,n){i({type:"@requestForm/updateActivity",payload:{prop:e,value:t,index:n}})},j=function(e){};return Object(a.useEffect)((function(){return Ke.get("Activity").then((function(e){if(e.data&&e.data.length>0){var t=[];e.data.forEach((function(e){var n=Object.values(e)[0];t.push({value:n,label:n})})),d(t)}})).catch((function(e){return console.debug(e)})),function(){return!1}}),[]),Object(w.jsxs)(ke.Section,{children:[Object(w.jsx)(ke.SectionHeader,{left:"Actividades a realizar en \xe1rea recibida"}),Object(w.jsxs)("div",{className:"pd-14 txt-left",children:[null===o||void 0===o||null===(t=o.activities)||void 0===t?void 0:t.map((function(e,t){var a;return Object(w.jsxs)(ke.Section,{type:"inner",style:{marginBottom:20},children:[Object(w.jsx)(ke.SectionHeader,{left:"Actividad ".concat(t+1),right:(null===o||void 0===o?void 0:o.activities.length)>1&&"edit"!==n&&Object(w.jsx)(p.TrashcanFilled,{onClick:function(){i({type:"@requestForm/removeActivity",payload:{index:t}})}})}),Object(w.jsxs)("div",{className:"pd-14",children:[Object(w.jsxs)("div",{className:"inline-fields",style:{width:440,marginTop:10},children:[Object(w.jsx)(ht,{children:"Actividad"}),Object(w.jsx)(pt.a,{disabledTags:!0,mode:"tags",size:"large",isError:o.errors&&o.errors["activity-".concat(t)],message:"Requerido",disabled:"edit"===n,placeholder:"Seleccione una actividad",value:e.activityName?[e.activityName]:void 0,options:l,onSearch:j,onChange:function(e,n){o.errors&&delete o.errors["activity-".concat(t)],u("activityName",e.length>0?e[e.length-1]:void 0,t)}})]}),Object(w.jsxs)("div",{className:"inline-fields",style:{width:180,marginTop:10},children:[Object(w.jsx)(ht,{children:"Responsable"}),Object(w.jsx)(pt.a,{size:"large",isError:o.errors&&o.errors["activity-responsible-".concat(t)],message:"Requerido",disabled:"edit"===n,placeholder:"Seleccione un responsable",options:r||[],value:null!==(a=e.responsible)&&void 0!==a?a:null,fieldStyle:{width:180},onChange:function(e,n){o.errors&&delete o.errors["activity-responsible-".concat(t)],u("responsible",n.label,t)}})]}),Object(w.jsxs)("div",{className:"inline-fields",style:{width:180,marginTop:10},children:[Object(w.jsx)(ht,{children:"Fecha inicial"}),Object(w.jsx)(Mn.a,{disabled:"edit"===n,size:"large",disabledDate:function(t){var n=Vn()(e.from,Kn)&&t<Vn()(o.dateAuthorization.from,Kn).subtract(1,"days").endOf("day"),r=Vn()(e.to,Kn)&&t>Vn()(o.dateAuthorization.to,Kn);return n||r},value:Vn()(e.from,Kn),placeholder:Kn,format:Kn,onChange:function(e){return e&&u("from",e.format(Kn),t)}})]}),Object(w.jsxs)("div",{className:"inline-fields",style:{width:180,marginTop:10},children:[Object(w.jsx)(ht,{children:"Fecha final"}),Object(w.jsx)(Mn.a,{disabled:"edit"===n,size:"large",disabledDate:function(t){var n=Vn()(e.from,Kn)&&t<Vn()(o.dateAuthorization.from,Kn).subtract(1,"days").endOf("day"),r=Vn()(e.to,Kn)&&t>Vn()(o.dateAuthorization.to,Kn);return n||r},value:e.to?Vn()(e.to,Kn):null,placeholder:Kn,format:Kn,onChange:function(e){return u("to",e?e.format(Kn):null,t)}})]}),Object(w.jsxs)("div",{className:"inline-fields",style:{width:348,marginTop:10},children:[Object(w.jsx)(ht,{children:"Observaci\xf3n "}),Object(w.jsx)(tt.a,{disabled:"edit"===n,size:"large",value:e.observation,placeholder:"Escriba un comentario",onChange:function(e){return u("observation",e,t)}})]})]})]},t)})),"edit"!==n&&Object(w.jsx)(N.a,{type:"green",size:"large",onClick:function(){i({type:"@requestForm/setActivities",payload:{activityName:null,responsible:null,from:Vn()().format(Kn),to:Vn()().format(Kn),observation:""}})},children:"A\xf1adir actividad"})]})]})}var ar=function(e){var t=Object(a.useRef)(),n=Object(a.useRef)(),r=Object(a.useRef)(),o=Object(mt.g)(),i=Object(a.useState)({}),c=Object(b.a)(i,2),s=c[0],j=c[1],f=function(){var e=Object(d.a)(l.a.mark((function e(){var a,i,c,s,u,b,p,j,f,h,m,g;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.current,i=a.active,c=a.setActive,s=t.current.getState(),u=s.data,b=s.containError,n.current.close(),!b){e.next=6;break}return c(!1),e.abrupt("return");case 6:return c(!i),delete(p=re.a.cloneDeep(u)).file,e.next=11,Ke.post("requestArea/SaveRequest",p);case 11:j=e.sent,f=j.data,h=f.state,m=f.id,!0===h&&((g=new FormData).append("files[]",u.file),Ke.post("requestArea/saveImage/".concat(m),g,{processData:!1,headers:{"Content-Type":"multipart/form-data"}}).then(function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ke.post("requestArea/saveDocument/".concat(m),p).then((function(e){e.data&&(c(!i),o.push("/request-area-view/".concat(m)))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Se.a,{size:400,ref:r}),Object(w.jsx)(se.a,Object(u.a)(Object(u.a)({ref:n,size:"small"},s),{},{onSubmit:f,children:Object(w.jsx)("div",{className:"pd-14",children:s.content})})),Object(w.jsxs)(ga,{className:"request-page ",onChangeTheme:e.onChangeTheme,light:e.light,children:[Object(w.jsx)(Ve,{className:"sticky top0",left:Object(w.jsx)(or,{}),right:Object(w.jsx)(ir,{onRemove:function(){n.current.open(),j({title:"Confirmaci\xf3n",content:'Al presionar "Aceptar" se borrar\xe1 la solicitud.',okProps:{text:"Aceptar"},onSubmit:function(){return o.push("/request-area")}})},onSave:function(){n.current.open(),j({title:"Confirmaci\xf3n",okProps:{text:"Crear"},content:'Al hacer clic en "Crear", la informaci\xf3n ya no se podr\xe1 modificar.',onSubmit:function(){return f()}})}})}),Object(w.jsxs)(Wt.a,{children:[Object(w.jsx)(p.InfoFilled,{style:{marginRight:8,fontSize:"0.875rem"}}),"Solo puede firmar el documento luego de guardar los cambios con la informaci\xf3n requerida."]}),Object(w.jsx)(er,{ref:t,mode:"new"})]})]})};function or(e){var t=e.stockName,n=void 0===t?"":t;return Object(w.jsxs)("div",{className:"header-left flex-gap-14",style:{padding:"21px 0"},children:[Object(w.jsx)(p.LocationTone,{}),Object(w.jsxs)("div",{children:[Object(w.jsx)("h1",{children:"Nueva solicitud"}),Object(w.jsx)("span",{children:n})]})]})}function ir(e){var t=e.onRemove,n=e.onSave,r=e.allSignatures;return Object(w.jsxs)("div",{className:"header-right flex flex-middle",children:[Object(w.jsx)(N.a,{onClick:t,children:"Cancelar"}),!r&&Object(w.jsx)(N.a,{type:"green",prefix:Object(w.jsx)(Vt,{style:{fontSize:10}}),style:{marginLeft:14},onClick:n,children:"Crear solicitud"}),r&&Object(w.jsx)(N.a,{prefix:Object(w.jsx)(p.CheckOutlined,{style:{fontSize:10}}),style:{marginLeft:14},type:"primary",onClick:function(){return n("FINISH")},children:"Finalizar aprobaci\xf3n"})]})}var cr={modalConfig:{},returnObservation:null,withoutSignature:!1,file:void 0,returnSignatures:[{area:"Devoluci\xf3n",responsibles:[{personaName:null,signed:!1,position:0,signature:null}]},{area:"Recibe conforme",responsibles:[{personaName:null,signed:!1,position:0,signature:null}]}],requestReturnId:-1,returnImage:null};var sr=function(e){var t=e.url,n=e.wrap,r=void 0!==n&&n;return Object(w.jsx)("img",{src:t,style:{height:"100%",width:r&&"100%"},alt:""})},lr=function(e,t){var n={};return e.withoutSignature?{data:e,containError:!1,errors:n}:((!e.returnObservation||""===e.returnObservation.trim())&&(n.returnObservation="Observaci\xf3n es requerido"),e.returnSignatures&&e.returnSignatures.forEach((function(e){e.responsibles.forEach((function(t,r){(!t.personaName||""===t.personaName.trim())&&(n["personaName-".concat(e.area,"-").concat(r)]="Nombre es Requerido")}))})),!e.returnImage&&"edit"!==t&&(n.returnImage="Requerido"),{data:e,containError:!!Object.keys(n).length,errors:n})},dr=["mode","initial"],ur="".concat("http://smig.spence.outlier.cl/drillingWorkflow/api/","RequestReturn/getImage/"),br="".concat("http://smig.spence.outlier.cl/drillingWorkflow/api/","RequestReturn/getDocument/"),pr=o.a.forwardRef((function(e,t){var n,r,o=e.mode,i=void 0===o?"edit":o,c=(e.initial,Object(S.a)(e,dr).match.params.id),s=Object(a.useRef)(),b=Object(a.useRef)(),j=Object(a.useRef)(),h=Object(a.useRef)(),m=Object(we.c)((function(e){return e.requestReturnFormReducer})),g=Object(we.b)(),O=function(e,t,n){j.current.getBase64Data(null,(function(r){g({type:"@returnForm/updateSignatureProps",payload:{areaIndex:e,responsibleIndex:t,prop:n,value:r}})})),g({type:"@returnForm/updateSignatureProps",payload:{areaIndex:e,responsibleIndex:t,prop:"signed",value:!0}}),s.current.close()},x=function(e,t){g({type:"@returnForm/updateRootProp",payload:{prop:e,value:t}})},v=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.files[0].blobFileStruct(),yt(n.file,{w:640,h:480},"dataURL",(function(e){g({type:"@returnForm/updateRootProp",payload:{prop:"returnImage",value:e}}),x("imageLoading",!1)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){x("requestId",c)}),[]),t&&(t.current={getState:function(){var e=lr(m,i);return g({type:"@returnForm/updateRootProp",payload:{prop:"errors",value:e.errors}}),e}}),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(se.a,Object(u.a)(Object(u.a)({ref:s,size:"large",title:"Autorizaci\xf3n y Firma - Planificaci\xf3n corto plazo"},m.modalConfig),{},{children:Object(w.jsxs)("div",{className:"pd-14 ",children:[Object(w.jsx)("div",{className:"signature-draw-container",children:Object(w.jsx)(Kt,Object(u.a)(Object(u.a)({ref:j},Jt),{},{identifier:null===(n=m.modalConfig)||void 0===n?void 0:n.identifier,canvasWidth:"100%",canvasHeight:"80vh"}))}),Object(w.jsx)(Oe,{style:{marginTop:20},children:"La firma realizada en este recuadro, ser\xe1 utilizada \xfanicamente en este documento, y no ser\xe1 guardada o manipulada fuera de este."})]})})),Object(w.jsx)(se.a,{ref:b,size:"large",cancelProps:{text:"Cerrar"},okProps:{visible:!1},children:Object(w.jsx)("div",{className:"pd-14",style:{height:"85vh"},children:Object(w.jsx)(sr,{url:"".concat(ur).concat(m.requestReturnId),wrap:!0})})}),m.requestReturnId&&"edit"===i&&Object(w.jsx)(se.a,{ref:h,cancelProps:{text:"Cerrar"},size:"large",okProps:{visible:!1},children:Object(w.jsx)(Ht,{url:"".concat(br).concat(m.requestReturnId),children:" "})}),"edit"===i&&Object(w.jsx)(N.a,{prefix:Object(w.jsx)(p.PdfTone,{}),onClick:function(){h.current.open()},children:"Ver devoluci\xf3n"}),Object(w.jsx)(Ge,{icon:Object(w.jsx)(p.DetailsOutlined,{}),text:"Detalles"}),Object(w.jsxs)("div",{className:"flex-vgap-20",children:[Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)(ht,{children:"Devoluci\xf3n sin firmas"}),Object(w.jsx)(f.a,{trigger:"hover",content:'Si se selecciona "Si", se crea una solicitud de devoluci\xf3n de \xe1rea sin requerir firmas.',children:Object(w.jsx)(p.InfoFilled,{style:{marginLeft:10,lineHeight:"1.375rem",cursor:"pointer"}})})]}),Object(w.jsx)(ft.a,{disabled:"edit"===i,index:m.withoutSignature?0:1,onChange:function(e){!function(e,t){x(e,t),!0===t?(x("returnObservation","Devoluci\xf3n sin firmas"),x("errors",{})):x("returnObservation","")}("withoutSignature","si"===e.content.toLowerCase())}})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"Observaciones"}),Object(w.jsx)(et.TextArea,{size:"large",disabled:"edit"===i||m.withoutSignature,isError:m.errors&&m.errors.returnObservation,message:m.errors&&m.errors.returnObservation,value:m.returnObservation,placeholder:"Escriba una observaci\xf3n",onChange:function(e){m.errors&&delete m.errors.returnObservation,x("returnObservation",e)},style:{width:720}})]}),Object(w.jsxs)("div",{className:"request-page",children:[Object(w.jsx)(ht,{children:"Fotograf\xeda o Plano de \xe1rea solicitada"}),"edit"!==i&&Object(w.jsxs)(_n,{isError:m.errors&&m.errors.returnImage,message:m.errors&&m.errors.returnImage,children:[!m.returnImage&&Object(w.jsx)(Ln.a,{disabled:"edit"===i,multiple:!0,accept:".png, .jpg, .jpge",text:m.imageLoading?"Cargando...":"Subir Archivo",icon:Object(w.jsx)(p.ImageOutlined,{style:{fontSize:40}}),onChange:function(e){m.errors&&delete m.errors.returnImage,x("imageLoading",!0),v(e)}}),m.returnImage&&Object(w.jsxs)(ke.Section,{className:"flex flex-middle",style:{height:380,position:"relative"},children:[Object(w.jsx)(p.TrashcanFilled,{style:{position:"absolute",right:14,top:14,cursor:"pointer"},onClick:function(){x("imageLoading",!1),g({type:"@returnForm/updateRootProp",payload:{prop:"returnImage",value:null}})}}),Object(w.jsx)("img",{src:m.returnImage,style:{height:380},alt:""})]})]}),"new"!==i&&Object(w.jsx)(ke.Section,{className:"image-preview",style:{height:380},children:Object(w.jsx)("div",{className:"flex flex-middle",style:{height:"100%",cursor:m.returnImageExists&&"pointer"},onClick:function(){return m.returnImageExists&&void b.current.open()},children:Object(w.jsx)(sr,{url:"".concat(ur).concat(m.requestReturnId)})})})]}),null===(r=m.returnSignatures)||void 0===r?void 0:r.map((function(e,t){var n;return Object(w.jsxs)(ke.Section,{style:{marginBottom:20},children:[Object(w.jsx)(ke.SectionHeader,{left:"Firma ".concat(e.area)}),Object(w.jsxs)("div",{className:"pd-14",children:[null===(n=e.responsibles)||void 0===n?void 0:n.map((function(n,r){return Object(w.jsxs)(ke.Section,{type:"inner",style:{marginBottom:14},children:[Object(w.jsx)(ke.SectionHeader,{left:"Firma ".concat(r+1),right:e.responsibles.length>1&&"edit"!==i&&Object(w.jsx)("div",{className:"section-trashcan-container",onClick:function(){return function(e,t){g({type:"@returnForm/removeSignature",payload:{areaIndex:e,responsibleIndex:t}})}(t,r)},children:Object(w.jsx)(p.TrashcanFilled,{})})}),Object(w.jsxs)("div",{className:"pd-14 signature-section",children:[Object(w.jsx)(ht,{children:"Nombres"}),Object(w.jsx)(tt.a,{size:"large",disabled:"edit"===i||m.withoutSignature,isError:m.errors&&m.errors["personaName-".concat(e.area,"-").concat(r)],message:m.errors&&m.errors["personaName-".concat(e.area,"-").concat(r)],value:n.personaName,style:{maxWidth:560,marginBottom:20},placeholder:m.withoutSignature?"Nombre no requerido":"Escriba nombres y apellidos",onChange:function(n){m.errors&&delete m.errors["personaName-".concat(e.area,"-").concat(r)],function(e,t,n,r){g({type:"@returnForm/updateSignatureProps",payload:{areaIndex:e,responsibleIndex:t,prop:n,value:r}})}(t,r,"personaName",n)}}),Object(w.jsx)(ht,{children:"Firma"}),Object(w.jsx)(en,{disabled:n.signed||m.withoutSignature,signed:n.signed||m.withoutSignature,signedText:m.withoutSignature?"Firma no requerida":Zt,onClick:function(){return function(e,t,n){g({type:"@returnForm/setModalConfig",payload:{title:"Firma",onSubmit:function(){return O(e,t,n)}}}),s.current.open()}(t,r,"signature")}})]})]},r)})),"new"===i&&!m.withoutSignature&&Object(w.jsx)(N.a,{type:"green",size:"large",onClick:function(){return function(e){g({type:"@returnForm/addSignature",payload:{areaIndex:e,position:m.returnSignatures[e].responsibles.length}})}(t)},children:"A\xf1adir integrante"})]})]},t)}))]})]})})),jr={modalConfig:{},loading:!1,sector:"",startDate:null};function fr(e,t){switch(t.type){case"setModalConfig":return e.modalConfig?Object(u.a)(Object(u.a)({},e),{},{modalConfig:Object(u.a)(Object(u.a)({},e.modalConfig),t.payload)}):Object(u.a)(Object(u.a)({},e),{},{modalConfig:Object(u.a)({},t.payload)});case"updateRootProp":var n=t.payload,r=n.prop,a=n.value;return e[r]=a,Object(u.a)({},e);default:return e}}var hr=function(e){var t,n=e.match.params.id,r=Object(a.useRef)(),o=Object(a.useRef)(),i=Object(a.useRef)(),c=Object(mt.g)(),s=Object(a.useReducer)(fr,jr),j=Object(b.a)(s,2),f=j[0],h=j[1],m=Object(we.b)(),g=function(e,t){h({type:"updateRootProp",payload:{prop:e,value:t}})},O=function(e){switch(i.current.open(),e){case"save":return void h({type:"setModalConfig",payload:{title:"Crear solicitud de devoluci\xf3n",content:"Realmente desea crear la solicitud de devoluci\xf3n.",size:"small",okProps:{text:"Crear"},onSubmit:function(){return x()}}});case"cancel":return void h({type:"setModalConfig",payload:{title:"Cancelar solicitud de devoluci\xf3n",content:'Al presionar en "Aceptar" se descartar\xe1 la solicitud de devoluci\xf3n',size:"small",okProps:{text:"Aceptar",type:"danger"},onSubmit:function(){c.goBack()}}});default:return}},x=function(){var e=Object(d.a)(l.a.mark((function e(){var t,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.current.getState(),a=t.data,o=t.containError,i.current.close(),g("loading",!0),!o){e.next=6;break}return g("loading",!1),e.abrupt("return");case 6:a.returnState=rn.CREATED,a.withoutSignature&&(a.returnState=rn.APPROVED),Ke.post("RequestReturn/saveReturn",a).then(function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.data&&!0===t.data.state&&c.push("/request-area-view/".concat(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=Object(a.useCallback)((function(){Ke.get("RequestArea/getById?arearequestid=".concat(n,"&showExtension=false&showReturn=false")).then((function(e){var t=e.data;g("requestId",t.requestId),g("sector",t.sector)}))}),[n]);return Object(a.useEffect)((function(){v(),g("returnState",rn.CREATED),m({type:"@returnForm/updateAll",payload:cr})}),[v,m]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Se.a,{ref:o,active:f.loading}),Object(w.jsx)(se.a,Object(u.a)(Object(u.a)({ref:i},f.modalConfig),{},{children:Object(w.jsx)("div",{className:"pd-14 ",children:null===(t=f.modalConfig)||void 0===t?void 0:t.content})})),Object(w.jsxs)(ga,{cleanInner:!0,className:"return-area-page",children:[Object(w.jsx)(Ve,{className:"sticky top0",left:Object(w.jsx)(mr,{name:f.sector}),right:Object(w.jsx)(gr,{onCancel:function(){return O("cancel")},onSubmit:function(){return O("save")}})}),Object(w.jsxs)(Wt.a,{children:[Object(w.jsx)(p.InfoFilled,{style:{marginRight:8,fontSize:"0.875rem"}}),"Solo puede firmar el documento luego de guardar los cambios con la informaci\xf3n requerida."]}),Object(w.jsx)(pr,Object(u.a)({ref:r,mode:"new"},e))]})]})};function mr(e){var t=e.name,n=void 0===t?"":t;return Object(w.jsxs)("div",{className:"header-left flex-gap-14",style:{padding:"21px 0"},children:[Object(w.jsx)(p.LocationTone,{}),Object(w.jsxs)("div",{children:[Object(w.jsx)("h1",{children:"Devoluci\xf3n de \xc1rea"}),Object(w.jsx)("span",{children:n})]})]})}function gr(e){var t=e.onCancel,n=e.onSubmit;return Object(w.jsxs)("div",{className:"header-right flex flex-middle",children:[Object(w.jsx)(N.a,{onClick:t,children:"Cancelar"}),Object(w.jsx)(N.a,{type:"green",prefix:Object(w.jsx)(Vt,{style:{fontSize:10}}),onClick:n,style:{marginLeft:14},children:"Guardar Cambios"})]})}var Or=n(187);var xr=function(e){return Object(w.jsxs)("svg",Object(u.a)(Object(u.a)({width:26,height:21,viewBox:"0 0 26 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:[Object(w.jsxs)("g",{clipPath:"url(#prefix__clip0)",fill:"currentColor",children:[Object(w.jsx)("path",{d:"M3.797 10.12v2.013l-.88-.424c-.218-.096-.425.156-.288.35l2.074 4.08c.07.1.203.13.308.07l2.041-2.288a.235.235 0 00-.021-.421l-.88-.383v-2.07a.588.588 0 00-.374-.548l-1.66-.598a.235.235 0 00-.32.22z"}),Object(w.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 5.222L10 .5 0 5.222v11.605L10 20.5l10-3.673V5.222zM.71 5.98l8.935 3.75v9.884L.71 16.333V5.98zm18.58 10.353l-8.935 3.281V9.73l8.934-3.75v10.353zm-4.317-9.31l3.801-1.595L10 1.284 6.641 2.87l8.332 4.153zM5.825 3.255l-4.6 2.173L10 9.11l4.11-1.726-8.285-4.13z"})]}),Object(w.jsx)("circle",{cx:20.5,cy:15,r:5.5,fill:"#FF6060"}),Object(w.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.06 15.91h-1.123l-.235-4.498h1.593l-.235 4.498zm-1.376 1.575c0-.258.069-.453.207-.585.138-.132.339-.198.603-.198.255 0 .452.067.591.202.14.136.21.329.21.58 0 .243-.07.434-.212.574-.141.14-.337.21-.59.21-.257 0-.456-.07-.598-.206-.14-.136-.211-.329-.211-.578z",fill:"#fff"}),Object(w.jsx)("defs",{children:Object(w.jsx)("clipPath",{id:"prefix__clip0",children:Object(w.jsx)("path",{fill:"#fff",transform:"translate(0 .5)",d:"M0 0h20v20H0z"})})})]}))};var vr=function(e){return Object(w.jsxs)("svg",Object(u.a)(Object(u.a)({width:26,height:21,viewBox:"0 0 26 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:[Object(w.jsxs)("g",{clipPath:"url(#prefix__clip0)",fill:"currentColor",children:[Object(w.jsx)("path",{d:"M3.797 10.12v2.013l-.88-.424c-.218-.096-.425.156-.288.35l2.074 4.08c.07.1.203.13.308.07l2.041-2.288a.235.235 0 00-.021-.421l-.88-.383v-2.07a.588.588 0 00-.374-.548l-1.66-.598a.235.235 0 00-.32.22z"}),Object(w.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 5.222L10 .5 0 5.222v11.605L10 20.5l10-3.673V5.222zM.71 5.98l8.935 3.75v9.884L.71 16.333V5.98zm18.58 10.353l-8.935 3.281V9.73l8.934-3.75v10.353zm-4.317-9.31l3.801-1.595L10 1.284 6.641 2.87l8.332 4.153zM5.825 3.255l-4.6 2.173L10 9.11l4.11-1.726-8.285-4.13z"})]}),Object(w.jsx)("circle",{cx:20.5,cy:15,r:5.5,fill:"#46BD8D"}),Object(w.jsx)("path",{d:"M22.69 13.327a.412.412 0 11.57.596l-3.165 3.025a.412.412 0 01-.57 0l-1.51-1.443a.413.413 0 01.57-.596l1.225 1.17 2.88-2.752z",fill:"#fff"}),Object(w.jsx)("defs",{children:Object(w.jsx)("clipPath",{id:"prefix__clip0",children:Object(w.jsx)("path",{fill:"#fff",transform:"translate(0 .5)",d:"M0 0h20v20H0z"})})})]}))};var yr=function(e){return Object(w.jsxs)("svg",Object(u.a)(Object(u.a)({width:"1em",height:"1em",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:[Object(w.jsx)("g",{clipPath:"url(#prefix__clip0)",fill:"currentColor",children:Object(w.jsx)("path",{d:"M10.376 1.443l-.536.536v1.07l1.07.536H12l.4-1.606-2.024-.536zM12.4 10.1l.217 2.204L14 13.3l2-2.083-1.576-2.185L12.4 10.1zM10.948 4.98l-.697.982.284 1.68 1.822.556.414-2.662-1.823-.556zM6.8.5H0v15.2a.8.8 0 00.8.8h11.6l-1.2-4.4-2.8-3.6L8 6.038l.4-2.461L6.8.5z"})}),Object(w.jsx)("defs",{children:Object(w.jsx)("clipPath",{id:"prefix__clip0",children:Object(w.jsx)("path",{fill:"#fff",transform:"translate(0 .5)",d:"M0 0h16v16H0z"})})})]}))},Cr=(n(1061),["mode"]),wr="".concat("http://smig.spence.outlier.cl/drillingWorkflow/api/","Rgo/getDocument/"),Rr="DD/MM/YYYY",Sr=function(e,t){return{type:"@rgo/updateRootProps",payload:{prop:e,value:t}}},kr=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{type:"@rgo/updateLoading",payload:e}},Er=o.a.forwardRef((function(e,t){e.mode;var n,r=Object(S.a)(e,Cr),o=Object(a.useRef)(),i=Object(a.useRef)(),c=Object(we.c)((function(e){return e.rgoReducer})),s=Object(we.b)(),b=(Object(mt.g)(),Object(we.c)((function(e){return e.baseReducer.offline}))),j=r.requestId,f=r.sector,h=function(e,t){s(Sr(e,t))},m=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0].blobFileStruct(),r=n.file,s(Sr("rgoFile",r)),e.t0=s,e.t1=Sr,e.next=6,vt(r);case 6:e.t2=e.sent,e.t3=(0,e.t1)("filePreview",e.t2),(0,e.t0)(e.t3);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e={};!c.sector&&""===c.sector.trim()&&(e.sector="Requerido"),h("errors",e);var t=!!Object.keys(e).length;return{data:c,containError:t,errors:e}},O=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a,i,c,d,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g(),n=t.data,a=t.containError,s(kr()),o.current.close(),!a){e.next=6;break}return s(kr(!1)),e.abrupt("return");case 6:return e.next=8,Ke.post("Rgo/saveRgo",n);case 8:if(i=e.sent,c=i.data,d=c.rgoId,!c.state||!n.rgoFile){e.next=18;break}return(u=new FormData).append("files[]",n.rgoFile),e.next=16,Ke.post("Rgo/saveDocument/".concat(d),u,{processData:!1,headers:{"Content-Type":"multipart/form-data"}});case 16:200===e.sent.status&&r.onComplete&&r.onComplete();case 18:s(kr(!1)),x();case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){Ke.get("Rgo/get/".concat(j)).then((function(e){if(e.data){var t=e.data;t.date=t.date?Vn()(t.date).format(Rr):Vn()(),s(function(e){return{type:"@rgo/addProps",payload:e}}(t))}204===e.status&&s(Sr("date",Vn()()))}))};Object(a.useEffect)((function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";b?s(kr(!1)):Ke.get("Sector/getAll?sector=".concat(e)).then((function(e){if(e.data&&e.data.length>0){var t=e.data.map((function(e){return{label:e,value:e}}));h("sectors",Object.values(t)),s(kr(!1))}})).catch((function(e){return console.debug(e)}))}(),h("sector",f),h("areaRequestId",j),x()}),[]);var v=c.state===rn.CREATED||c.state===rn.APPROVED;return t&&(t.current={state:c,getState:g}),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(se.a,Object(u.a)(Object(u.a)({ref:o},c.modalConfig),{},{children:Object(w.jsx)("div",{className:"pd-14",children:null===(n=c.modalConfig)||void 0===n?void 0:n.content})})),Object(w.jsx)(Se.a,{ref:i,active:c.loading}),Object(w.jsxs)("div",{className:"flex flex-column flex-vgap-20 rgo-container",children:[Object(w.jsx)(Ve,{left:Object(w.jsx)(Nr,{state:"error"}),right:Object(w.jsx)(Fr,{showSave:!v,onClick:function(e){switch(e){case"saveRgo":o.current.open(),s({type:"@rgo/updateModalConfig",payload:{title:"Guardar RGO",content:"Realmente quiere guardar el RGO ",size:"small",onSubmit:function(){return O()}}})}}})}),Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"Nombre"}),Object(w.jsx)(tt.a,{disabled:v,size:"large",placeholder:"Escriba nombre rgo",value:c.name,fieldStyle:{width:374},onChange:function(e){h("name",e)}})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"Restricci\xf3n"}),Object(w.jsx)(tt.a,{disabled:v,size:"large",placeholder:"Escriba restricci\xf3n",value:c.restriction,fieldStyle:{width:374},onChange:function(e){h("restriction",e)}})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"Sector"}),Object(w.jsx)(pt.a,{disabled:v,size:"large",placeholder:"Seleccione sector",value:null===c||void 0===c?void 0:c.sector,fieldStyle:{width:374},options:null===c||void 0===c?void 0:c.sectors,onChange:function(e,t){h("sector",e)}})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"Fecha"}),c.date&&Object(w.jsx)(Mn.a,{disabled:v,size:"large",placeholder:"Seleccione fecha de rgo",format:Rr,value:Vn.a.isMoment(Vn()(c.date))?Vn()(c.date,Rr):Vn()(),disabledDate:function(e){return e<Vn()().subtract(1,"days").endOf("day")},fieldStyle:{width:374},onChange:function(e){h("date",e?e.format(Rr):null)}})]}),Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:" flex flex-space trashcan",children:[Object(w.jsxs)(ht,{children:[" ",c.documentExists?"Rgo existente":"Subir Rgo"]}),c.filePreview&&Object(w.jsx)(p.TrashcanFilled,{onClick:function(){s(Sr("filePreview",void 0))}})]}),Object(w.jsxs)(_n,{isError:c.errors&&c.errors.file,message:"Requerido",children:[!v&&!c.filePreview&&Object(w.jsx)(Ln.a,{multiple:!0,accept:".pdf, .docx, .doc",icon:Object(w.jsx)(p.ReportFilled,{style:{fontSize:40}}),onChange:function(e){c.errors&&delete c.errors.file,m(e)}}),c.documentExists&&Object(w.jsx)(Ht,{url:"".concat(wr).concat(c.rgoId)}),c.filePreview&&Object(w.jsx)(Ht,{url:c.filePreview})]})]})]})]})}));function Nr(e){var t=e.state;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("p",{children:"RGO"}),Object(w.jsx)("span",{className:"".concat("success"===t?"success":"error")})]})}function Fr(e){var t=e.showSave,n=void 0===t||t,r=e.onClick;return Object(w.jsx)("div",{className:"flex flex-center",children:n&&Object(w.jsx)(N.a,{type:"green",prefix:Object(w.jsx)(Vt,{style:{width:14,height:14}}),onClick:function(){return r&&r("saveRgo")},children:"Guardar Cambios"})})}n(1062);var Ar,Dr=function(e){var t={};return(!e.dateExtensionAuthorization||""===e.dateExtensionAuthorization.from||void 0===e.dateExtensionAuthorization.from)&&(t.extensionFrom="Requerido"),(!e.dateExtensionAuthorization||""===e.dateExtensionAuthorization.to||void 0===e.dateExtensionAuthorization.to)&&(t.extensionTo="Requerido"),(!e.reasonExtension||""===e.reasonExtension.trim())&&(t.reasonExtension="Motivo es Requerido"),e.extensionSignatures&&e.extensionSignatures.forEach((function(e){e.responsibles.forEach((function(n,r){(!n.personaName||""===n.personaName.trim())&&(t["personaName-".concat(e.area,"-").concat(r)]="Nombre es Requerido")}))})),{data:e,containError:!!Object.keys(t).length,errors:t}},Pr=["mode"],qr="DD/MM/YYYY",zr="".concat("http://smig.spence.outlier.cl/drillingWorkflow/api/","RequestExtension/getDocument/"),Ir=o.a.forwardRef((function(e,t){var n,r,o,i=e.mode,c=void 0===i?"edit":i,s=Object(S.a)(e,Pr),l=s.match.params.id,d=Object(a.useRef)(),b=Object(a.useRef)(),j=Object(a.useRef)(),f=Object(we.c)((function(e){return e.requestExtensionFormReducer})),h=Object(we.b)(),m=function(e,t,n){b.current.getBase64Data(null,(function(r){h({type:"@extensionForm/updateSignatureProps",payload:{areaIndex:e,responsibleIndex:t,prop:n,value:r}})})),h({type:"@extensionForm/updateSignatureProps",payload:{areaIndex:e,responsibleIndex:t,prop:"signed",value:!0}}),d.current.close()},g=function(e,t){h({type:"@extensionForm/updateRootProp",payload:{prop:e,value:t}})},O=function(e,t){h({type:"@extensionForm/updateDateExtensionAuthorization",payload:{prop:e,value:t}})};return Object(a.useEffect)((function(){var e,t;"new"===c&&h({type:"@extensionForm/clean"}),g("requestId",Number(l)),g("extensionState","creada"),O("from",(null===(e=f.dateExtensionAuthorization)||void 0===e?void 0:e.from)?Vn()(f.dateExtensionAuthorization.from,qr).format(qr):s.startDate&&Vn()(s.startDate,qr).format(qr)),O("to",(null===(t=f.dateExtensionAuthorization)||void 0===t?void 0:t.to)?Vn()(f.dateExtensionAuthorization.to,qr).format(qr):s.startDate&&Vn()(s.startDate,qr).add(1,"days").format(qr))}),[]),t&&(t.current={getState:function(){var e=Dr(f);return h({type:"@extensionForm/updateRootProp",payload:{prop:"errors",value:e.errors}}),e}}),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(se.a,Object(u.a)(Object(u.a)({ref:j,cancelProps:{text:"Cerrar"},size:"large"},f.modalConfig),{},{children:f.requestExtensionId&&"edit"===c&&Object(w.jsx)(Ht,{url:"".concat(zr).concat(f.requestExtensionId)})})),Object(w.jsx)(se.a,Object(u.a)(Object(u.a)({ref:d,size:"large"},f.modalConfig),{},{children:Object(w.jsxs)("div",{className:"pd-14 ",children:[Object(w.jsx)("div",{className:"signature-draw-container",children:Object(w.jsx)(Kt,Object(u.a)(Object(u.a)({ref:b},Jt),{},{canvasWidth:"100%",canvasHeight:"80vh"}))}),Object(w.jsx)(Oe,{style:{marginTop:20},children:"La firma realizada en este recuadro, ser\xe1 utilizada \xfanicamente en este documento, y no ser\xe1 guardada o manipulada fuera de este."})]})})),"edit"===c&&Object(w.jsx)(N.a,{prefix:Object(w.jsx)(p.PdfTone,{}),onClick:function(){j.current.open(),h({type:"@extensionForm/setModalConfig",payload:{title:"Firma",okProps:{visible:!1}}})},children:"Ver Solicitud"}),Object(w.jsx)(Ge,{icon:Object(w.jsx)(p.DetailsOutlined,{}),text:"Detalles"}),Object(w.jsxs)("div",{className:"flex-vgap-20",children:[Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:"inline-fields",children:[Object(w.jsx)(ht,{children:"Fecha Inicial"}),Object(w.jsx)(Mn.a,{size:"large",disabled:"edit"===c,disabledDate:function(e){return e&&e<=Vn()(s.startDate,qr).subtract(1,"days").endOf("day")},value:(null===(n=f.dateExtensionAuthorization)||void 0===n?void 0:n.from)?Vn()(f.dateExtensionAuthorization.from,qr):s.startDate&&Vn()(s.startDate,qr),placeholder:qr,format:qr,onChange:function(e){return e&&O("from",e.format(qr))},style:{width:180}})]}),Object(w.jsxs)("div",{className:"inline-fields",children:[Object(w.jsx)(ht,{children:"Fecha Final"}),Object(w.jsx)(Mn.a,{size:"large",disabled:"edit"===c,disabledDate:function(e){return e&&e<=Vn()(s.startDate,qr).endOf("day")},value:(null===(r=f.dateExtensionAuthorization)||void 0===r?void 0:r.to)?Vn()(f.dateExtensionAuthorization.to,qr):s.startDate&&Vn()(s.startDate,qr).add(1,"days"),placeholder:qr,format:qr,onChange:function(e){return e&&O("to",e.format(qr))},style:{width:180}})]})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)(ht,{children:"Motivo de la extensi\xf3n"}),Object(w.jsx)(et.TextArea,{size:"large",disabled:"edit"===c,isError:f.errors&&f.errors.reasonExtension,message:f.errors&&f.errors.reasonExtension,value:f.reasonExtension,placeholder:"Escriba un motivo para la extensi\xf3n",style:{width:860},fieldStyle:{height:200},onChange:function(e){f.errors&&delete f.errors.reasonExtension,g("reasonExtension",e)}})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)(Ge,{icon:Object(w.jsx)(Gt,{}),text:"Firmas Responsables"}),null===(o=f.extensionSignatures)||void 0===o?void 0:o.map((function(e,t){var n;return Object(w.jsxs)(ke.Section,{style:{marginBottom:20},children:[Object(w.jsx)(ke.SectionHeader,{left:"Firma ".concat(e.area," extensi\xf3n")}),Object(w.jsxs)("div",{className:"pd-14",children:[null===(n=e.responsibles)||void 0===n?void 0:n.map((function(n,r){return Object(w.jsxs)(ke.Section,{type:"inner",style:{marginBottom:14},children:[Object(w.jsx)(ke.SectionHeader,{left:"Firma ".concat(r+1),right:e.responsibles.length>1&&"edit"!==c&&Object(w.jsx)("div",{className:"section-trashcan-container",onClick:function(){return function(e,t){h({type:"@extensionForm/removeSignature",payload:{areaIndex:e,responsibleIndex:t}})}(t,r)},children:Object(w.jsx)(p.TrashcanFilled,{})})}),Object(w.jsxs)("div",{className:"pd-14 signature-section",children:[Object(w.jsx)(ht,{children:"Nombres"}),Object(w.jsx)(tt.a,{size:"large",disabled:"edit"===c,isError:f.errors&&f.errors["personaName-".concat(e.area,"-").concat(r)],message:f.errors&&f.errors["personaName-".concat(e.area,"-").concat(r)],value:n.personaName,style:{maxWidth:560,marginBottom:20},placeholder:"Escriba nombres y apellidos",onChange:function(n){f.errors&&delete f.errors["personaName-".concat(e.area,"-").concat(r)],function(e,t,n,r){h({type:"@extensionForm/updateSignatureProps",payload:{areaIndex:e,responsibleIndex:t,prop:n,value:r}})}(t,r,"personaName",n)}}),Object(w.jsx)(ht,{children:"Firma"}),Object(w.jsx)(en,{disabled:n.signed,signed:n.signed,onClick:function(){return function(e,t,n){h({type:"@extensionForm/setModalConfig",payload:{title:"Firma",onSubmit:function(){return m(e,t,n)}}}),d.current.open()}(t,r,"signature")}})]})]},r)})),"new"===c&&Object(w.jsx)(N.a,{type:"green",size:"large",onClick:function(){return function(e){h({type:"@extensionForm/addSignature",payload:{areaIndex:e,position:f.extensionSignatures[e].responsibles.length}})}(t)},children:"A\xf1adir integrante"})]})]},t)}))]})]})]})})),Tr=Object(F.default)(Or.a)(Ar||(Ar=Object(k.a)(["\n\t&.ant-tabs {\n\t\tcolor: ",";\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t}\n\n\t&.ant-tabs > .ant-tabs-nav .ant-tabs-nav-wrap {\n\t\toverflow: inherit;\n\t}\n\n\t[data-tooltip]:after {\n\t\tcolor: ",";\n\t}\n\n\t.ant-tabs-content,\n\t.ant-tabs-content-holder,\n\t.ant-tabs-tabpane {\n\t\tdisplay: flex;\n\t\tflex: 1;\n\t\tflex-direction: column;\n\t}\n\n\t.ant-tabs-tab-btn {\n\t\tfont-style: normal;\n\t\tfont-weight: normal !important;\n\t\tfont-size: 1.125rem;\n\t\tline-height: 1.5625rem;\n\n\t\tsvg {\n\t\t\tvertical-align: middle;\n\t\t}\n\t}\n\n\t.ant-tabs-tab.ant-tabs-tab-active .ant-tabs-tab-btn,\n\t.ant-tabs-tab:hover,\n\t.ant-tabs-tab-btn:focus {\n\t\tcolor: ",";\n\t}\n\n\t.ant-tabs-tab.ant-tabs-tab-disabled,\n\t.ant-tabs-tab.ant-tabs-tab-disabled .ant-tabs-tab-btn:active {\n\t\tcolor: ",";\n\t\topacity: 0.5;\n\t\tcursor: default;\n\t}\n\n\t.ant-tabs-ink-bar {\n\t\tbackground: ",";\n\t}\n\n\t&.ant-tabs > .ant-tabs-nav .ant-tabs-nav-list {\n\t\tcolor: ",";\n\t}\n\n\t&.ant-tabs-top > .ant-tabs-nav::before,\n\t&.ant-tabs-bottom > .ant-tabs-nav::before,\n\t&.ant-tabs-top > div > .ant-tabs-nav::before,\n\t&.ant-tabs-bottom > div > .ant-tabs-nav::before {\n\t\tborder-bottom: 1px solid ",";\n\t}\n\n\t.ant-collapse-header {\n\t\t.separator {\n\t\t\t&::after {\n\t\t\t\tbackground-color: ",";\n\t\t\t}\n\t\t}\n\t}\n"])),(function(e){return e.theme.fontColor}),(function(e){return e.theme.fontColor}),m.colors.skyblue,(function(e){return e.theme.secondaryColor}),m.colors.skyblue,(function(e){return e.theme.secondaryColor}),(function(e){return e.theme.fieldBorder}),(function(e){return e.theme.fieldBorder})),Mr=["onChangeTheme","light","status"],Br={syncIcon:Object(w.jsx)(vr,{style:{marginLeft:10,fontSize:20,verticalAlign:"middle"}}),noSyncIcon:Object(w.jsx)(xr,{style:{marginLeft:10,fontSize:20,verticalAlign:"middle"}}),syncText:"Datos descargados.",noSyncText:"Antes de ir a una zona sin conexi\xf3n a internet, \ndescargue los datos de los  sondajes para completar esta secci\xf3n."},Lr=Object.freeze({1:{text:"creada",step:"Solicitud de \xe1rea",bgColor:m.colors.skyblue,fontColor:m.colors.skyblue,opacity:1},2:{text:"aprobada",step:"Solicitud de \xe1rea",bgColor:m.colors.skyblue,fontColor:m.colors.skyblue,opacity:1},3:{text:"Faltan firmas",step:"Solicitud de \xe1rea",bgColor:m.colors.red,fontColor:m.colors.red,opacity:1},4:{text:"creada",step:"Extensi\xf3n de solicitud",bgColor:m.colors.skyblue,fontColor:m.colors.skyblue,opacity:1},5:{text:"aprobada",step:"Extensi\xf3n de solicitud",bgColor:m.colors.skyblue,fontColor:m.colors.skyblue,opacity:1},6:{text:"Faltan firmas",step:"Extensi\xf3n de solicitud",bgColor:m.colors.red,fontColor:m.colors.red,opacity:1},7:{text:"creada",step:"Devoluci\xf3n de \xe1rea",bgColor:m.colors.skyblue,fontColor:m.colors.skyblue,opacity:1},8:{text:"\xc1rea devuelta",step:"Devoluci\xf3n de \xe1rea",bgColor:"",fontColor:"",opacity:.6},9:{text:"Faltan firmas",step:"Devoluci\xf3n de \xe1rea",bgColor:m.colors.red,fontColor:m.colors.red,opacity:1}}),Hr="".concat("http://smig.spence.outlier.cl/drillingWorkflow/api/","RequestArea/download/files/"),_r=Or.a.TabPane,Wr=wn.a.Panel;function Vr(e){var t=e.children;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("span",{className:"separator"}),Object(w.jsx)("span",{className:"content",children:t}),Object(w.jsx)("span",{className:"separator"})]})}var Gr=function(e){return{type:"@requestBase/updateModalConfig",payload:e}};var Yr=function(e){var t,n=e.onChangeTheme,r=e.light,o=e.status,i=(void 0===o&&an.EDITING,Object(S.a)(e,Mr)),c=i.match.params.id,s=Object(a.useRef)(),j=Object(a.useRef)(),f=Object(a.useRef)(),h=Object(a.useRef)(),m=Object(a.useRef)(),g=Object(a.useRef)(),O=Object(a.useState)(!1),x=Object(b.a)(O,2),v=x[0],y=x[1],C=Object(we.c)((function(e){return e.baseReducer})),R=Object(we.c)((function(e){return e.requestReducer})),k=Object(we.c)((function(e){return e.baseReducer.offline})),E=Object(we.b)(),N=Object(mt.g)(),F=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ke.get("\u200bRequestArea/getFiles/".concat(R.requestId),{responseType:"arraybuffer"}).then((function(e){if(e.data){var t=new Blob([e.data],{type:"application/pdf"}),n=document.createElement("a");n.href=window.URL.createObjectURL(t),n.download="Solicitud-preview",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=g.current.getState(),t=e.data,n=e.containError,r=0,a=0;s.current.close(),y(!0),n?y(!1):(r===a&&(t.returnState=rn.APPROVED),Ke.post("RequestReturn/saveReturn",t).then(function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.data&&!0===t.data.state&&N.go();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},D=function(){var e=m.current.getState(),t=e.data,n=e.containError,r={current:0,total:0};new FormData;s.current.close(),y(!0),n?y(!1):(t.extensionSignatures.forEach((function(e,t){r.total+=e.responsibles.length,r.current+=e.responsibles.filter((function(e){return e.signed})).length})),t.extensionState=rn.CREATED,r.current===r.total&&(t.extensionState=rn.APPROVED),Ke.post("RequestExtension/save",t).then(function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.data&&N.push("/request-area-view/".concat(R.requestId));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){y(!1)})))},P=function(){},q=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r,a,o,i,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.current.getState(),r=n.data,a=n.containError,o={current:0,total:0},i=new FormData,s.current.close(),y(!0),!a){e.next=8;break}return y(!1),e.abrupt("return");case 8:(c=re.a.cloneDeep(r)).signatures=c.signatures.map((function(e){return e.responsibles=e.responsibles.map((function(e){return delete e.signature,e})),e})),r.signatures.forEach((function(e,t){o.total+=e.responsibles.length,o.current+=e.responsibles.filter((function(e){return e.signed})).length,e.responsibles.forEach((function(n){var r=n.signature;i.append("file-".concat(e.area,"-").concat(t,"-").concat(n.position,"-").concat(n.personaName),r)}))})),o.current===o.total&&(c.requestState=rn.APPROVED),Ke.post("RequestArea/SaveRequest",c).then(function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.data&&Ke.post("RequestArea/updateSignature/".concat(R.requestId),i,{processData:!1,headers:{"Content-Type":"multipart/form-data"},responseType:"arraybuffer"}).then((function(e){N.go()}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=Object(a.useCallback)(function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(!0),!k){e.next=4;break}return y(!1),e.abrupt("return");case 4:return e.next=6,Ne.table("platformCache").toArray();case 6:return n=e.sent,e.next=9,Ne.table("hepCache").toArray();case 9:r=e.sent,Ke.get("RequestArea/getById?arearequestid=".concat(t)).then((function(e){if(e.data){var a=e.data,o=!0,i=!0;a.recommendedWells.forEach((function(e){o=n.length>0&&(o&&!!n.find((function(t){return t.recuperation===e.recommendation}))),i=r.length>0&&(i&&!!r.find((function(t){return t.Nombre_Propuesto===e.recommendation})))})),E({type:"@requestBase/updateAllData",payload:{platformDeliverySync:o,hepSync:i,state:a.requestState,requestId:t,nameRequest:a.sector,existsExtension:a.existsExtension,existsReturn:a.existsReturn,all:a,rgoExists:a.rgoExists,extensionState:a.extensionState,returnState:a.returnState,requiredRgo:a.requiredRgo,totalSigned:a.totalSigned,totalSignature:a.totalSignature,cardState:a.cardState,from:a.existsExtension?a.existsReturn?a.returnCreateAt:!a.existsExtension||a.existsReturn||a.extensionState!==rn.APPROVED&&!rn.CREATED?"":a.dateExtensionAuthorization.from:a.dateAuthorization.from,to:a.existsExtension?a.existsReturn?a.returnCreateAt:!a.existsExtension||a.existsReturn||a.extensionState!==rn.APPROVED&&!rn.CREATED?"":a.dateExtensionAuthorization.to:a.dateAuthorization.to}}),E({type:"@base/updateAll",payload:{platformDeliverySync:o,hepSync:i}}),E({type:"@extensionForm/updateAll",payload:a}),E({type:"@returnForm/updateAll",payload:a}),y(!1)}}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);Object(a.useEffect)((function(){return z(c),function(){return E({type:"@base/updateRootProp",payload:{prop:"tab",value:on.REQUEST}})}}),[c]);var I,T,M=R.state===rn.CREATED||R.extensionState===rn.CREATED||R.returnState===rn.CREATED||R.returnState===rn.APPROVED||R.tab===on.RGO||R.tab===on.HEP||R.tab===on.PLATFORM_DELIVERY||!R.rgoExists&&R.requiredRgo,B=R.state===rn.CREATED||R.existsExtension&&R.extensionState===rn.CREATED||R.returnState===rn.CREATED||R.returnState===rn.APPROVED||R.tab===on.RGO||R.tab===on.HEP||R.tab===on.PLATFORM_DELIVERY||!R.rgoExists&&R.requiredRgo,L=R.state===rn.CREATED||R.requiredRgo&&!R.rgoExists,H=R.state===rn.CREATED||R.requiredRgo&&!R.rgoExists,_=R.returnState===rn.CREATED||R.returnState===rn.APPROVED?"return":R.extensionState===rn.CREATED||R.extensionState===rn.APPROVED?"extension":"request";return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Se.a,{ref:j,active:v}),Object(w.jsx)(se.a,Object(u.a)(Object(u.a)({ref:s},null===R||void 0===R?void 0:R.modalConfig),{},{children:Object(w.jsx)("div",{className:"pd-14",children:(null===R||void 0===R||null===(t=R.modalConfig)||void 0===t?void 0:t.content)||null})})),Object(w.jsxs)(ga,{className:"request-page especial-collapse",cleanInner:!0,onChangeTheme:n,light:r,children:[R.state&&!v&&Object(w.jsx)(Ve,{className:"sticky top0",showSeparator:!1,left:Object(w.jsx)(Ur,Object(u.a)({},R)),right:Object(w.jsx)(Qr,{showDownload:R.state===rn.APPROVED,showNewExtension:!M,showNewReturn:!B,showSave:R.state===rn.CREATED&&R.totalSignature!==R.totalSigned,showExtensionSave:R.extensionState===rn.CREATED,showRemoveExtension:R.extensionState===rn.CREATED,showReturnSave:R.returnState===rn.CREATED,downloadPath:"".concat(Hr).concat(R.requestId),onClick:function(e){switch(e){case"saveRequest":s.current.open(),E(Gr({title:"Guardar Solicitud",content:"Realmente desea guardar la solicitud",size:"small",onSubmit:function(){return q(e)}}));break;case"approvedRequest":s.current.open(),E(Gr({title:"Aprobar Solicitud",content:"Realmente desea aprobar las solicitud.",size:"small",okProps:{text:"Aprobar"},type:"primary",onSubmit:function(){return q(e)}}));break;case"newExtension":N.push("/extension-request/".concat(R.requestId));break;case"newReturn":N.push("/return-request/".concat(R.requestId));break;case"download":F();break;case"saveExtension":s.current.open(),E(Gr({title:"Guardar Extensi\xf3n",content:"Realmente desea guardar la solicitud de extensi\xf3n.",size:"small",onSubmit:function(){return D()}}));break;case"removeExtension":s.current.open(),E(Gr({title:"Cancelar Extensi\xf3n",content:"Realmente desea cancelar la solicitud",size:"small",onSubmit:function(){return P()},okProps:{type:"danger",text:"Aceptar"}}));break;case"saveReturn":s.current.open(),E(Gr({title:"Guardar devoluci\xf3n",content:"Realmente desea guardar la solicitud de devoluci\xf3n de \xe1rea.",size:"small",onSubmit:function(){return A()}}))}}})}),!R.state&&Object(w.jsx)("div",{className:"flex flex-middle flex-1",children:Object(w.jsx)($,{})}),R.state&&!v&&R.state===rn.CREATED&&Object(w.jsx)(er,Object(u.a)({ref:f},i)),R.state&&!v&&R.state!==rn.CREATED&&Object(w.jsxs)(Tr,{activeKey:(I=on,T=C.tab,Object.keys(I).find((function(e){return I[e]===T}))),onChange:function(e){N.push(i.match.url),E({type:"@base/updateRootProp",payload:{prop:"tab",value:on[e]}})},children:[Object(w.jsx)(_r,{disabled:!1,tab:Object(w.jsxs)(Vr,{children:[Object(w.jsx)(p.ReportFilled,{}),Object(w.jsx)("span",{style:{marginLeft:10},children:"Detalle Solicitud"})]}),children:Object(w.jsxs)(wn.a,{accordion:!0,defaultActiveKey:[_],children:[Object(w.jsx)(Wr,{header:Object(w.jsxs)(Vr,{children:[Object(w.jsx)(p.LocationFilled,{}),Object(w.jsx)("span",{style:{marginLeft:10},children:"Solicitud de \xe1rea"})]}),children:Object(w.jsx)(er,Object(u.a)({ref:f},i))},"request"),R.existsExtension&&Object(w.jsx)(Wr,{header:Object(w.jsxs)(Vr,{children:[Object(w.jsx)(p.CalendarSimpleOutlined,{}),Object(w.jsx)("span",{style:{marginLeft:10},children:"Extensi\xf3n de solicitud"})]}),children:Object(w.jsx)(Ir,Object(u.a)({ref:m},i))},"extension"),R.existsReturn&&Object(w.jsx)(Wr,{header:Object(w.jsxs)(Vr,{children:[Object(w.jsx)(p.ExportFilled,{}),Object(w.jsx)("span",{style:{marginLeft:10},children:"Devolucion de \xe1rea"})]}),children:(null===R||void 0===R?void 0:R.all)&&Object(w.jsx)(pr,Object(u.a)(Object(u.a)({ref:g},i),{},{initial:null===R||void 0===R?void 0:R.all}))},"return")]})},"REQUEST"),Object(w.jsx)(_r,{disabled:R.state===rn.CREATED||!R.requiredRgo,tab:Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(yr,{})," ",Object(w.jsx)("span",{style:{marginLeft:10},children:"R-GO"})]}),children:c&&Object(w.jsx)(Er,{ref:h,requestId:c,sector:R.nameRequest,onComplete:function(){z(c)}})},"RGO"),Object(w.jsx)(_r,{style:{height:"max-content"},disabled:L,tab:Object(w.jsx)(Jr,{disabled:L,sync:C.hepSync,disabledText:"Para habilitar esta seccion debe agregar un RGO",title:"HEP"}),children:Object(w.jsx)(Tt,{areaRequestId:c})},"HEP"),Object(w.jsx)(_r,{disabled:H,tab:Object(w.jsx)(Jr,{disabled:H,sync:C.platformDeliverySync,disabledText:"Para habilitar esta seccion debe agregar un RGO",title:"Formulario Entrega"}),children:Object(w.jsx)(vn,Object(u.a)({requestId:c},i))},"PLATFORM_DELIVERY")]})]})]})};function Ur(e){var t,n=e.nameRequest,r=e.totalSigned,a=void 0===r?0:r,o=e.totalSignature,i=void 0===o?0:o,c=e.from,s=e.to,l=e.cardState,d=null!==(t=Lr[l])&&void 0!==t?t:{bgColor:"",fontColor:""},u=d.bgColor,b=d.fontColor,j=d.step;return Object(w.jsxs)("div",{className:"header-left",children:[Object(w.jsx)(p.LocationTone,{}),Object(w.jsxs)("div",{className:"header-left-text-container",children:[Object(w.jsxs)("div",{className:"header-left-principal-text",children:[Object(w.jsx)(Oe,{as:"span",children:n}),Object(w.jsx)(En,{size:"small",rounded:!0,colorTranslucence:u,style:{color:b},children:i-a!==0?"Faltan Firmas":"Firmado"})]}),Object(w.jsxs)("span",{className:"header-left-secondary-text",children:[Object(w.jsx)(Oe,{as:"span",children:j}),Object(w.jsx)(de,{}),Object(w.jsxs)("span",{style:{color:b,fontWeight:600},children:[a,"/",i," Firmas necesarias"]}),Object(w.jsx)(de,{}),Object(w.jsxs)(Oe,{as:"span",children:[c," a ",s]})]})]})]})}function Qr(e){var t=e.onRemove,n=e.showSave,r=e.onClick,a=e.showApproved,o=e.showDownload,i=e.showNewExtension,c=e.showExtensionSave,s=e.showRemoveExtension,l=e.showReturnSave,d=e.showNewReturn,u=e.downloadPath;return Object(w.jsxs)("div",{className:"flex flex-gap-10 flex-middle",children:[o&&Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("a",{className:"button green",href:u,target:"_blank",rel:"noreferrer",children:[Object(w.jsx)(p.ReportFilled,{style:{fontSize:10,marginRight:10}})," ",Object(w.jsx)("span",{style:{whiteSpace:"nowrap"},children:"Descargar Archivos"})]})}),t&&Object(w.jsx)(N.a,{onClick:t,style:{marginLeft:14},children:"Cancelar Solicitud"}),s&&Object(w.jsx)(N.a,{onClick:function(){return r("removeExtension")},style:{marginLeft:14},children:Object(w.jsx)("span",{style:{whiteSpace:"nowrap"},children:"Cancelar Extensi\xf3n"})}),n&&Object(w.jsx)(N.a,{type:"green",prefix:Object(w.jsx)(Vt,{style:{fontSize:10}}),onClick:function(){return r("saveRequest")},style:{marginLeft:14},children:Object(w.jsx)("span",{style:{whiteSpace:"nowrap"},children:"Guardar Cambios Solicitud"})}),c&&Object(w.jsx)(N.a,{type:"green",prefix:Object(w.jsx)(Vt,{style:{fontSize:10}}),onClick:function(){return r("saveExtension")},style:{marginLeft:14},children:Object(w.jsx)("span",{style:{whiteSpace:"nowrap"},children:"Guardar Cambios Extensi\xf3n"})}),l&&Object(w.jsx)(N.a,{type:"green",prefix:Object(w.jsx)(Vt,{style:{fontSize:10}}),onClick:function(){return r("saveReturn")},style:{marginLeft:14},children:Object(w.jsx)("span",{style:{whiteSpace:"nowrap"},children:"Guardar Cambios Devoluci\xf3n"})}),a&&Object(w.jsx)(N.a,{prefix:Object(w.jsx)(p.CheckOutlined,{style:{fontSize:10}}),onClick:function(){return r("approvedRequest")},type:"primary",style:{marginLeft:14},children:Object(w.jsx)("span",{style:{whiteSpace:"nowrap"},children:"Finalizar aprobaci\xf3n"})}),i&&Object(w.jsx)(N.a,{prefix:Object(w.jsx)(p.CalendarSimpleOutlined,{style:{fontSize:10}}),onClick:function(){return r("newExtension")},style:{marginLeft:14},children:Object(w.jsx)("span",{style:{whiteSpace:"nowrap"},children:"Solicitar Extensi\xf3n"})}),d&&Object(w.jsx)(N.a,{prefix:Object(w.jsx)(p.ExportFilled,{style:{fontSize:10}}),onClick:function(){return r("newReturn")},style:{marginLeft:14},children:Object(w.jsx)("span",{style:{whiteSpace:"nowrap"},children:"Devoluci\xf3n de \xe1rea"})})]})}function Jr(e){var t=e.disabled,n=e.sync,r=e.disabledText,a=e.title;return Object(w.jsxs)(w.Fragment,{children:[!t&&Object(w.jsx)("span",{style:{marginLeft:10},children:a}),t&&Object(w.jsx)(f.a,{trigger:"hover",content:Object(w.jsx)("span",{children:r}),children:a}),!t&&Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(f.a,{trigger:"hover",content:Object(w.jsx)("span",{children:n?Br.syncText:Br.noSyncText}),children:n?Br.syncIcon:Br.noSyncIcon})})]})}var Kr={modalConfig:{},loading:!1,sector:"",startDate:null};function Zr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@newExtension/setModalConfig":return e.modalConfig?Object(u.a)(Object(u.a)({},e),{},{modalConfig:Object(u.a)(Object(u.a)({},e.modalConfig),t.payload)}):Object(u.a)(Object(u.a)({},e),{},{modalConfig:Object(u.a)({},t.payload)});case"@newExtension/updateRootProp":var n=t.payload,r=n.prop,a=n.value;return e[r]=a,Object(u.a)({},e);default:return e}}var $r=function(e){var t,n=Object(a.useReducer)(Zr,Kr),r=Object(b.a)(n,2),o=r[0],i=r[1],c=e.match.params.id,s=Object(a.useRef)(),j=Object(a.useRef)(),f=Object(a.useRef)(),h=Object(mt.g)(),m=function(e,t){i({type:"@newExtension/updateRootProp",payload:{prop:e,value:t}})},g=function(e){switch(f.current.open(),e){case"save":return void i({type:"@newExtension/setModalConfig",payload:{title:"Crear solicitud de extensi\xf3n",content:"Realmente desea crear la solicitud de extensi\xf3n.",size:"small",okProps:{text:"Crear solicitud"},onSubmit:function(){return O()}}});case"cancel":return void i({type:"@newExtension/setModalConfig",payload:{title:"Cancelar solicitud de extensi\xf3n",content:'Al presionar en "Aceptar" se descartar\xe1 la solicitud de extensi\xf3n',size:"small",okProps:{text:"Aceptar",type:"danger"},onSubmit:function(){h.goBack()}}});default:return}},O=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.current.getState(),n=t.data,r=t.containError,a={current:0,total:0},f.current.close(),m("loading",!0),!r){e.next=7;break}return m("loading",!1),e.abrupt("return");case 7:n.extensionSignatures.forEach((function(e,t){a.total+=e.responsibles.length,a.current+=e.responsibles.filter((function(e){return e.signed})).length})),n.extensionState=rn.CREATED,a.current===a.total&&(n.extensionState=rn.APPROVED),m("loading",!1),Ke.post("RequestExtension/save",n).then(function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.data&&h.push("/request-area-view/".concat(c));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){m("loading",!1)}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=Object(a.useCallback)((function(){Ke.get("RequestArea/getById?arearequestid=".concat(c,"&showExtension=false&showReturn=false")).then((function(e){var t=e.data;m("requestId",c),m("sector",t.sector),m("startDate",t.dateAuthorization.to)}))}),[c]);return Object(a.useEffect)((function(){x()}),[x]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Se.a,{ref:j,active:o.loading}),Object(w.jsx)(se.a,Object(u.a)(Object(u.a)({ref:f},o.modalConfig),{},{children:Object(w.jsx)("div",{className:"pd-14 ",children:null===(t=o.modalConfig)||void 0===t?void 0:t.content})})),Object(w.jsxs)(ga,{cleanInner:!0,className:"extension-request-page",style:{padding:"0"},children:[Object(w.jsx)(Ve,{className:"sticky top0",left:Object(w.jsx)(Xr,{name:o.sector}),right:Object(w.jsx)(ea,{onCancel:function(){return g("cancel")},onSubmit:function(){return g("save")}})}),Object(w.jsxs)(Wt.a,{children:[Object(w.jsx)(p.InfoFilled,{style:{marginRight:8,fontSize:"0.875rem"}}),"Solo puede firmar el documento luego de guardar los cambios con la informaci\xf3n requerida."]}),o.startDate&&Object(w.jsx)(Ir,Object(u.a)({ref:s,mode:"new",startDate:Vn()(o.startDate,"DD/MM/YYYY")},e))]})]})};function Xr(e){var t=e.name,n=void 0===t?"":t;return Object(w.jsxs)("div",{className:"header-left flex-gap-14",style:{padding:"21px 0"},children:[Object(w.jsx)(p.LocationTone,{}),Object(w.jsxs)("div",{children:[Object(w.jsx)("h1",{children:"Extensi\xf3n de solicitud"}),Object(w.jsx)("span",{children:n})]})]})}function ea(e){var t=e.onCancel,n=e.onSubmit;return Object(w.jsxs)("div",{className:"header-right flex flex-middle",children:[Object(w.jsx)(N.a,{onClick:t,children:"Cancelar"}),Object(w.jsx)(N.a,{type:"green",prefix:Object(w.jsx)(Vt,{style:{fontSize:10}}),onClick:n,style:{marginLeft:14},children:"Guardar Cambios"})]})}var ta=n(1070),na=n(1069),ra=n(111),aa={currentAreaHoles:[],currentAreaRequest:{requestAreaId:-1,holes:[]},tab:on.REQUEST,platformDelivery:[],heps:[],hepSync:!1,loading:!0,platformDeliverySync:!1,platformSelected:{},installed:!1,areaRequests:[],areaRequest:{},offline:!1};var oa={modalConfig:{},loading:!1,sector:"",startDate:null};var ia={modalConfig:{},dateExtensionAuthorization:{from:null,to:null},reasonExtension:"",extensionSignatures:[{area:"Solicita",responsibles:[{personaName:null,signed:!1,position:0,signature:null}]},{area:"Autoriza",responsibles:[{personaName:null,signed:!1,position:0,signature:null}]}]};var ca={modalConfig:{},loading:!0,requestState:rn.CREATED,tab:0};var sa={name:"",restriction:"",sector:"",sectors:[],date:null,rgoFile:null,rgoId:-1,rgoName:"",errors:{},filePreview:null,modalConfig:{content:null},loading:!0,state:rn.NO_CREATED};var la=n(271),da=(n(1063),n(1064),function(e){var t=Vn()().toISOString();localStorage.setItem(e,t)});function ua(e,t){var n=Vn()(function(e){return localStorage.getItem(e)}(e)),r=Vn()().diff(n,"days");return console.log("lastPrompt",n,isNaN(r)||r>t),isNaN(r)||r>t}var ba=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,n=Object(a.useState)(ua(e,t)),r=Object(b.a)(n,2),o=r[0],i=r[1],c=function(){i(!1),da(e)};return[o,c]},pa=function(){var e=Object(a.useState)(),t=Object(b.a)(e,2),n=t[0],r=t[1],o=ba("webInstallPromptedAt"),i=Object(b.a)(o,2),c=i[0],s=i[1];window.addEventListener("beforeinstallprompt",(function(e){console.log(">>>>>>",e.platforms)})),Object(a.useEffect)((function(){console.log("userShouldBePromptedToInstall",c,"window",window);window.addEventListener("beforeinstallprompt",(function(e){console.log("beforeInstallPromptHandler",e),c&&r(e)}))}),[c]);return[n,function(){s(),r(null)},function(){n.prompt(),n.userChoice.then((function(e){"accepted"!==e.outcome&&s(),r(null)}))}]},ja=function(){var e=pa(),t=Object(b.a)(e,3),n=t[0],r=t[1],a=t[2];return console.log("webInstallPrompt",n),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h2",{children:"install"}),Object(w.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(w.jsx)("button",{color:"primary",onClick:a,children:"Install"}),Object(w.jsx)("button",{onClick:r,children:"Close"})]})]})},fa=Object(la.b)(Object(la.a)({baseReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aa,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"@base/updateHoles":var a=e.currentAreaRequest;return a.holes=r,Object(u.a)(Object(u.a)({},e),{},{currentAreaRequest:a});case"@base/updateCurrentAreaRequest":return Object(u.a)(Object(u.a)({},e),{},{currentAreaRequest:Object(u.a)(Object(u.a)({},e.currentAreaRequest),r)});case"@base/updateRootProp":var o=r.prop,i=r.value;return e[o]=i,Object(u.a)({},e);case"@base/addPlatform":return Object(u.a)(Object(u.a)({},e),{},{platformDelivery:[].concat(Object(Ot.a)(e.platformDelivery),Object(Ot.a)(r))});case"@base/replacePlatform":return Object(u.a)(Object(u.a)({},e),{},{platformDelivery:r});case"@base/replaceHep":return Object(u.a)(Object(u.a)({},e),{},{heps:r});case"@base/updatePlatform":var c=r.holeid,s=(r.arearequestid,r.prop),l=r.value,d=e.platformDelivery,b=d.find((function(e){return e.holeid===c}));return b[s]=l,Ne.baseReducer.add(Object(u.a)(Object(u.a)({},e),{},{platformDelivery:d})),Object(u.a)(Object(u.a)({},e),{},{platformDelivery:d});case"@base/cleanAreaRequests":return Object(u.a)(Object(u.a)({},e),{},{areaRequests:[]});case"@base/addAreaRequests":return Object(u.a)(Object(u.a)({},e),{},{areaRequests:[].concat(Object(Ot.a)(e.areaRequests),[r])});case"@base/replaceAreaRequests":return Object(u.a)(Object(u.a)({},e),{},{areaRequests:r});case"@base/addRequest":return Object(u.a)(Object(u.a)({},e),{},{areaRequest:r});case"@base/updatePlatformSelected":return Object(u.a)(Object(u.a)({},e),{},{platformSelected:r});case"@base/updateAll":return Object(u.a)(Object(u.a)({},e),r);default:return e}},newRequestReturnReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@newReturn/setModalConfig":return e.modalConfig?Object(u.a)(Object(u.a)({},e),{},{modalConfig:Object(u.a)(Object(u.a)({},e.modalConfig),t.payload)}):Object(u.a)(Object(u.a)({},e),{},{modalConfig:Object(u.a)({},t.payload)});case"@newReturn/updateRootProp":var n=t.payload,r=n.prop,a=n.value;return e[r]=a,Object(u.a)({},e);default:return e}},rgoReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@rgo/updateRootProps":var n=t.payload,r=n.prop,a=n.value;return e[r]=a,Object(u.a)({},e);case"@rgo/addProps":return Object(u.a)(Object(u.a)({},e),t.payload);case"@rgo/updateLoading":return Object(u.a)(Object(u.a)({},e),{},{loading:t.payload});case"@rgo/updateModalConfig":return Object(u.a)(Object(u.a)({},e),{},{modalConfig:Object(u.a)({},t.payload)});default:return e}},requestReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ca,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@requestBase/updateModalConfig":return Object(u.a)(Object(u.a)({},e),{},{modalConfig:Object(u.a)({},t.payload)});case"@requestBase/updateLoading":return Object(u.a)(Object(u.a)({},e),{},{loading:t.payload});case"@requestBase/updateRootProp":var n=t.payload,r=n.prop,a=n.value;return e[r]=a,Object(u.a)({},e);case"@requestBase/updateAllData":return Object(u.a)(Object(u.a)({},e),t.payload);default:return Object(u.a)({},e)}},requestFormReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yn,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"@requestForm/setActivities":return e.activities?Object(u.a)(Object(u.a)({},e),{},{activities:[].concat(Object(Ot.a)(e.activities),[r])}):Object(u.a)(Object(u.a)({},e),{},{activities:[r]});case"@requestForm/setWell":return e.recommendedWells?Object(u.a)(Object(u.a)({},e),{},{recommendedWells:[].concat(Object(Ot.a)(e.recommendedWells),[r])}):Object(u.a)(Object(u.a)({},e),{},{recommendedWells:[r]});case"@requestForm/setModalConfig":return e.modalConfig?Object(u.a)(Object(u.a)({},e),{},{modalConfig:Object(u.a)(Object(u.a)({},e.modalConfig),r)}):Object(u.a)(Object(u.a)({},e),{},{modalConfig:Object(u.a)({},r)});case"@requestForm/updateRootProp":var a=r.prop,o=r.value;return e[a]=o,Object(u.a)({},e);case"@requestForm/updateLogisticsArea":var i=Object(Ot.a)(r),c=i.map((function(e){return{area:e,responsibles:[{personaName:"",Signed:!1,position:0,Signature:""}]}}));return Object(u.a)(Object(u.a)({},e),{},{areas:i,signatures:c});case"@requestForm/updateSignatures":var s=r.prop,l=r.value,d=r.indexAreas,b=r.indexResponsible,p=e.signatures;return p[d].responsibles[b][s]=l,Object(u.a)(Object(u.a)({},e),{},{signatures:p});case"@requestForm/updateActivity":var j=r.prop,f=r.value,h=r.index,m=e.activities;return m[h][j]=f,Object(u.a)(Object(u.a)({},e),{},{activities:m});case"@requestForm/updateRecommendedWells":var g=r.prop,O=r.value,x=r.index,v=e.recommendedWells;return v[x][g]=O,Object(u.a)(Object(u.a)({},e),{},{recommendedWells:v});case"@requestForm/updateDateAuthorization":var y=r.prop,C=r.value,w=e.dateAuthorization;return w[y]=C,Object(u.a)(Object(u.a)({},e),{},{dateAuthorization:w});case"@requestForm/updateSignatureProps":var R=r.areaIndex,S=r.responsibleIndex,k=r.prop,E=r.value,N=e.signatures;return N[R].responsibles[S][k]=E,Object(u.a)(Object(u.a)({},e),{},{signatures:N});case"@requestForm/addSignature":var F=r.areaIndex,A=r.position,D=e.signatures;return D[F].responsibles=[].concat(Object(Ot.a)(D[F].responsibles),[{personaName:"",signed:!1,position:A,signature:""}]),Object(u.a)(Object(u.a)({},e),{},{signatures:D});case"@requestForm/removeWell":var P=r.index,q=e.recommendedWells.filter((function(e,t){return t!==P}));return Object(u.a)(Object(u.a)({},e),{},{recommendedWells:q});case"@requestForm/removeActivity":var z=r.index,I=e.activities.filter((function(e,t){return t!==z}));return Object(u.a)(Object(u.a)({},e),{},{activities:I});case"@requestForm/removeSignature":var T=r.areaIndex,M=r.responsibleIndex,B=e.signatures,L=B[T].responsibles.filter((function(e,t){return t!==M}));return B[T].responsibles=L,Object(u.a)(Object(u.a)({},e),{},{signatures:B});case"@requestForm/updateAllData":return Object(u.a)({},r);default:return e}},requestExtensionFormReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ia,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@extensionForm/addSignature":var n=t.payload,r=n.areaIndex,a=n.position,o=e.extensionSignatures;return o[r].responsibles=[].concat(Object(Ot.a)(o[r].responsibles),[{personaName:null,signed:!1,position:a,signature:null}]),Object(u.a)(Object(u.a)({},e),{},{extensionSignatures:o});case"@extensionForm/removeSignature":var i=t.payload,c=i.areaIndex,s=i.responsibleIndex,l=e.extensionSignatures,d=l[c].responsibles.filter((function(e,t){return t!==s}));return l[c].responsibles=d,Object(u.a)(Object(u.a)({},e),{},{extensionSignatures:l});case"@extensionForm/updateSignatureProps":var b=t.payload,p=b.areaIndex,j=b.responsibleIndex,f=b.prop,h=b.value,m=e.extensionSignatures;return m[p].responsibles[j][f]=h,Object(u.a)(Object(u.a)({},e),{},{extensionSignatures:m});case"@extensionForm/setModalConfig":return e.modalConfig?Object(u.a)(Object(u.a)({},e),{},{modalConfig:Object(u.a)(Object(u.a)({},e.modalConfig),t.payload)}):Object(u.a)(Object(u.a)({},e),{},{modalConfig:Object(u.a)({},t.payload)});case"@extensionForm/updateRootProp":var g=t.payload,O=g.prop,x=g.value;return e[O]=x,Object(u.a)({},e);case"@extensionForm/updateDateExtensionAuthorization":var v=t.payload,y=v.prop,C=v.value,w=e.dateExtensionAuthorization;return w[y]=C,Object(u.a)(Object(u.a)({},e),{},{dateExtensionAuthorization:w});case"@extensionForm/updateAll":return Object(u.a)(Object(u.a)({},e),t.payload);case"@extensionForm/clean":return{modalConfig:{},dateExtensionAuthorization:{from:null,to:null},reasonExtension:"",extensionSignatures:[{area:"Solicita",responsibles:[{personaName:null,signed:!1,position:0,signature:null}]},{area:"Autoriza",responsibles:[{personaName:null,signed:!1,position:0,signature:null}]}]};default:return e}},requestReturnFormReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@returnForm/addSignature":var n=t.payload,r=n.areaIndex,a=n.position,o=e.returnSignatures;return o[r].responsibles=[].concat(Object(Ot.a)(o[r].responsibles),[{personaName:"",signed:!1,position:a,signature:""}]),Object(u.a)(Object(u.a)({},e),{},{returnSignatures:o});case"@returnForm/removeSignature":var i=t.payload,c=i.areaIndex,s=i.responsibleIndex,l=e.returnSignatures,d=l[c].responsibles.filter((function(e,t){return t!==s}));return l[c].responsibles=d,Object(u.a)(Object(u.a)({},e),{},{returnSignatures:l});case"@returnForm/updateSignatureProps":var b=t.payload,p=b.areaIndex,j=b.responsibleIndex,f=b.prop,h=b.value,m=e.returnSignatures;return m[p].responsibles[j][f]=h,Object(u.a)(Object(u.a)({},e),{},{returnSignatures:m});case"@returnForm/setModalConfig":return e.modalConfig?Object(u.a)(Object(u.a)({},e),{},{modalConfig:Object(u.a)(Object(u.a)({},e.modalConfig),t.payload)}):Object(u.a)(Object(u.a)({},e),{},{modalConfig:Object(u.a)({},t.payload)});case"@returnForm/updateRootProp":var g=t.payload,O=g.prop,x=g.value;return e[O]=x,Object(u.a)({},e);case"@returnForm/updateAll":return Object(u.a)(Object(u.a)({},e),t.payload);default:return e}},hepReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@hep/updateModalConfig":return Object(u.a)(Object(u.a)({},e),{},{modalConfig:Object(u.a)(Object(u.a)({},e.modalConfig),t.payload)});case"@hep/updateRootProps":var n=t.payload,r=n.prop,a=n.value;return e[r]=a,Object(u.a)({},e);case"@hep/updateHepData":e.hepData.error=null;var o=t.payload,i=o.prop,c=o.value;return e.hepData[i]=c,Object(u.a)({},e);case"clean":return Object(u.a)({},Nt);default:return e}}})),ha={light:Object(u.a)(Object(u.a)({},g.a.light),it.light),dark:Object(u.a)(Object(u.a)({},g.a.dark),it.dark)},ma=function(e){var t=document.querySelector("#app-wrapper>.sidenav");t&&(e?t.classList.add("active"):t.classList.remove("active"))},ga=function(e){var t=e.title,n=e.light,r=e.className,a=e.showHelp,o=void 0!==a&&a,i=e.onToggleTheme,c=e.onChangeTheme,s=e.cleanInner,l=e.children,d=Object(we.c)((function(e){return e.baseReducer.offline}));return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(he,{className:"header",children:[Object(w.jsx)(p.BurgerMenuOutlined,{onClick:function(){return ma(!0)}}),t,o&&Object(w.jsxs)("a",{className:"help-header",href:"https://drillingworkflow.spence.aks.odev.cl/",rel:"noreferrer",target:"_blank",children:[Object(w.jsx)(p.HelpTone,{})," ",Object(w.jsx)("span",{children:"Ayuda"})]}),Object(w.jsx)(f.a,{trigger:d?"hover":"trigger",content:d&&"Algunas caracteristicas podrian no estar disponibles",children:Object(w.jsxs)("span",{style:{cursor:d?"pointer":"normal"},children:[d?"Offline":""," "]})}),Object(w.jsx)(ye,{onToggleTheme:i,light:n,onChangeTheme:c})]}),Object(w.jsxs)("div",{className:"content",children:[Object(w.jsx)("div",{className:"inner-content ".concat(s?"clean-inner":""," ").concat(r||""),children:l}),Object(w.jsx)(xe,{className:"footer sticky bottom0"})]})]})};function Oa(e){return xa.apply(this,arguments)}function xa(){return(xa=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ke.post("PlatformDelivery/save/offline",t,{contentType:"application/json"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function va(e){return ya.apply(this,arguments)}function ya(){return(ya=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ke.post("Hep/save/offline",t,{contentType:"application/json"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ca=function(e){!function(){var e=Object(a.useState)(!navigator.onLine),t=Object(b.a)(e,2),n=t[0],r=t[1],o=Object(we.b)(),i=function(){o({type:"@base/updateRootProp",payload:{prop:"offline",value:!navigator.onLine}}),r(!navigator.onLine)};Object(a.useEffect)((function(){return window.addEventListener("online",i),window.addEventListener("offline",i),function(){window.removeEventListener("online",i),window.removeEventListener("offline",i)}}),[])}();var t=Object(we.c)((function(e){return e.baseReducer.offline})),n=Object(mt.g)(),r=function(e){n.push(e),ma(!1)};return Object(a.useEffect)((function(){t||function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.table("platformDeliveryQueue").toArray();case 2:return t=e.sent,e.next=5,Ne.table("hepQueue").toArray();case 5:n=e.sent,t.length>0&&Oa(t).then((function(e){var t=e.status,n=e.data;200===t&&!0===(null===n||void 0===n?void 0:n.state)&&Ne.table("platformDeliveryQueue").clear()})),n.length>0&&va(n).then((function(e){var t=e.status,r=e.data;200===t&&!0===(null===r||void 0===r?void 0:r.state)&&Ne.table("hepCache").toArray().then((function(e){n.forEach((function(t){var n=e.find((function(e){return e.holeId===t.holeId}));void 0!==n&&Ne.table("hepCache").delete(n.id)}))})).finally((function(){Ne.table("hepQueue").clear()}))}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();return t}),[t]),Object(w.jsx)(R,{children:Object(w.jsxs)(me,{id:"app-wrapper",className:"app-wrapper",children:[Object(w.jsx)(h.RootStyles,{}),Object(w.jsx)(ge,{}),Object(w.jsxs)(ve,{className:"sidenav",children:[Object(w.jsx)(ja,{}),Object(w.jsx)("div",{className:"header",children:Object(w.jsx)("span",{children:"Drilling Workflow"})}),Object(w.jsx)("div",{className:"content",children:Object(w.jsxs)(be,{defaultSelectedKeys:["request"],children:[Object(w.jsx)(je,{onClick:function(){return r("/request-area")},children:"Solicitud de \xe1rea"},"request"),Object(w.jsx)(je,{onClick:function(){return r("/hep")},children:"HEP"},"hep")]})})]}),Object(w.jsx)("div",{className:"overlay",onClick:function(e){return ma(!1)}}),Object(w.jsx)("div",{className:"dynamic-container",children:e.children})]})})},wa=new ta.a;var Ra=function(){var e=Object(a.useState)(!1),t=Object(b.a)(e,2),n=t[0],r={light:n,onChangeTheme:t[1]};return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(ra.a,{children:Object(w.jsx)(we.a,{store:fa,children:Object(w.jsx)(na.a,{client:wa,children:Object(w.jsxs)(F.ThemeProvider,{theme:n?ha.light:ha.dark,children:[Object(w.jsx)("div",{id:"app-preload",className:"app-preload",children:Object(w.jsx)("span",{className:"preload-animation"})}),Object(w.jsx)(Ca,{children:Object(w.jsxs)(mt.d,{children:[Object(w.jsx)(mt.b,{path:"/request-area",render:function(e){return Object(w.jsx)(Pn,Object(u.a)(Object(u.a)({},e),r))}}),Object(w.jsx)(mt.b,{path:"/hep",render:function(e){return Object(w.jsx)(qt,Object(u.a)(Object(u.a)({},e),r))}}),Object(w.jsx)(mt.b,{path:"/request-area-view/:id",render:function(e){return Object(w.jsx)(Yr,Object(u.a)(Object(u.a)({},e),r))}}),Object(w.jsx)(mt.b,{path:"/new-request-area",render:function(e){return Object(w.jsx)(ar,Object(u.a)(Object(u.a)({},e),r))}}),Object(w.jsx)(mt.b,{path:"/extension-request/:id",render:function(e){return Object(w.jsx)($r,Object(u.a)(Object(u.a)({},e),r))}}),Object(w.jsx)(mt.b,{path:"/return-request/:id",render:function(e){return Object(w.jsx)(hr,Object(u.a)(Object(u.a)(Object(u.a)({},e),r),{},{mode:"new"}))}}),Object(w.jsx)(mt.b,{path:"/hep",render:function(e){return Object(w.jsx)(Tt,Object(u.a)(Object(u.a)({},e),r))}}),Object(w.jsx)(mt.b,{path:"/no-item",render:function(e){return Object(w.jsx)($,Object(u.a)(Object(u.a)({},e),r))}}),Object(w.jsx)(mt.b,{path:"/rgo",render:function(e){return Object(w.jsx)(Er,Object(u.a)(Object(u.a)({},e),r))}}),Object(w.jsx)(mt.b,{path:"/platform-delivery",render:function(e){return Object(w.jsx)(vn,Object(u.a)(Object(u.a)({},e),r))}}),Object(w.jsx)(mt.b,{path:"/",exact:!0,render:function(e){return Object(w.jsx)(mt.a,{to:"/request-area"})}})]})})]})})})})})},Sa=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ka(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(Object(w.jsx)(Ra,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Sa?(console.log("localhost",t),function(e,t){fetch(e).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ka(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")}))):(console.log("no local",t),ka(t,e))}))}}()},210:function(e,t,n){},322:function(e,t,n){},436:function(e,t,n){},965:function(e,t,n){},971:function(e,t,n){}},[[1065,1,2]]]);
//# sourceMappingURL=main.602f05fe.chunk.js.map